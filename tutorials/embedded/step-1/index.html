<!DOCTYPE html> <html lang="en"> <head> <title>Embedded Step-by-Step Tutorial - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <link href="http://static.jboss.org/theme/css/bootstrap-community/3.2.0.1/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet"> <!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="http://static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="http://static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="http://static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="http://static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/github.min.css" rel="stylesheet"> <link href="//static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 70px;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> </head> <body> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <div class="navbar navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/" style="margin-left: 0"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </div> <hr> <div class="row"> <ul class="breadcrumb"> <li> <a href="/tutorials">Tutorials</a> </li> <li class="active">The Weather App</li> </ul> <div id="columns"> <div class="col-md-3 well" id="leftcol"> <h3>Steps</h3> <a href="../index.html">Introduction</a> <ol start="0"> <li> <a href="../step-0">The Weather Application</a> </li> <li> <a href="../step-1">Initializing the CacheManager</a> </li> <li> <a href="../step-2">Putting stuff in the cache</a> </li> <li> <a href="../step-3">Making entries expire</a> </li> <li> <a href="../step-4">Configuring the default cache</a> </li> <li> <a href="../step-5">Clustering the application</a> </li> <li> <a href="../step-6">Listen to changes in the cluster</a> </li> <li> <a href="../step-7">Listen to changes in the cache</a> </li> <li> <a href="../step-8">Grouping entries together</a> </li> <li> <a href="../step-9">A custom externalizer</a> </li> <li> <a href="../step-10">Temperature averages with map/reduce</a> </li> <li> <a href="../step-11">Declarative configuration</a> </li> </ol> </div> <div class="col-md-9" id="maincol"> <div class="btn-toolbar"> <a class="btn btn-default" href="../step-0"> <i class="icon-chevron-sign-left">&nbsp;The Weather Application</i> </a> <a class="btn btn-default" href="https://github.com/infinispan/infinispan-embedded-tutorial/compare/step-0...step-1" target="_blank"> <i class="icon-code"> Code Diff </i> </a> <a class="btn btn-default" href="../step-2"> Putting stuff in the cache <i class="icon-chevron-sign-right"></i> </a> </div> <h3>Step 1: Initializing the CacheManager</h3> <p> Now that we have our simple application, let's add Infinispan to it and initialize a CacheManager. Adding Infinispan is achieved by declaring the following dependency in the pom.xml file: </p> <pre><code class="xml">&lt;dependency&gt;&#x000A;  &lt;groupId&gt;org.infinispan&lt;/groupId&gt;&#x000A;  &lt;artifactId&gt;infinispan-embedded&lt;/artifactId&gt;&#x000A;  &lt;version&gt;7.1.0.Final&lt;/version&gt;&#x000A;&lt;/dependency&gt;</code></pre> <p> Now we can add a CacheManager. The CacheManager has many purposes: <ul> <li>it acts as a container for caches and controls their lifecycle</li> <li>it manages global configuration and common data structures and resources (e.g. thread pools)</li> <li>it manages clustering</li> </ul> <br> A CacheManager is a fairly heavy-weight component, and you will probably want to initialize it early on in your application lifecycle. <br> A CacheManager is simply initialized by constructing it as follows: <pre><code class="java">CacheManager cacheManager = new DefaultCacheManager();</code></pre> This will give us a default local (i.e. non-clustered) CacheManager. Because a CacheManager holds on to some resources which require proper disposal, you also need to make sure you stop it when you don't need it anymore. This is done by invoking the <i>stop()</i> method, as follows: <pre><code class="java">cacheManager.stop();</code></pre> Once a CacheManager has been stopped it, and all resources obtained from it, cannot be used anymore. </p> <p> If you attempt to compile and run the application at this step </p> <pre><code class="nohighlight">$ git checkout step-1&#x000A;$ mvn clean package exec:exec</code></pre> <p> you will see that nothing has changed. This is expected: we are not doing anything with the CacheManager yet. We will put it to good use in the next step. </p> <div class="btn-toolbar"> <a class="btn btn-default" href="../step-0"> <i class="icon-chevron-sign-left">&nbsp;The Weather Application</i> </a> <a class="btn btn-default" href="https://github.com/infinispan/infinispan-embedded-tutorial/compare/step-0...step-1" target="_blank"> <i class="icon-code"> Code Diff </i> </a> <a class="btn btn-default" href="../step-2"> Putting stuff in the cache <i class="icon-chevron-sign-right"></i> </a> </div> </div> </div> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="http://blog.infinispan.org" title="Blog">Blog</a> </li> <li> <a href="http://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="http://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains</p> <a alt="JetBrains" href="http://www.jetbrains.com/idea/" target="_NEW"> <img src="http://www.jetbrains.com/idea/opensource/img/banners/idea125x37_white.gif"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> Â© Copyright 2009-2015 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="http://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="http://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="http://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="http://static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="http://static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.1/bootstrap-community.min.js"></script> <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-8601422-1']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script> </body> </html>