<!DOCTYPE html>
<html>

<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GPD7V946LB');
  </script>
  <title>The Weather App</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.7.2/css/all.css" integrity="sha384-nRgPTkuX86pH8yjPJUAFuASXQSSl2/bBUiNV47vSYpKFxHJhbcrGnmlYpYJMeD7a" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.css">
  <link rel="stylesheet" href="/assets/css/cookieconsent.css">
  <link rel="alternate" type="application/rss+xml"
        title="Infinispan's RSS Feed"
        href="/feed.xml" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body class="tutorial-extended">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/infinispan-logo-white.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/learn/">Learn <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/introduction" class="">Introduction</a></li>
          <li><a href="/features" class="">Features</a></li>
          <li><a href="/documentation" class="">Documentation</a></li>
          <li><a href="/tutorials" class="active">Tutorials</a></li>
          <li><a href="/videos" class="">Videos</a></li>
          <li><a href="/references" class="">References</a></li>
          <li><a href="/experiments" class="">Experiments</a></li>
          <li><a href="/roadmap" class="">Roadmap</a></li>
        </ul>
      </li>
      <li>
        <a href="/use-cases/" class="">Use Cases</a>
      </li>
      <li>
        <a href="/community/" class="">Community</a>
      </li>
      <li>
        <a href="/blog/" class="">Blog</a>
      </li>
      <li>
        <a href="/download/" class="">Download</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="component-slim full-width-bg dark-bg light-blue">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <a href="/tutorials">Tutorials</a>  <i class="fas fa-chevron-right"></i> The Weather App
    </div>
  </div>
</div>






<div class="grid-wrapper">
  <div class="width-3-12 width-12-12-m">
    





<h4>Tutorial Steps</h4>
<a href="index.html">Introduction</a>
<ol start="0">
  <li> <a href="step-0">The Weather Application</a> </li>
  <li> <a href="step-1">Initializing the CacheManager</a> </li>
  <li> <a href="step-2">Putting stuff in the cache</a> </li>
  <li> <a href="step-3">Making entries expire</a> </li>
  <li> <a href="step-4">Configuring the cache</a> </li>
  <li> <a href="step-5">Clustering the application</a> </li>
  <li> <a href="step-6">Listen to changes in the cluster</a> </li>
  <li> <a href="step-7">Listen to changes in the cache</a> </li>
  <li> <a href="step-8">Grouping entries together</a> </li>
  <li> <a href="step-9">Temperature averages with streams</a> </li>
  <li> <a href="step-10">Declarative configuration</a> </li>
</ol>

<!--
%ol{:start => "0" }
  - @tutorial_steps.each_with_index do |step, index|
    %li
      %a{:href => step_prefix + "step-" + (index).to_s } #{step} -->

  </div>
  <div class="width-9-12 width-12-12-m">
    <h4>The Weather App</h4>
    <p>
      Let's begin by checking out the project. Fire up your terminal and enter:
    </p>
    <pre>
      <code class="nohighlight">
        git clone https://github.com/infinispan/infinispan-embedded-tutorial.git && cd infinispan-embedded-tutorial
      </code>
    </pre>
    <p>
      The above commands will create a local copy (clone) of the git repository and change the current directory so that all subsequent commands will run from the project root directory. We now want to move to "Step 0" in the project:
    </p>
    <pre>
      <code class="nohighlight">
        git checkout -f step-0
      </code>
    </pre>
    <p>
      The initial step is just a plain Maven Java project with an implementation of our Weather Application. The application connects to the <a href="http://openweathermap.org">OpenWeatherMap</a> API to retrieve current weather data for a variety of cities. Usage of the OpenWeatherMap API requires registering for a free API key. Before launching the application, ensure you've set the OWMAPIKEY environment variable to your API key:
    </p>
      <pre>
        <code class="nohighlight">
          export OWMAPIKEY=111111
        </code>
      </pre>
      <p>
        In Windows you'd use:
      </p>
      <pre>
        <code class="nohighlight">
          C:\> set OWMAPIKEY=111111
        </code>
      </pre>
    <p>
      If you'd rather not register, if you don't have an Internet connection or you are having trouble connecting to the service, don't worry: the application will use a random weather service. This initial step has no dependencies and uses JDK logging. The following image shows the layout of the project:
    </p>
    <img src="/tutorials/embedded/infinispan-embedded-tree.png">
    <p>
      Let's compile and run it:
    </p>
    <pre>
      <code class="nohighlight">
        mvn clean package
      </code>
    </pre>
    <p>
      Maven will run both goals specified on the command-line in order. The first goal (clean) just cleans any previously generated files and the second one (package) compiles the project, runs any unit tests and packages the resulting code into a Jar file. At this point we can also run the code. The <i>main()</i> method of the <i>WeatherApp</i> class initializes the WeatherService and retrieves the current temperature for the list of cities twice and prints the elapsed time after each retrieval. Since no caching is being done at this stage, the application is quite slow on both runs, since it always has to retrieve the information.
    </p>
    <pre>
      <code class="nohighlight">
        mvn exec:exec
      </code>
    </pre>

    <details>
      <summary>Output</summary>
      <div>
        <pre>
          <code class="nohighlight">
            ---- Fetching weather information ----
            Rome, Italy - Temperature: 12.9° C, Conditions: light rain
            Como, Italy - Temperature: 6.3° C, Conditions: Sky is Clear
            Basel, Switzerland - Temperature: 0.8° C, Conditions: overcast clouds
            Bern, Switzerland - Temperature: -1.6° C, Conditions: broken clouds
            London, UK - Temperature: 1.8° C, Conditions: light rain
            Newcastle, UK - Temperature: 2.6° C, Conditions: scattered clouds
            Bucharest, Romania - Temperature: 9.3° C, Conditions: scattered clouds
            Cluj-Napoca, Romania - Temperature: 6.4° C, Conditions: scattered clouds
            Ottawa, Canada - Temperature: -7.0° C, Conditions: overcast clouds
            Toronto, Canada - Temperature: -7.0° C, Conditions: broken clouds
            Lisbon, Portugal - Temperature: 14.6° C, Conditions: overcast clouds
            Porto, Portugal - Temperature: 12.2° C, Conditions: moderate rain
            Raleigh, USA - Temperature: 3.9° C, Conditions: Sky is Clear
            Washington, USA - Temperature: 3.4° C, Conditions: light rain
            ---- Fetched in 2210ms ----
            ---- Fetching weather information ----
            Rome, Italy - Temperature: 12.9° C, Conditions: light rain
            Como, Italy - Temperature: 6.3° C, Conditions: Sky is Clear
            Basel, Switzerland - Temperature: 0.8° C, Conditions: overcast clouds
            Bern, Switzerland - Temperature: -1.6° C, Conditions: broken clouds
            London, UK - Temperature: 1.8° C, Conditions: light rain
            Newcastle, UK - Temperature: 2.6° C, Conditions: scattered clouds
            Bucharest, Romania - Temperature: 9.3° C, Conditions: scattered clouds
            Cluj-Napoca, Romania - Temperature: 6.4° C, Conditions: scattered clouds
            Ottawa, Canada - Temperature: -7.0° C, Conditions: overcast clouds
            Toronto, Canada - Temperature: -7.0° C, Conditions: broken clouds
            Lisbon, Portugal - Temperature: 14.6° C, Conditions: overcast clouds
            Porto, Portugal - Temperature: 12.2° C, Conditions: moderate rain
            Raleigh, USA - Temperature: 3.9° C, Conditions: Sky is Clear
            Washington, USA - Temperature: 3.4° C, Conditions: light rain
            ---- Fetched in 1820ms ----
          </code>
        </pre>
      </div>
    </details>
    <p>
      Things will get more interesting in the next step.
    </p>
  </div>
</div>


  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/infinispan-logo.png" class="project-logo" title="Infinispan Logo" alt="Infinispan"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Infinispan is released under the Apache 2.0 open source license. Learn more about the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>.<br/><br/>This website built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/infinispan/infinispan.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <b>Navigation</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/" >Home</a></li>
          
            
            <li><a href="/features" >Features</a></li>
          
            
            <li><a href="/documentation" >Docs</a></li>
          
            
            <li><a href="/tutorials" >Tutorials</a></li>
          
            
            <li><a href="/videos" >Videos</a></li>
          
            
            <li><a href="/use-cases" >Use Cases</a></li>
          
            
            <li><a href="/community" >Community</a></li>
          
            
            <li><a href="/download" >Download</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Contribute</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="https://issues.jboss.org/browse/ISPN" target="_blank">Submit a Bug</a></li>
          
            
            <li><a href="https://github.com/infinispan" target="_blank">Write Code</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Follow Us</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/blog" >Blog</a></li>
          
            
            <li><a href="https://twitter.com/infinispan" target="_blank">Twitter</a></li>
          
        </ul>
      </div>
    

    <div class="width-6-12 more-links">
      <div class="grid-wrapper">
        <div class="width-6-12">
          <b>A Member of</b><br/>
          <a href="https://www.commonhaus.org/" target="_blank"><img src="/assets/images/CF_logo_horizontal.svg" title="Commonhaus Foundation"></a><br/>
        </div>
        <div class="width-6-12">
          <b>Thanks to</b><br/>
          <a href="https://zulip.com" target="_blank"><img src="/assets/images/footer/zulip.png" title="Zulip" alt="Zulip"></a>
          <a href="https://weblate.org" target="_blank"><img src="/assets/images/footer/weblate.png" title="Weblate" alt="Weblate"></a>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="content-slim redhat-footer">
  <div class="grid-wrapper">
    <span class="cookie-preferences">
      <a href="#" data-cc="show-preferencesModal">Manage cookie preferences</a>
    </span>
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/truncate-list.js"></script>

  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.umd.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.config.js" type="module"></script>

<!--   <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script> -->
</body>

</html>
