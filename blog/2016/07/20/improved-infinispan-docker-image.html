<!DOCTYPE html>
<html>

<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GPD7V946LB');
  </script>
  <title>Improved Infinispan Docker image available</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.css">
  <link rel="stylesheet" href="/assets/css/cookieconsent.css">
  <link rel="alternate" type="application/rss+xml"
        title="Infinispan's RSS Feed"
        href="/feed.xml" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body class="blog">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/infinispan-logo-white.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/learn/">Learn <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/introduction" class="">Introduction</a></li>
          <li><a href="/features" class="">Features</a></li>
          <li><a href="/documentation" class="">Documentation</a></li>
          <li><a href="/tutorials" class="">Tutorials</a></li>
          <li><a href="/videos" class="">Videos</a></li>
          <li><a href="/references" class="">References</a></li>
          <li><a href="/experiments" class="">Experiments</a></li>
          <li><a href="/roadmap" class="">Roadmap</a></li>
        </ul>
      </li>
      <li>
        <a href="/use-cases/" class="">Use Cases</a>
      </li>
      <li>
        <a href="/community/" class="">Community</a>
      </li>
      <li>
        <a href="/blog/" class="active">Blog</a>
      </li>
      <li>
        <a href="/download/" class="">Download</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    
<div class="component-slim full-width-bg dark-bg light-blue">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <a href="/blog">Blogs</a>  <i class="fas fa-chevron-right"></i> Improved Infinispan Docker image available
    </div>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="grid__item width-10-12 width-12-12-m doc-content">
    <h1>Improved Infinispan Docker image available</h1>
    <div class="post-date">July 20, 2016
      Tags: <a href="/blog/tag/docker"> docker</a> <a href="/blog/tag/console">console</a> <a href="/blog/tag/domain-mode">domain mode</a> <a href="/blog/tag/server">server</a> <a href="/blog/tag/jgroups">jgroups</a> 
    </div>
    <div class="grid-wrapper">
      <div class="grid__item width-8-12 width-12-12-m margin-tb-sm">
        <div class="grid-wrapper">
          <div class="width-2-12 justify-self-center align-self-center">
            <img src="/assets/images/blog/authors/gustavo.jpg">
          </div>
          <div class="width-10-12 align-self-center">
            <p class="byline">By Gustavo Fernandes</p>
          </div>
        </div>
      </div>
      <div class="grid__item width-12-12">
          <div class="paragraph">
<p><a href="https://www.docker.com/sites/default/files/Engine.png"><span class="image"><img src="https://www.docker.com/sites/default/files/Engine.png" alt="image" width="200" height="196"></span></a></p>
</div>
<div class="paragraph">
<p>The <a href="https://hub.docker.com/r/jboss/infinispan-server/">Infinispan Docker
image</a> has been improved, making it easier to run Infinispan Servers in
clustered, domain and standalone modes, with different protocol
stacks.</p>
</div>
<div class="paragraph">
<p>In this blog post we&#8217;ll show a few usage scenarios and how to combine it
with the <a href="https://hub.docker.com/r/jboss/jgroups-gossip/">jgroups-gossip</a>
image to create Infinispan Server clusters in docker based
environments.</p>
</div>
<div class="sect1">
<h2 id="getting-started">Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the container runs in clustered mode, and to start a node
simply execute:</p>
</div>
<div class="paragraph">
<p>Bringing a second container will cause it to form a cluster.The
membership can be verified by running a command directly in the newly
launched container:</p>
</div>
<div class="paragraph">
<p>Example output:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-a-different-jgroups-stack">Using a different JGroups stack</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The command above creates a cluster with the default JGroups stack
(UDP), but it&#8217;s possible to pick another one provided it&#8217;s supported by
the server. For example, to use TCP:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-on-cloud-environments">Running on cloud environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recently dockerized the JGroups Gossip Router to be used as an
alternative discovery mechanism in environments where multicast is not
enabled, such as cloud environments.</p>
</div>
<div class="paragraph">
<p>Employing  a gossip router will enable discovery via TCP, where the
router acts as a registry: each member will register itself in this
registry upon start and also discover other members.</p>
</div>
<div class="paragraph">
<p>The gossip router container can be launched by:</p>
</div>
<div class="paragraph">
<p>Take note of the address where the router will bind to, it&#8217;s needed by
the Infinispan nodes. The address can be easily obtained by:</p>
</div>
<div class="paragraph">
<p>Finally, we can now launch our cluster specifying the tcp-gossip stack
with the location of the gossip router:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="launching-standalone-mode">Launching Standalone mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Passing an extra parameter allows to run a server in standalone
(non-clustered) mode:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="server-management-console-in-domain-mode">Server Management Console in Domain mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Domain mode is a special case of clustered mode (and currently a
requirement to use the Server Management Console), that involves
launching a domain controller process plus one or more host controller
processes. The domain controller does not hold data, it is used as a
centralized management process that can replicate configuration and
provision servers on the host controllers.</p>
</div>
<div class="paragraph">
<p>Running a domain controller is easily achievable with a parameter:</p>
</div>
<div class="paragraph">
<p>Once the domain controller is running, it&#8217;s possible to start one or
more host controllers. In the default configuration, each host
controller has two Infinispan server instances:</p>
</div>
<div class="paragraph">
<p>The command line interface can be used to verify the hosts managed in
the domain:</p>
</div>
<div class="paragraph">
<p>It should output all the host names that are part of the domain,
including the master (domain controller):</p>
</div>
<div class="paragraph">
<p>To get access to the Management console, use credentials admin/admin and
go to port 9990 of the domain controller, for example:
<a href="http://172.17.0.2:9990/">http://172.17.0.2:9990/</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="versions">Versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The image is built on
<a href="https://hub.docker.com/r/jboss/infinispan-server/">Dockerhub</a> shortly
after each Infinispan release (stable and unstable), and the
improvements presented in this post are available for Infinispan
9.0.0.Alpha3 and Infinispan 8.2.3.Final. As a reminder, make sure to
pick the right version when launching containers:</p>
</div>
<div class="paragraph">
<p>Getting involved</p>
</div>
<div class="paragraph">
<p>The image was created to be flexible and easy to use, but if something
is not working for you or if you have any suggestions to improve it,
please report it at
<a href="https://github.com/jboss-dockerfiles/infinispan/issues/" class="bare">https://github.com/jboss-dockerfiles/infinispan/issues/</a></p>
</div>
<div class="paragraph">
<p>Enjoy!</p>
</div>
</div>
</div>
          
      </div>
      <div class="grid__item width-12-12">
        <h2>Get it, Use it, Ask us! </h2>
We’re hard at work on new features, improvements and fixes, so watch this space for more announcements!
<div class="paragraph">
    <p>Please, <a href="/download" target="_blank">download</a> and test the latest release.</p>
</div>
<div class="paragraph">
    <p>The source code is hosted on <a href="" target="_blank">GitHub</a>.
        If you need to report a bug or request a new feature, look for a similar one on our <a href="https://github.com/infinispan/infinispan/issues" target="_blank">GitHub issues tracker</a>.
        If you don’t find any, <a href="https://github.com/infinispan/infinispan/issues" target="_blank">create a new issue</a>.</p>
</div>
<div class="paragraph">
    <p>If you have questions, are experiencing a bug or want advice on using Infinispan,
        you can use <a href="https://github.com/infinispan/infinispan/discussions/"
                       target="_blank">GitHub discussions</a>.
        We will do our best to answer you as soon as we can.</p>
</div>
<div class="paragraph">
    <p>The Infinispan community uses <a href="https://zulipchat.com/"
                                        target="_blank">Zulip</a> for real-time communications.
        Join us using either a web-browser or a <a href="https://infinispan.zulipchat.com/apps/" target="_blank">dedicated
            application</a> on the <a href="https://infinispan.zulipchat.com/" target="_blank">Infinispan chat</a>.</p>
</div>
      </div>
      
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/infinispan-logo.png" class="project-logo" title="Infinispan Logo" alt="Infinispan"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Infinispan is released under the Apache 2.0 open source license. Learn more about the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>.<br/><br/>This website built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/infinispan/infinispan.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <b>Navigation</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/" >Home</a></li>
          
            
            <li><a href="/features" >Features</a></li>
          
            
            <li><a href="/documentation" >Docs</a></li>
          
            
            <li><a href="/tutorials" >Tutorials</a></li>
          
            
            <li><a href="/videos" >Videos</a></li>
          
            
            <li><a href="/use-cases" >Use Cases</a></li>
          
            
            <li><a href="/community" >Community</a></li>
          
            
            <li><a href="/download" >Download</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Contribute</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="https://issues.jboss.org/browse/ISPN" target="_blank">Submit a Bug</a></li>
          
            
            <li><a href="https://github.com/infinispan" target="_blank">Write Code</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Follow Us</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/blog" >Blog</a></li>
          
            
            <li><a href="https://twitter.com/infinispan" target="_blank">Twitter</a></li>
          
        </ul>
      </div>
    

    <div class="width-6-12 more-links">
      <div class="grid-wrapper">
        <div class="width-6-12">
          <b>A Member of</b><br/>
          <a href="https://www.commonhaus.org/" target="_blank"><img src="/assets/images/CF_logo_horizontal.svg" title="Commonhaus Foundation"></a><br/>
        </div>
        <div class="width-6-12">
          <b>Thanks to</b><br/>
          <a href="https://zulip.com" target="_blank"><img src="/assets/images/footer/zulip.png" title="Zulip" alt="Zulip"></a>
          <a href="https://weblate.org" target="_blank"><img src="/assets/images/footer/weblate.png" title="Weblate" alt="Weblate"></a>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="content-slim redhat-footer">
  <div class="grid-wrapper">
    <span class="cookie-preferences">
      <a href="#" data-cc="show-preferencesModal">Manage cookie preferences</a>
    </span>
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/truncate-list.js"></script>

  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.umd.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.config.js" type="module"></script>

<!--   <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script> -->
</body>

</html>
