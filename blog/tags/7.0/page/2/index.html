<!DOCTYPE html> <html lang="en"> <head> <title>Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Tuesday, 07 October 2014 </h3> <h1> <a href="/blog/2014/10/07/infinispan-700cr1-is-out/">Infinispan 7.0.0.CR1 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Community,</p> </div> <div class="paragraph"> <p>We are gearing up towards a great Infinispan 7.0.0, and we are happy to announce our first candidate release!</p> </div> <div class="paragraph"> <p>Notable features and improvements in this release:</p> </div> <div class="ulist"> <ul> <li> <p>Cross-site state transfer now handles failures  (<a href="https://issues.jboss.org/browse/ISPN-4025">ISPN-4025</a>)</p> </li> <li> <p>Easier management of Protobuf schemas (<a href="https://issues.jboss.org/browse/ISPN-4357">ISPN-4357</a>)</p> </li> <li> <p>New uberjars-based distribution (<a href="https://issues.jboss.org/browse/ISPN-4728">ISPN-4728</a>)</p> </li> <li> <p>The HotRod protocol and Java client now have a size() operation (<a href="https://issues.jboss.org/browse/ISPN-4736">ISPN-4736</a>)</p> </li> <li> <p>Cluster listeners' filters and converters can now see the old value and metadata (<a href="https://issues.jboss.org/browse/ISPN-4753">ISPN-4753</a>)</p> </li> <li> <p>A new and promising file store implementation that addresses the scalability issues of our single-file store (<a href="https://issues.jboss.org/browse/ISPN-3921">ISPN-3921</a>, thanks Radim!)</p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324510">release notes</a>.  Visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers, The Infinispan team</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/release/"> release </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <a class="label" href="/blog/tags/release candidate/"> release candidate </a> <hr> <div class="post"></div> <h3> Wednesday, 17 September 2014 </h3> <h1> <a href="/blog/2014/09/17/hot-rod-remote-events-3-customizing/">Hot Rod Remote Events #3: Customizing events</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This blog post is the third in a series that looks at the forthcoming Hot Rod Remote Events functionality included in Infinispan 7.0. In the <a href="http://blog.infinispan.org/2014/08/hot-rod-remote-events-1-getting-started.html">first article</a> we looked at how to get started receiving remote events from Hot Rod servers. In the <a href="http://blog.infinispan.org/2014/08/hot-rod-remote-events-2-filtering-events.html">second article</a>, we saw how Hot Rod remote events can be filtered providing key/value filter factories that can create instances that filter which events are sent to clients, and how these filters can act on client provided information.</p> </div> <div class="paragraph"> <p>This time we are going to focus on how to customize events sent to clients. Events generated by default contain just enough information to make the event relevant but avoid cramming too much information in order to reduce the cost of sending them. Normally, this information consists of key and type of event.</p> </div> <div class="paragraph"> <p>Optionally, the information shipped in these events can be customized in order to contain more information, such as values, or to contain even less information. This customization is done with org.infinispan.notifications.cachelistener.filter.CacheEventConverter instances which are created by implementing a org.infinispan.notifications.cachelistener.filter.CacheEventConverterFactory class. Each factory must have a name associated to it via the org.infinispan.filter.NamedFactory annotation.</p> </div> <div class="paragraph"> <p>When a listener is added, we can provide the name of a converter factory to use with this listener, and when the listener is added, the server will look up the factory and invoke getConverter method to get a org.infinispan.notifications.cachelistener.filter.CacheEventConverter class instance to customize events server side.</p> </div> <div class="paragraph"> <p>Here&#8217;s a sample implementation which will send custom events containing value information back to clients for a cache of Integers and Strings:</p> </div> <div class="paragraph"> <p>In the example above, the converter generates a new custom event which includes the value as well as the key in the event. This will result in bigger event payloads compared with default events, but if combined with filtering, it can reduce its network bandwidth cost.</p> </div> <div class="paragraph"> <p>In another converter implementation, the user could decide to send back an event that contains no key or event type information. This would result in extremely lightweight events at the expense of richness of information provided by the event itself.</p> </div> <div class="paragraph"> <p>Plugging the server with this converter requires deploying this converter factory (and associated converter class) within a jar file including a service definition inside the META-INF/services/org.infinispan.notifications.cachelistener.filter.CacheEventConverterFactory file:</p> </div> <div class="paragraph"> <p>With the server plugged with the converter, the next step is adding a remote client listener that will use this converter. How to implement a listener for custom events is slightly different to the listeners we&#8217;ve seen in the last couple of blog posts because we know have to deal with customised events as opposed to the default ones. To do so, the same annotations are used as previous blog posts, but the callbacks receive instances of org.infinispan.client.hotrod.event.ClientCacheEntryCustomEvent&lt;T&gt;, where T is the type of custom event we are sending from the server:</p> </div> <div class="paragraph"> <p>Now it&#8217;s time to write a simple main java class which adds the remote event listener and executes some operations against the remote cache:</p> </div> <div class="paragraph"> <p>Once executed, we should see a console console output similar to this:</p> </div> <div class="paragraph"> <p>Similar to events, converters can also act on client provided information, enabling converter instances to customize events depending on the information given when the listener was added. The API provides an extra parameter to pass in converter parameters when the listener is added. Given the similarities with filtering, this part is not covered by this blog post.</p> </div> <div class="paragraph"> <p>A final note on the marshalling aspects of this example. In order to facilitate both server and client writing against type safe APIs, both the client and server need to be aware of custom event type and be able to marshall it. Client side, this is done by an optional marshaller configurable via the RemoteCacheManager. Server side, this is done by a marshaller recently added to the Hot Rod server configuration.</p> </div> <div class="paragraph"> <p>In the next blog post in the Hot Rod remote events series, we will look at how to receive remote events in a clustered environment, how to deal with failover situations&#8230;&#8203;etc.</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/hotrod/"> hotrod </a> <a class="label" href="/blog/tags/event/"> event </a> <a class="label" href="/blog/tags/remote events/"> remote events </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Tuesday, 16 September 2014 </h3> <h1> <a href="/blog/2014/09/16/infinispan-700beta2-is-out/">Infinispan 7.0.0.Beta2 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Infinispan Community,</p> </div> <div class="paragraph"> <p>We are happy to announce the second Beta release of Infinispan 7.0.0!</p> </div> <div class="paragraph"> <p>This release brings many improvements and fixes:</p> </div> <div class="paragraph"> <p>Many fixes and performance optimizations for non-indexed queries (<a href="https://issues.jboss.org/browse/ISPN-4670">ISPN-4670</a>, <a href="https://issues.jboss.org/browse/ISPN-4700">ISPN-4700</a>)</p> </div> <div class="paragraph"> <p>Significant improvements to the reliability of indexed (i.e. Lucene based) queries:</p> </div> <div class="ulist"> <ul> <li> <p>InfinispanIndexManager reworked to handle locking on topology changes (<a href="https://issues.jboss.org/browse/ISPN-4599">ISPN-4599</a>)</p> </li> <li> <p>MassIndexer 20x performance improvement (<a href="https://issues.jboss.org/browse/ISPN-4644">ISPN-4644</a>)</p> </li> <li> <p>Some race conditions fixed in the Lucene Directory (<a href="https://issues.jboss.org/browse/ISPN-2981">ISPN-2981</a>)</p> </li> <li> <p>Fixed serialization of indexing messages under high load (<a href="https://issues.jboss.org/browse/ISPN-4573">ISPN-4573</a>)</p> </li> <li> <p>Resolved a race condition in (indexed) Cache initializations (<a href="https://issues.jboss.org/browse/ISPN-4719">ISPN-4719</a>)</p> </li> <li> <p>Improved classloading when run in containers (<a href="https://issues.jboss.org/browse/ISPN-4226">ISPN-4226</a>, <a href="https://issues.jboss.org/browse/ISPN-4667">ISPN-4667</a>)</p> </li> <li> <p>Fixed JBoss modules to use Externalizers when run in containers (<a href="https://issues.jboss.org/browse/ISPN-4685">ISPN-4685</a>)</p> </li> <li> <p>(and many more minor improvements)</p> </li> <li> <p><a href="https://issues.jboss.org/browse/ISPN-4574">ISPN-4574</a> - Partition handling improvements for replicated caches and distributed caches with <em>numOwners</em> &gt; cluster size / 2</p> </li> <li> <p><a href="https://issues.jboss.org/browse/ISPN-4646">ISPN-4646</a> - Eviction performance improvements, thanks to Karsten Blees</p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324508">release notes</a>.  Visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>The Infinispan team.</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Wednesday, 20 August 2014 </h3> <h1> <a href="/blog/2014/08/20/hot-rod-remote-events-2-filtering-events/">Hot Rod Remote Events #2: Filtering events</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This blog post is the second in a series that looks at the forthcoming Hot Rod Remote Events functionality included in Infinispan 7.0. In the <a href="http://blog.infinispan.org/2014/08/hot-rod-remote-events-1-getting-started.html">first blog post</a> we looked at how to get started receiving remote events from Hot Rod servers. This time we are going to focus on how to filter events directly in the server.</p> </div> <div class="paragraph"> <p>Sending events to remote clients has a cost which increases as the number of clients. The more clients register remote listeners, the more events the server has to send. This cost also goes up as the number of modifications are executed against the cache. The more cache modifications, the more events that need to be sent.</p> </div> <div class="paragraph"> <p>A way to reduce this cost is by filtering the events to send server-side. If at the server level custom code decides that clients are not interested in a particular event, the event does not even need to leave the server, improving the overall performance of the system.</p> </div> <div class="paragraph"> <p>Remote event filters are created by implementing a org.infinispan.notifications.cachelistener.filter.CacheEventFilterFactory class. Each factory must have a name associated to it via the org.infinispan.notifications.cachelistener.filter.NamedFactory annotation.</p> </div> <div class="paragraph"> <p>When a listener is added, we can provide the name of a key value filter factory to use with this listener, and when the listener is added, the server will look up the factory and invoke getFilter method to get a org.infinispan.notifications.cachelistener.filter.CacheEventFilterFactory class instance to filter events server side.</p> </div> <div class="paragraph"> <p>Filtering can be done based on key or value information, and even based on cached entry metadata. Here&#8217;s a sample implementation which will filter key "2" out of the events sent to clients:</p> </div> <div class="paragraph"> <p>Plugging the server with this key value filter requires deploying this filter factory (and associated filter class) within a jar file including a service definition inside the META-INF/services/org.infinispan.notifications.cachelistener.filter.CacheEventFilterFactory file:</p> </div> <div class="paragraph"> <p>With the server plugged with the filter, the next step is adding a remote client listener that will use this filter. For this example, we&#8217;ll extend the EventLogListener implementation provided in the <a href="http://blog.infinispan.org/2014/08/hot-rod-remote-events-1-getting-started.html">first blog post</a> in the series and we override the @ClientListener annotation to indicate the filter factory to use with this listener:</p> </div> <div class="paragraph"> <p>Next, we add the listener via the RemoteCache API and we execute some operations against the remote cache:</p> </div> <div class="paragraph"> <p>If we checkout the system output we&#8217;ll see that the client receives events for all keys except those that have been filtered:</p> </div> <div class="paragraph"> <p>Finally, with Hot Rod remote events we have tried to provide additional flexibility at the client side, which is why when adding client listeners, users can provide parameters to the filter factory so that filter instances with different behaviours can be generated out of a single filter factory based on client side information. To show this in action, we are going to enhance the filter factory above so that instead of filtering on a statically given key, it can filter dynamically based on the key provided when adding the listener. Here&#8217;s the revised version:</p> </div> <div class="paragraph"> <p>Finally, here&#8217;s how we can now filter by "3" instead of "2":</p> </div> <div class="paragraph"> <p>And the output:</p> </div> <div class="paragraph"> <p>To summarise, we&#8217;ve seen how Hot Rod remote events can be filtered providing key/value filter factories that can create instances that filter which events are sent to clients, and how these filters can act on client provided information.</p> </div> <div class="paragraph"> <p>In the next blog post, we&#8217;ll look at how to customize remote events in order to reduce the amount of information sent to the clients, or on the contrary, provide even more information to our clients.</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/hotrod/"> hotrod </a> <a class="label" href="/blog/tags/event/"> event </a> <a class="label" href="/blog/tags/remote events/"> remote events </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Tuesday, 12 August 2014 </h3> <h1> <a href="/blog/2014/08/12/hot-rod-remote-events-1-getting-started/">Hot Rod Remote Events #1: Getting started</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Shortly after the first Hot Rod server implementation was released in 2010, <a href="https://issues.jboss.org/browse/ISPN-374">ISPN-374</a> was created requesting cache events to be forwarded back to connected clients. Even though embedded caches have had access to these events since Infinispan&#8217;s first release, propagating them to remote clients has taken a while, due to the increased complexity involved.</p> </div> <div class="paragraph"> <p>For Infinispan 7.0, we&#8217;ve finally addressed this. This is the first post in a series that looks at Hot Rod Remote Events and the different functionality we&#8217;ve implemented for this release. On this first post, we show you how to get started with Hot Rod Remote Events with the most basic of examples:</p> </div> <div class="paragraph"> <p>Start by downloading the Server distribution for the latest 7.0 (or higher) release from <a href="http://infinispan.org/download/">Infinispan&#8217;s download page</a>. The server contains the Hot Rod server with which the client will communicate. Once downloaded, start it up running the following from the root of the server:</p> </div> <div class="paragraph"> <div class="title">/bin/standalone.sh</div> <p>Next up, we need to write a little application that interacts with the Hot Rod server. If you&#8217;re using Maven, create an application with this dependency, changing version to 7.0.0.Beta1 or higher:</p> </div> <div class="paragraph"> <p>If not using Maven, adjust according to your chosen build tool or download the all distribution with all Infinispan jars.</p> </div> <div class="paragraph"> <p>With the application dependencies in place, we need to start to write the client application. We&#8217;ll start with a simple remote event listener that simply logs all events received:</p> </div> <div class="paragraph"> <p>Now it&#8217;s time to write a simple main java class which adds the remote event listener and executes some operations against the remote cache:</p> </div> <div class="paragraph"> <p>Once executed, we should see a console console output similar to this:</p> </div> <div class="paragraph"> <p>As you can see from the output, by default events come with the key and the internal data version associated with the current value. The actual value is not shipped back to the client for performance reasons. Clearly, receiving remote events has a cost, and as the cache size increases and more operations are executed, more events will be generated. To avoid inundating Hot Rod clients, remote events can either be filtered server side, or the event contents can be customised. In the next blog post in this series, we will see this functionality in action.</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/hotrod/"> hotrod </a> <a class="label" href="/blog/tags/event/"> event </a> <a class="label" href="/blog/tags/remote events/"> remote events </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Monday, 11 August 2014 </h3> <h1> <a href="/blog/2014/08/11/infinispan-700beta1-is-out/">Infinispan 7.0.0.Beta1 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Community,</p> </div> <div class="paragraph"> <p>It is our pleasure to announce the first Beta release of Infinispan 7.0.0!</p> </div> <div class="paragraph"> <p>The release highlights are:</p> </div> <div class="ulist"> <ul> <li> <p>Initial support for Cluster partitions (aka Split Brain) <a href="https://issues.jboss.org/browse/ISPN-263">ISPN-263</a></p> </li> <li> <p>Added JGroups SASL support to Infinispan Server <a href="https://issues.jboss.org/browse/ISPN-4303">ISPN-4303</a></p> </li> <li> <p>Upgraded internal JGroups version to 3.5.0.CR2 <a href="https://issues.jboss.org/browse/ISPN-4609">ISPN-4609</a></p> </li> <li> <p>Map/Reduce tasks no longer have a timeout by default <a href="https://issues.jboss.org/browse/ISPN-4618">ISPN-4618</a></p> </li> <li> <p>Merge batching configuration with transaction modes to prevent ambiguity <a href="https://issues.jboss.org/browse/ISPN-4197">ISPN-4197</a></p> </li> <li> <p>Improve server test suite run times <a href="https://issues.jboss.org/browse/ISPN-4317">ISPN-4317</a></p> </li> <li> <p>Multiple improvements and bug fixes!</p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?version=12324507&amp;projectId=12310799">release notes</a>.  Visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>The Infinispan team.</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Thursday, 05 June 2014 </h3> <h1> <a href="/blog/2014/06/05/mapreduce-performance-improvements/">Map/Reduce Performance improvements between Infinispan 6 and 7</a> </h1> <div class="content"> <div class="sect1"> <h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2> <div class="sectionbody"> <div class="paragraph"> <p>There have been a number of recent Infinispan 7.0 Map/Reduce performance related <a href="https://issues.jboss.org/browse/ISPN-4241?filter=12321790">improvements</a> that we were eager to test in our performance lab and subsequently share with you. The results are more than promising. In the word count use case, Map/Reduce task execution speed and throughput improvement is between fourfold and sixfold in certain situations that were tested.</p> </div> <div class="paragraph"> <p>We have achieved these improvements by focusing on:</p> </div> <div class="ulist"> <ul> <li> <p>Optimized mapper/reducer parallel execution on all nodes</p> </li> <li> <p>Improving the handling and processing of larger data sets</p> </li> <li> <p>Reducing the amount of memory needed for execution of MapReduceTask</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="_performance_test_results"><a class="anchor" href="#_performance_test_results"></a>Performance Test Results</h2> <div class="sectionbody"> <div class="paragraph"> <p>The performance tests were run using the following parameters:</p> </div> <div class="ulist"> <ul> <li> <p>An Infinispan 7.0.0-SNAPSHOT build created after the last commits from the list were committed to the Infinispan GIT repo on May 9th vs Infinispan 6.0.1.Final </p> </li> <li> <p>OpenJDK version 1.7.0_55 with 4GB of heap and the following JVM options:</p> </li> <li> <p>Random data filled 30% of the Java heap, and 100 random words were used to create the 8 kilobyte cache values. The cache keys were generated using key affinity, so that the generated data would be distributed evenly in the cache. These values were chosen, so that a comparison to Infinispan 6 could be made. Infinispan 7 can handle a final result map with a much larger set of keys than is possible in Infinispan 6. The actual amount of heap size that is used for data will be larger due to backup copies, since the cluster is running in distributed mode.</p> </li> <li> <p>The MapReduceTask executes a word count against the cache values using <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountMapperEmitPerValue.java">mapper</a>, <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountReducer.java">reducer, combiner</a>, and <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountCollator.java">collator</a> implementations. The collator returns the 10 most frequently occurring words in the cache data. The task used a distributed reduce phase and a shared intermediate cache. The MapReduceTask is executed 10 times against the data in the cache and the values are reported as an average of these durations.</p> </li> </ul> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_a_fixed_amount_of_data_and_30_of_the_heap"><a class="anchor" href="#_from_1_to_8_nodes_using_a_fixed_amount_of_data_and_30_of_the_heap"></a>From 1 to 8 nodes using a fixed amount of data and 30% of the heap</h3> <div class="paragraph"> <p>This test executes two word count executions on each cluster with an increasing number of nodes. The first execution uses an increasing amount of data equal to 30% of the total Java heap across the cluster (i.e. With one node, the data consumes 30% of 4 GB. With two nodes, the data consumes 30% of 8 GB, etc.), and the second execution uses a fixed amount of data, (1352 MB which is approximately 30% of 4 GB). Throughput is calculated by dividing the total amount of data processed by the Map/Reduce task by the duration. The following charts show the throughput as nodes are added to the cluster for these two scenarios:</p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-TZD4uFGgkuc/U5ApZx-8KGI/AAAAAAAAABo/VSJkbhFFnDg/s1600/ISPN_6_fixed_size_and_30%25_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-TZD4uFGgkuc/U5ApZx-8KGI/AAAAAAAAABo/VSJkbhFFnDg/s1600/ISPN_6_fixed_size_and_30%25_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-pCrAYjE-GF4/U5ApZ1CkjXI/AAAAAAAAABs/5FNXfsU-eBc/s1600/ISPN_7_fixed_size_and_30%25_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-pCrAYjE-GF4/U5ApZ1CkjXI/AAAAAAAAABs/5FNXfsU-eBc/s1600/ISPN_7_fixed_size_and_30%25_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p>These charts clearly show the increase in throughput that were made in Infinispan 7. The throughput also seems to scale in an almost linear fashion for this word count scenario. With one node, Infinispan 7 processes the 30% of heap data in about 100 MB/sec, two nodes process almost 200 MB/sec, and 8 nodes process over 700 MB/sec.</p> </div> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_different_heap_size_percentages"><a class="anchor" href="#_from_1_to_8_nodes_using_different_heap_size_percentages"></a>From 1 to 8 nodes using different heap size percentages</h3> <div class="paragraph"> <p>This test executes the word count task using different percentages of heap size as nodes are added to the cluster. (5%, 10%, 15%, 20%, 25%, and 30%) Here are the throughput results for this test:</p> </div> <div class="paragraph"> <p><a href="http://2.bp.blogspot.com/-exDRqNYcquI/U5AqAFGveiI/AAAAAAAAAB4/Yqn0_j6bL-w/s1600/ISPN6_multi_ram_percent_throughput.png"><span class="image"><img src="http://2.bp.blogspot.com/-exDRqNYcquI/U5AqAFGveiI/AAAAAAAAAB4/Yqn0_j6bL-w/s1600/ISPN6_multi_ram_percent_throughput.png" alt="image"></span></a>http://2.bp.blogspot.com/-fqmkYkxZtyI/U5AqS08Xk9I/AAAAAAAAACA/_wsTOmSbkdc/s1600/ISPN7_multi_ram_percent_throughput.png[<span class="image"><img src="http://2.bp.blogspot.com/-fqmkYkxZtyI/U5AqS08Xk9I/AAAAAAAAACA/_wsTOmSbkdc/s1600/ISPN7_multi_ram_percent_throughput.png" alt="image"></span>]</p> </div> <div class="paragraph"> <p>Once again, these charts show an increase in throughput when performing the same word count task using Infinispan 7. The chart for Infinispan 7 shows more fluctuation in the throughput across the different percentages of heap size. The throughput plotted in the Infinispan 6 chart is more consistent.</p> </div> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_different_value_sizes"><a class="anchor" href="#_from_1_to_8_nodes_using_different_value_sizes"></a>From 1 to 8 nodes using different value sizes</h3> <div class="paragraph"> <p>This test executes the word count task using 30% of the heap size and different cache value sizes as nodes are added to the cluster. (1KB, 2KB, 4KB, 8KB, 16KB, 32KB, 64KB, 128KB, 256KB, 512KB, 1MB, and 2MB) Here are the throughput results for this test:</p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-Roq8XeAB9Tw/U48EUKEGezI/AAAAAAAAABQ/tM3VSPv8iik/s1600/ISPN6_multi_value_size_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-Roq8XeAB9Tw/U48EUKEGezI/AAAAAAAAABQ/tM3VSPv8iik/s1600/ISPN6_multi_value_size_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p><a href="http://4.bp.blogspot.com/-GSUDu54xlXg/U48EVvvhcbI/AAAAAAAAABY/bUI1o2YFUpY/s1600/ISPN7_multi_value_size_throughput.png"><span class="image"><img src="http://4.bp.blogspot.com/-GSUDu54xlXg/U48EVvvhcbI/AAAAAAAAABY/bUI1o2YFUpY/s1600/ISPN7_multi_value_size_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p>These results are more interesting. The throughput in Infinispan 7 is higher for certain cache size values, but closer to Infinispan 6 or even slower for other cache size values. The throughput peaks for 32KB cache values, but can be much lower for larger and smaller values. Smaller values require more overhead, but for larger values this behavior is not expected. This result needs to be investigated more closely.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2> <div class="sectionbody"> <div class="paragraph"> <p>The performance tests show that Infinispan 7 Map/Reduce improvements have increased the throughput and execution speed four to sixfold in some use cases. The changes have also allowed Infinispan 7 to process data sets that include larger intermediate results and produce larger final result maps. There are still areas of the Map/Reduce algorithm that need to be improved:</p> </div> <div class="ulist"> <ul> <li> <p>The Map/Reduce algorithm should be self-tuning. The <a href="https://github.com/infinispan/infinispan/blob/master/core/src/main/java/org/infinispan/distexec/mapreduce/MapReduceTask.java#L400">maxCollectorSize</a> parameter controls the number of values that the collector holds in memory, and it is not trivial to determine the optimal value for a given scenario. The value is based on the size of the values in the cache and the size of the intermediate results. A user is likely to know the size of the cache values, but currently <a href="https://issues.jboss.org/browse/ISPN-4318">Infinispan does not report statistics</a> about the intermediate results to the user. The Map/Reduce algorithm should analyze the environment at runtime and adjust the size of the collector dynamically.</p> </li> <li> <p>The fact that the throughput results vary with different value sizes needs to be investigated more closely. This could be due to the fact that the maxCollectorSize value used for these tests is not ideal for all value sizes, but there might be other causes for this behaviour.</p> </li> </ul> </div> </div> </div> </div> <a class="label" href="/blog/tags/radargun/"> radargun </a> <a class="label" href="/blog/tags/benchmarks/"> benchmarks </a> <a class="label" href="/blog/tags/performance/"> performance </a> <a class="label" href="/blog/tags/map reduce/"> map reduce </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <a class="label" href="/blog/tags/6.0/"> 6.0 </a> <hr> <div class="post"></div> <h3> Wednesday, 14 May 2014 </h3> <h1> <a href="/blog/2014/05/14/infinispan-700alpha4-is-out/">Infinispan 7.0.0.Alpha4 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Community,</p> </div> <div class="paragraph"> <p>It is our pleasure to announce the Alpha4 release of Infinispan 7.0.0.</p> </div> <div class="paragraph"> <p>The release highlights are:</p> </div> <div class="ulist"> <ul> <li> <p><strong>HotRod</strong> protocol now supports <strong>authorization</strong> and the <strong>SKIP_CACHE_LOAD</strong> flag;</p> </li> <li> <p><strong>Distributed entry iterator</strong> which allows iterate over all entries in the cluster;</p> </li> <li> <p>Object filtering and preview using query DSL;</p> </li> <li> <p><strong>Apache Lucene 4.8.0</strong> is now supported and JGroups was upgraded to 3.5.0.Beta5;</p> </li> <li> <p>Multiple improvements and bug fixes! </p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324506">release notes</a>. Visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>The Infinispan team.</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/security/"> security </a> <a class="label" href="/blog/tags/hotrod/"> hotrod </a> <a class="label" href="/blog/tags/infinispan/"> infinispan </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Friday, 11 April 2014 </h3> <h1> <a href="/blog/2014/04/11/infinispan-700alpha3-is-out/">Infinispan 7.0.0.Alpha3 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Hi,   The Alpha3 release of Infinispan 7.0.0 is now available.</p> </div> <div class="paragraph"> <p>Highlights:</p> </div> <div class="ulist"> <ul> <li> <p>authorization at both CacheManager and Cache levels</p> </li> <li> <p>some important enhancements for Map/Reduce&#8217;s usability, like the ability to use an intermediate cache during Map/Reduce execution and for storing the final results of the Map/Reduce tasks</p> </li> <li> <p>a much welcomed revamp of the Infinispan embedded configuration which has been aligned to with the server</p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324206">release notes</a>. Visit our <a href="http://www.jboss.org/infinispan/downloads">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://www.jboss.org/infinispan/forums"><span class="s1">forums</span></a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev"><span class="s1">mailing</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan"><span class="s1">IRC</span></a>.</p> </div> <div class="paragraph"> <p>Cheers, Mircea</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/security/"> security </a> <a class="label" href="/blog/tags/infinispan/"> infinispan </a> <a class="label" href="/blog/tags/configuration/"> configuration </a> <a class="label" href="/blog/tags/map reduce/"> map reduce </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="post"></div> <h3> Thursday, 27 March 2014 </h3> <h1> <a href="/blog/2014/03/27/infinispan-700alpha2-release/">Infinispan 7.0.0.Alpha2 release</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Infinispan community,   The Alpha2 release of Infinispan 7.0.0 is now available.</p> </div> <div class="paragraph"> <p>This release brings Cross-Site Replication State Transfer in a stable topology (i.e. no nodes leaving or joining during the state transfer) and several bug fixes.</p> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324205">release notes</a>. Visit our <a href="http://www.jboss.org/infinispan/downloads">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>Note: The LevelDB and Rest Cache Store artifacts published to the Maven repo for this version are broken. Please wait for the next Alpha release if you plan to use them. Sorry for the inconvenience.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://www.jboss.org/infinispan/forums"><span class="s1">forums</span></a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev"><span class="s1">mailing</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan"><span class="s1">IRC</span></a>.</p> </div> </div> </div> </div> <a class="label" href="/blog/tags/alpha/"> alpha </a> <a class="label" href="/blog/tags/cross site replication/"> cross site replication </a> <a class="label" href="/blog/tags/7.0/"> 7.0 </a> <hr> <div class="pagination-links"><a href="/blog/tags/7.0/" class="previous-link">Previous</a> <a href="/blog/tags/7.0/" class="page-link">1</a> <span class="current-page">2</span> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://blog.infinispan.org" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>