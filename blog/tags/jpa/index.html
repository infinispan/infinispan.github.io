<!DOCTYPE html> <html lang="en"> <head> <title> Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script crossorigin="anonymous" src="https://kit.fontawesome.com/4167a38cfa.js"></script> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Friday, 20 October 2017 </h3> <h1> <a href="/blog/2017/10/20/cache-store-batch-operations/">Cache Store Batch Operations</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan 9.1.x introduces batch write and delete operations for cache stores. The introduction of batching should greatly improve performance when utilising write-behind cache stores, using putAll operations and committing transactions in non-transactional stores.</p> </div> <div class="paragraph"> <p>==</p> </div> <div class="paragraph"> <p>==</p> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> <div class="sect1"> <h2 id="_cachewriter_interface_additions"><a class="anchor" href="#_cachewriter_interface_additions"></a>CacheWriter Interface Additions</h2> <div class="sectionbody"> <div class="paragraph"> <p>The CacheWriter interface has been extended so that it exposes two additional methods: deleteBatch and writeBatch.  For the sake of backwards compatibility a default implementation of these methods is provided, however if your cache store is able to utilise batching we strongly recommend you create your  own implementations. The additional methods and docs are show below: </p> </div> <div class="sect2"> <h3 id="_updated_stores"><a class="anchor" href="#_updated_stores"></a>Updated Stores</h3> <div class="paragraph"> <p>Currently the JDBC, JPA, RocksDB and Remote stores have all been modified to take advantage of these latest changes.</p> </div> <div class="paragraph"> <p>==</p> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_configuration_changes"><a class="anchor" href="#_configuration_changes"></a>Configuration Changes</h2> <div class="sectionbody"> <div class="paragraph"> <p>As each store implementations has different batching capabilities, it was necessary to introduce a max-batch-size attribute to the AbstractStoreConfiguration. This attribute defines the maximum number of entries that should be included in a single batch operation to the store. If a value less than one is provided, then the underlying store implementation should not place a upper limit on the number of entries in a batch. </p> </div> <div class="sect2"> <h3 id="_deprecated_attributes"><a class="anchor" href="#_deprecated_attributes"></a>Deprecated Attributes</h3> <div class="paragraph"> <p>Both TableManipulationConfiguration#batchSize and JpaStoreConfiguration#batchSize have been deprecated, as they serve the same purpose as AbstractStoreConfiguration#maxBatchSize.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_store_benchmark"><a class="anchor" href="#_store_benchmark"></a>Store Benchmark</h2> <div class="sectionbody"> <div class="paragraph"> <p>To measure the impact of batch writes on Cache.putAll, we created a <a href="https://github.com/ryanemerson/benchmarks/tree/master/store">simple benchmark</a> to compare the performance of Infinispan 9.1.1.Final (with batching) and 9.0.3.Final (without).  The benchmark consisted of 20 threads inserting 100000 cache entries as fast as possible into a cache via putAll; with each putAll operation containing 20 cache entries and the max-batch-size of each store being set to 20. The table below shows the average time taken for each store type after the benchmark was executed three times.</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 25%;"> <col style="width: 25%;"> <col style="width: 25%;"> <col style="width: 25%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Store Type</th> <th class="tableblock halign-left valign-top">9.0.3.Final</th> <th class="tableblock halign-left valign-top">9.1.1-Final</th> <th class="tableblock halign-left valign-top">Latency Decrease</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">JdbcStringBasedStore</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">29368ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">2597ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">91.12%</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">JPAStore</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">30798ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">16640ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">45.97%</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">RocksDBStore</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">1164ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">209ms</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">82.04%</p></td> </tr> </tbody> </table> <div class="paragraph"> <p>The benchmark results above clearly show that performance is increased dramatically when utilising batch updates at the store level.</p> </div> </div> </div> <div class="sect1"> <h2 id="_conclusions"><a class="anchor" href="#_conclusions"></a>Conclusions</h2> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan 9.1.x introduces batching capabilities to the CacheWriter interface in order to improve performance. If you currently utilise a custom cache store, we strongly recommend that you provide your own implementation of the delete and write batch methods. </p> </div> <div class="paragraph"> <p>If you have any feedback on the CacheWriter changes, or would like to request some new features/optimisations, let us know via the <a href="https://developer.jboss.org/en/infinispan/content">forum</a>, <a href="https://issues.jboss.org/projects/ISPN">issue tracker</a> or the #infinispan channel onhttp://webchat.freenode.net/?channels=%23infinispan[ Freenode].</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 08 December 2016 </h3> <h1> <a href="/blog/2016/12/08/meet-ickle/">Meet Ickle!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div id="docs-internal-guid-04619441-de6b-024f-1a8e-a4977a23b5c6" class="paragraph"> <p>As you’ve already learned from an earlier post this week, Infinispan 9 is on its final approach to landing and is bringing a new query language. Hurray! But wait, was there something wrong with the old one(s)? Not wrong really &#8230;&#8203;  I’ll explain.</p> </div> <div class="paragraph"> <p>Infinispan is a data grid of several query languages. Historically, it has offered search support early in its existence by integrating with Hibernate Search which provides a powerful Java-based DSL enabling you to build Lucene queries and run them on top of your Java domain model living in the data grid. Usage of this integration is confined to embedded mode, but that still succeeds in making Java users happy.</p> </div> <div class="paragraph"> <p>While the Hibernate Search combination is neat and very appealing to Java users it completely leaves non-JVM languages accessing Infinispan via remote protocols out in the cold.</p> </div> <div class="paragraph"> <p>Enter Remote Query. Infinispan 6.0 starts to address the need of searching the grid remotely via Hot Rod. The internals are still built on top of Lucene and Hibernate Search bedrock but these technologies are now hidden behind a new query API, the <a href="https://docs.jboss.org/infinispan/9.0/apidocs/org/infinispan/query/dsl/QueryBuilder.html">QueryBuilder</a>, an internal DSL resembling JPA criteria query. The QueryBuilder has implementations for both embedded mode and Hot Rod. This new API provides all relational operators you can think of, but no full-text search initially, we planned to add that later.</p> </div> <div class="paragraph"> <p>Creating a new internal DSL was fun. However, having a long term strategy for evolving it while keeping complete backward compatibility and also doing so uniformly across implementations in multiple languages proved to be a difficult challenge. So while we were contemplating adding new full-text operators to this DSL we decided on making a long leap forward and adopt a more flexible alternative by having our own string based query language instead, another DSL really, albeit an external one this time.</p> </div> <div class="paragraph"> <p>So after the long ado, let me introduce Ickle, Infinispan’s new query language, conspicuously resembling JP-QL.</p> </div> <div class="paragraph"> <p>Ickle:</p> </div> <div class="paragraph"> <p>is a light and small subset of JP-QL, hence the lovely name</p> </div> <div class="paragraph"> <p>queries Java classes and supports Protocol Buffers too</p> </div> <div class="paragraph"> <p>queries can target a single entity type</p> </div> <div class="paragraph"> <p>queries can filter on properties of embedded objects too, including collections</p> </div> <div class="paragraph"> <p>supports projections, aggregations, sorting, named parameters</p> </div> <div class="paragraph"> <p>supports indexed and non-indexed execution</p> </div> <div class="paragraph"> <p>supports complex boolean expressions</p> </div> <div class="paragraph"> <p>does not support computations in expressions (eg. user.age &gt; sqrt(user.shoeSize + 3) is not allowed but user.age &gt;= 18 is fine)</p> </div> <div class="paragraph"> <p>does not support joins</p> </div> <div class="ulist"> <ul> <li> <p>but, navigations along embedded entities are implicit joins and are allowed</p> </li> <li> <p>joining on embedded collections is allowed</p> </li> <li> <p>other join types not supported</p> </li> </ul> </div> <div class="paragraph"> <p>subqueries are not supported</p> </div> <div class="paragraph"> <p>besides the normal relational operators it offers full-text operators, similar to Lucene’s  query parser</p> </div> <div class="paragraph"> <p>is now supported across various Infinispan APIs, wherever a Query produced by the QueryBuilder is accepted (even for continuous queries or in event filters for listeners!)</p> </div> <div class="paragraph"> <p>That is to say we squeezed JP-QL to the bare minimum and added full-text predicates that closely follow the syntax of <a href="https://lucene.apache.org/core/6_2_1/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package.description">Lucene’s query parser</a>.</p> </div> <div class="paragraph"> <p>If you are familiar with JPA/JP-QL then the following example will speak for itself:</p> </div> <div class="paragraph"> <p>select accountId, sum(amount) from com.acme.Transaction     where amount &lt; 20.0     group by accountId     having sum(amount) &gt; 1000.0     order by accountId</p> </div> <div class="paragraph"> <p>The same query can be written using the QueryBuilder:</p> </div> <div class="paragraph"> <p>Query query = queryFactory.from(Transaction.class) .select(Expression.property("accountId"), Expression.sum("amount")) .having("amount").lt(20.0) .groupBy("accountId") .having(Expression.sum("amount")).gt(1000.0) .orderBy("accountId").build();</p> </div> <div class="paragraph"> <p>Both examples look nice but I hope you will agree the first one is better.</p> </div> <div class="paragraph"> <p>Ickle supports several new predicates for full-text matching that the QueryBuilder is missing. These predicates use the : operator that you are probably familiar from Lucene’s own query language.  This example demonstrates a simple full-text term query:</p> </div> <div class="paragraph"> <p>select transactionId, amount, description from com.acme.Transaction where amount &gt; 10 and description : "coffee"</p> </div> <div class="paragraph"> <p>As you can see, relational predicates and full-text predicates can be combined with boolean operators at will.</p> </div> <div class="paragraph"> <p>The only important thing to remark here is relational predicates are applicable to non-analyzed fields while full-text predicates can be applied to analyzed field only. How does indexing work, what is analysis and how do I turn it on/off for my fields? That’s the topic of a future post, so please be patient or start readinghttps://docs.jboss.org/hibernate/search/5.6/reference/en-US/html_single/#_analysis[ here].</p> </div> <div class="paragraph"> <p>Besides term queries we support several more:</p> </div> <div class="ulist"> <ul> <li> <p>Term                     description : "coffee"</p> </li> <li> <p>Fuzzy                    description : "cofee"~2</p> </li> <li> <p>Range                   amount : [40 to 90}</p> </li> <li> <p>Phrase                  description : "hello world"</p> </li> <li> <p>Proximity               description : "canceling fee"~3</p> </li> <li> <p>Wildcard                description : "te?t"</p> </li> <li> <p>Regexp                 description : /[mb]oat/</p> </li> <li> <p>Boosting                description : "beer"^3 and description : "books"</p> </li> </ul> </div> <div class="paragraph"> <p>You can read all about them starting from <a href="https://lucene.apache.org/core/6_2_1/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package.description">here</a>.</p> </div> <div class="paragraph"> <p>But is Ickle really new? Not really. The name is new, the full-text features are new, but a JP-QL-ish query string was always internally present in the Query objects produced by the QueryBuilder since the beginning of Remote Query. That language was never exposed and specified until now. It evolved significantly over time and now it is ready for you to use it. The QueryBuilder / criteria-like API is still there as a convenience but it might go out of favor over time. It will be limited to non-full-text functionality only. As Ickle grows we’ll probably not be able to include some of the additions in the QueryBuilder in a backward compatible manner. If growing will cause too much pain we might consider deprecating it in favor of Ickle or if there is serious demand for it we might continue to evolve the QueryBuilder in a non compatible manner.</p> </div> <div class="paragraph"> <p>Being a string based query language, Ickle is very convenient for our REST endpoint, the CLI, and the administration console allowing you to quickly inspect the contents of the grid. You’ll be able to use it there pretty soon. We’ll also continue to expand Ickle with more advanced full-text features like spatial queries and faceting, but that’s a subject for another major version. Until then, why not grab the current 9.0 Beta1 and test drive the new query language yourself? We’d love to hear your feedback on thehttps://developer.jboss.org/en/infinispan/content[ forum], on ourhttps://issues.jboss.org/projects/ISPN[ issue tracker] or on IRC on the #infinispan channel onhttp://webchat.freenode.net/?channels=%23infinispan[ Freenode].</p> </div> <div class="paragraph"> <p>Happy coding!</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 01 October 2015 </h3> <h1> <a href="/blog/2015/10/01/hibernate-second-level-cache/">Hibernate Second Level Cache improvements</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan has been implementing <strong>Hibernate Second Level Cache</strong> for a long time, replacing the previous JBoss Cache implementation with very similar logic. The main aim of the implementation has always been to have very fast reads, keeping the overhead of cache during reads on minimum. This was achieved using local reads in invalidation-mode cache and Infinispan&#8217;s <em>putForExternalRead</em> operation, where the request to cache never blocks.</p> </div> <div class="paragraph"> <p>Recently we&#8217;ve looked on the implementation again to see whether we can speed it up even more. For a long time you could use only transactional caches to keep the cache in sync with database. However transactions come at some cost so we thought about a way to get around it. And we have found it, through custom interceptors we have managed to do two-phase updates to the cache and now the non-transactional caches are the default configuration. So, if you&#8217;re using Hibernate with your own configuration, don&#8217;t forget to update that when migrating to Hibernate ORM 5!</p> </div> <div class="paragraph"> <p>With transactions gone, our task was not over. So far entity/collection caching has been implemented for invalidation mode caches, but it&#8217;s tempting to consider replication mode, too. For replicated caches, we got rid of a special cache for <em>pending puts</em> (this local cache detects out-of-date reads, keeping the entity cache consistent). Instead, we used different technique where a logical removal from the cache is substituted by replace with a token called <em>tombstone</em>, and updates pre-invalidate the cache in a similar way. This change opened the possibility for <strong>non-transactional replicated</strong> and <strong>distributed</strong> caches (transactional mode is not supported). We were pleased to see the results of some benchmark where the high hit ratio in replicated caches has dramatically speeded up all operations.</p> </div> <div class="paragraph"> <p>There is one downside of the current implementation - in replication mode, you <strong>should not use eviction</strong>, as eviction cannot tell regular entity (which can be evicted) from the tombstone. If tombstone was evicted, there&#8217;s a risk of inconsistent reads. So when using replicated caches, you should rely on expiration to keep your cache slender. We hope that eventually we&#8217;ll remove this limitation.</p> </div> <div class="paragraph"> <p>All modes described above give us cache without any stale reads. That comes at a cost - each modification (insert, update or removal) requires 2 accesses to the cache (though, sometimes the second access can be asynchronous). Some applications do not require such strict consistency - and that&#8217;s where <em>nonstrict-read-write</em> comes to the scene. Here we guarantee that the cache will provide the same result as DB after the modifying transaction commits - between DB commit and transaction commit a stale value can be provided. If you use asynchronous cache, this may be delayed even more but unless the operation fails (e.g. due to locking timeout) the cache will eventually get into a state consistent with DB. This allows us to limit modifications to single cache access per modification.</p> </div> <div class="paragraph"> <p>Note that <em>nonstrict-read-write</em> mode is supported only for <strong>versioned</strong> entities/collections (that way we can find out which entity is actually newer). Also, you cannot use eviction in nonstrict-read-write mode, for the same reason as in tombstone-based modes. Invalidation cache mode is not supported neither.</p> </div> <div class="paragraph"> <p>If you&#8217;ll try out the most recent Hibernate ORM, you&#8217;ll find out that <strong>Infinispan 7.2.x</strong> is used there. This is because ORM 5.0.0.Final was released before Infinispan 8.0.0.Final went out and we can&#8217;t change the major version of dependency in micro-release. However, we try to keep <strong>Infinispan 8.0.x</strong> binary compatible (in parts used by Hibernate), and therefore you can just replace the dependencies on classpath and use the most recent Infinispan, if you prefer to do so.</p> </div> <div class="paragraph"> <p>To sum things up, here is the table of supported configurations:</p> </div> <div class="paragraph"> <p>Concurrency strategy</p> </div> <div class="paragraph"> <p>Cache transactions</p> </div> <div class="paragraph"> <p>Cache mode</p> </div> <div class="paragraph"> <p>Implementation</p> </div> <div class="paragraph"> <p>Eviction</p> </div> <div class="paragraph"> <p>transactional</p> </div> <div class="paragraph"> <p>transactional</p> </div> <div class="paragraph"> <p>invalidation</p> </div> <div class="paragraph"> <p>pending puts</p> </div> <div class="paragraph"> <p>yes</p> </div> <div class="paragraph"> <p>read-write</p> </div> <div class="paragraph"> <p>non-transactional</p> </div> <div class="paragraph"> <p>non-transactional</p> </div> <div class="paragraph"> <p>replicated/distributed</p> </div> <div class="paragraph"> <p>tombstones</p> </div> <div class="paragraph"> <p>no</p> </div> <div class="paragraph"> <p>nonstrict-read-write</p> </div> <div class="paragraph"> <p>versioned entries</p> </div> <div class="paragraph"> <p>There&#8217;s also the <em>read-only</em> mode - this can be used instead of both <em>transactional</em> or <em>read-write</em> modes, but at this point it does not offer any further performance gains, since we have to make sure that you don&#8217;t see a removed value. Actually, it also does not matter whether you specify transactional or read-write mode; the proper strategy will be picked according to your cache configuration (transactional vs. non-transactional).</p> </div> <div class="paragraph"> <p>We hope that you&#8217;ll try these new modes and many consistency fixes included along (you should use Hibernate ORM <strong>5.0.2.Final</strong> or later), and tell us about your experience.</p> </div> <div class="paragraph"> <p>Happy caching!</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 30 May 2013 </h3> <h1> <a href="/blog/2013/05/30/infinispan-530cr1-is-out/">Infinispan 5.3.0.CR1 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Besides a handful of fixes, this release contains two very important contributions:</p> </div> <div class="ulist"> <ul> <li> <p>a <a href="http://www.mongodb.org/">mongoDB</a> cache store which allows using Infinispan  as a cache on top of a mongodb instance. Courtesy of  <a href="http://fr.linkedin.com/in/guillaumescheibel">Guillaume Scheibel</a></p> </li> <li> <p>a <a href="http://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html">JPA</a> based cache store that allows an easy setup for Infinispan as a cache in front of a database. Courtesy of <a href="http://www.linkedin.com/in/rayjtsang">Ray Tsang</a></p> </li> </ul> </div> <div class="paragraph"> <p>Please stay tuned for blogs detailing these features.</p> </div> <div class="paragraph"> <p>For a complete list of features included in this release refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12321180">release notes</a>.</p> </div> <div class="paragraph"> <p>Visit our <a href="http://www.jboss.org/infinispan/downloads">downloads</a> section to find the latest release and if you have any questions please check our <a href="http://www.jboss.org/infinispan/forums">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Mircea</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Friday, 17 June 2011 </h3> <h1> <a href="/blog/2011/06/17/so-you-want-jpa-like-access-to/">So you want JPA-like access to Infinispan?</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Back in the early days of Infinispan (since our first public announcement, in fact) we always had it in mind to expose a <a href="http://en.wikibooks.org/wiki/Java_Persistence/What_is_JPA%3F">JPA</a>-like layer to Infinispan.  Initially this was as a replacement to the fine-grained replication that <a href="http://www.jboss.org/jbosscache">JBoss Cache</a>'s <a href="http://docs.jboss.org/jbosscache/2.0.0.GA/PojoCache/en/html_single/index.html#intro">POJO Cache</a> variant offered, but it grew beyond just a technique to do fine-grained replication on complex object graphs.  The fact that it offered a familiar data storage API to Java developers was big.  Huge, in fact.</p> </div> <div class="paragraph"> <p><a href="http://upload.wikimedia.org/wikibooks/en/d/d1/Java-persistence.PNG"><span class="image"><img src="http://upload.wikimedia.org/wikibooks/en/d/d1/Java-persistence.PNG" alt="image" width="320" height="140"></span></a></p> </div> <div class="paragraph"> <p>So we realised JPA-on-Infinispan was firmly on the roadmap.  The original plan was to implement the entire set of JPA APIs from scratch, but this was a daunting and Herculean task.  After much discussion with core Hibernate architects and Infinispan contributors Emmanuel Bernard and Sanne Grinovero, we came to a decision that rather than implementing all this from scratch, it served both Infinispan and the community better to fork Hibernate&#8217;s core <a href="http://www.hibernate.org/about/orm">ORM</a> engine, and replace the relational database mappings with key/value store mappings.  And we get to reuse the mature codebase of Hibernate&#8217;s session and transaction management, object graph dehydration code, proxies, etc.</p> </div> <div class="paragraph"> <p>And Hibernate OGM (Object-Grid Mapping) was born.  After initial experiments and even a large-scale public demo at the <a href="http://www.jboss.org/jbw2011keynote">JBoss World 2011 Keynote</a>, Emmanuel has officially <a href="http://in.relation.to/Bloggers/HibernateOGMBirthAnnouncement">blogged</a> about the launch of Hibernate OGM.  Very exciting times, Infinispan now has a JPA-like layer.  :-)</p> </div> <div class="paragraph"> <p>To reiterate a key point from Emmanuel&#8217;s blog, Hibernate OGM is still in its infancy.  It needs community participation to help it grow up and mature.  This is where the Infinispan community should step in; consider Hibernate OGM as Infinispan&#8217;s JPA-like layer and get involved.  For more details, please read Emmanuel&#8217;s <a href="http://in.relation.to/Bloggers/HibernateOGMBirthAnnouncement">announcement</a>.</p> </div> <div class="paragraph"> <p>Enjoy! Manik</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Tuesday, 07 June 2011 </h3> <h1> <a href="/blog/2011/06/07/faster-infinispan-based-second-level/">Faster Infinispan-based Second Level Cache coming to a JPA app near you!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Starting with Hibernate 4.0.0.Beta1, Infinispan second level cache interacts with the transaction manager as a JTA Synchronization instead of an XA resource. Based on some testing we&#8217;ve done in JBoss AS 7, this has resulted in a huge performance increase <a href="http://community.jboss.org/wiki/InfinispanTransactions#Enlisting_Synchronization">thanks to the optimisations the transaction manager can apply</a> to Synchronizations, which work very well when Infinispan is used as a cache rather than as a authoritative data store.</p> </div> <div class="paragraph"> <p>From an Infinispan configuration perspective, nothing needs changing. The Infinispan provider still uses the same <a href="https://github.com/hibernate/hibernate-core/blob/master/hibernate-infinispan/src/main/resources/org/hibernate/cache/infinispan/builder/infinispan-configs.xml">base configuration</a> by default. Transactional configuration happens within the cache provider itself and it&#8217;s here where the Infinispan is configured with Hibernate&#8217;s transaction manager and where Infinispan is configured to participate as a JTA synchronization. This is the default configuration, so from an user perspective, there&#8217;s nothing you have to do to take advantage of this new change.</p> </div> <div class="paragraph"> <p>However, you can always switch back to previous behaviour where Infinispan interacted as an XA resource via a dedicated Hibernate property called <em>hibernate.cache.infinispan.use_synchronization</em></p> </div> <div class="paragraph"> <p>_ _</p> </div> <div class="paragraph"> <p>By default this property is set to <em>true</em>. If you set it <em>false</em>, Infinispan will interact with the transaction manager as an XA resource.</p> </div> <div class="paragraph"> <p>For more detailed information, check the "http://community.jboss.org/docs/DOC-14105[Using Infinispan As JPA Hibernate Second Level Cache Provider]" wiki.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Galder</p> </div> </div> </div> </div> <hr> <div class="pagination-links"><span class="current-page">1</span> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://blog.infinispan.org" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>