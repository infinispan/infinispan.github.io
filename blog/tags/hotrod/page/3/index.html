<!DOCTYPE html> <html lang="en"> <head> <title>Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Wednesday, 14 May 2014 </h3> <h1> <a href="/blog/2014/05/14/infinispan-700alpha4-is-out/">Infinispan 7.0.0.Alpha4 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Community,</p> </div> <div class="paragraph"> <p>It is our pleasure to announce the Alpha4 release of Infinispan 7.0.0.</p> </div> <div class="paragraph"> <p>The release highlights are:</p> </div> <div class="ulist"> <ul> <li> <p><strong>HotRod</strong> protocol now supports <strong>authorization</strong> and the <strong>SKIP_CACHE_LOAD</strong> flag;</p> </li> <li> <p><strong>Distributed entry iterator</strong> which allows iterate over all entries in the cluster;</p> </li> <li> <p>Object filtering and preview using query DSL;</p> </li> <li> <p><strong>Apache Lucene 4.8.0</strong> is now supported and JGroups was upgraded to 3.5.0.Beta5;</p> </li> <li> <p>Multiple improvements and bug fixes! </p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features and bug fixes included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12324506">release notes</a>. Visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release.</p> </div> <div class="paragraph"> <p>If you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>The Infinispan team.</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 06 March 2014 </h3> <h1> <a href="/blog/2014/03/06/hotrod-client-in-osgi/">HotRod client in OSGi</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan 7.0.0.Alpha1 makes it possible to easily run the HotRod client in an OSGi based container such as Karaf. Until this point there was no easy way to find out which libraries were required for the HotRod client to run in OSGi. These libraries then had to be installed manually and dynamic imports enabled for all the libraries. Last but not least, it was not possible to use the latest HotRod feature - remote queries.</p> </div> <div class="paragraph"> <p>The 7.0.0.Alpha1 introduces a "features" file which not only lists all dependencies required for correct functionality of the HotRod client in OSGi, but also makes it very easy to install the whole feature into Karaf (version 2.3.3 or 3.0) in just a few steps.</p> </div> </div> </div> <div class="sect1"> <h2 id="_hotrod_client_feature_file_for_osgi"><a class="anchor" href="#_hotrod_client_feature_file_for_osgi"></a>HotRod client feature file for OSGi</h2> <div class="sectionbody"> <div class="paragraph"> <p>The feature file has been deployed into JBoss Nexus repository so it&#8217;s publicly available. It looks like this:</p> </div> </div> </div> <div class="sect1"> <h2 id="_installing_the_hotrod_client_feature_in_karaf"><a class="anchor" href="#_installing_the_hotrod_client_feature_in_karaf"></a>Installing the HotRod client feature in Karaf</h2> <div class="sectionbody"> <div class="paragraph"> <p>The HotRod feature (either a simple HotRod client or HotRod client with remote query capabilities) can be installed in Karaf in the following steps:</p> </div> <div class="paragraph"> <p>There&#8217;s still one limitation with respect to remote querying, though. The remote query feauture requires a JMX-based connection to Infinispan server in order to be able to register a .protobin file, which holds the description of data types being transferred between the client and server. Since a remoting-jmx protocol is required and the existing remoting-jmx client does not work correctly in OSGi (see <a href="https://issues.jboss.org/browse/ISPN-4011" class="bare">https://issues.jboss.org/browse/ISPN-4011</a>), it is required to register the .protobin file in another way - not from inside the OSGi container. This will be fixed in one of the next releases.</p> </div> <div class="paragraph"> <p>Stay connected for news about running the whole Infinispan datagrid in OSGi, not only the HotRod client. This is work in progress.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Martin</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Wednesday, 05 March 2014 </h3> <h1> <a href="/blog/2014/03/05/infinispan-hotrod-c-client-700alpha1/">Infinispan HotRod C# Client 7.0.0.Alpha1 release</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan HotRod C# Client 7.0.0.Alpha1 is now available. This new version is a C# wrapper over the native client and brings support for L2 and L3 client intelligence levels in addition to L1. As more features are added to the native client they will make their way into the C# client as well.</p> </div> <div class="paragraph"> <p>You can find the the .msi installer on the <a href="http://infinispan.org/hotrod-clients/">download</a> page and the <a href="https://github.com/infinispan/dotnet-client/">source code</a> on GitHub. Please give it a try and let us know what you think.</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Monday, 13 January 2014 </h3> <h1> <a href="/blog/2014/01/13/a-new-quick-start-guide-for-remote/">A new quick start guide for remote queries over Hot Rod</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Following up on the previous post on <a href="http://blog.infinispan.org/2013/09/embedded-and-remote-queries-in.html">Infinispan remote queries</a>, we&#8217;ve prepared a quick start guide to get you up and running with remote queries in minutes.</p> </div> <div class="paragraph"> <p>It&#8217;s a simple Java application that places some data in a remote cache and then retrieves it using queries over Hot Rod. On top of that, the project also contains a C companion app contributed by https://github.com/isavin[Ion Savin] that uses the https://github.com/infinispan/cpp-client/[C Hot Rod client] and is able to read and write (but not query, yet) the same data, demonstrating interoperability between C and Java clients. At this point the Protobuf encoding support comes in a few C external helper classes rather than being part of the C++ client, but this is going to improve in the upcoming versions.   The code for this app is hosted on <a href="https://github.com/jboss-developer/jboss-jdg-quickstarts/tree/master/remote-query">Github</a> under the <a href="https://github.com/jboss-developer/jboss-jdg-quickstarts">jboss-jdg-quickstarts</a> project. Please note this tutorial was written for the JBoss Data Grid (JDG), but it applies to Infinispan as well. We welcome you to try it and let us know what you think!</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Tuesday, 19 November 2013 </h3> <h1> <a href="/blog/2013/11/19/infinispan-600final-is-out/">Infinispan 6.0.0.Final is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div id="docs-internal-guid-54debdf5-71e3-c43d-f1fc-150a34a883db" class="paragraph"> <p>Dear Infinispan community,</p> </div> <div class="paragraph"> <p>We&#8217;re pleased to announce the final release of Infinispan 6.0 "Infinium". As <a href="http://infinispan.blogspot.co.uk/2013/05/infinispan-to-adopt-apache-software.html">announced</a>, this is the first Infinispan stable version to be released under the terms of <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License v2.0</a>.</p> </div> <div class="paragraph"> <p>This release brings some highly demanded features besides many stability enhancements and bug fixes:</p> </div> <div class="ulist"> <ul> <li> <p>Support for <a href="http://blog.infinispan.org/2013/09/embedded-and-remote-query-in-infinispan.html">remote query</a>. It is now possible for the HotRod clients to query an Infinispan grid using a new expressive query DSL. This querying functionality is built on top of Apache Lucene and Google Protobuf and lays the foundation for storing information and querying an Infinispan server in a language neutral manner. The Java HotRod client has already been enhanced to support this, the soon-to-be announced C++ HotRod client will also contain this functionality (initially for write/read, then full blown querying).</p> </li> <li> <p>C HotRod client.  Allows C applications to read and write information from an Infinispan server. This is a fully fledged HotRod client that is topology (level 2) and consistent hash aware (level 3) and will be released in the following days. Some features (such as Remote Query and SSL support) will be developed during the next iteration so that it maintains feature parity with its Java counterpart.</p> </li> <li> <p>Better persistence integration. We’ve revisited the entire cache loader API and we’re quite pleased with the result: the new <a href="http://blog.infinispan.org/2013/09/new-persistence-api-in-infinispan.html">Persistence API</a> brought by Infinispan 6.0 supports parallel iteration of the stored entries, reduces the overall serialization overhead and also is aligned with the <a href="http://jcp.org/en/jsr/detail?id=107">JSR-107</a> specification, which makes implementations more portable.</p> </li> <li> <p>A more efficient FileCacheStore <a href="http://blog.infinispan.org/2013/07/faster-file-cache-store-no-extra.html">implementation</a>. This file store is built with efficiency in mind: it outperforms the existing file store with up to 2 levels of magnitude. This comes at a cost though, as keys need to be kept  in memory. Thanks to <a href="https://github.com/kblees">Karsten Blees</a> for contributing this!</p> </li> <li> <p>Support for <a href="http://blog.infinispan.org/2013/09/heterogenous-clusters-with-infinispan.html">heterogeneous clusters</a>. Up to this release, every member of the cluster owns an equal share of the cluster’s data. This doesn’t work well if one machine is more powerful than the other cluster participants. This functionality allows specifying the amount of data, compared with the average, held by a particular machine.</p> </li> <li> <p>A new set of usage and performance <a href="https://issues.jboss.org/browse/ISPN-2861">statistics</a> developed within the scope of the CloudTM projecthttps://issues.jboss.org/browse/ISPN-3234[].</p> </li> <li> <p><a href="https://issues.jboss.org/browse/ISPN-3234">JCache</a> (JSR-107) implementation upgrade. First released in Infinispan 5.3.0, the standard caching support is now upgraded to version 1.0.0-PFD.</p> </li> </ul> </div> <div class="paragraph"> <p>For a complete list of features included in this release please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12322480">release notes</a>.</p> </div> <div class="paragraph"> <p>The user documentation for this release has been revamped and migrated to the <a href="http://infinispan.org/documentation/">new website</a> - we think it looks much better and hope you’ll like it too!</p> </div> <div class="paragraph"> <p>This release has spread over a period of 5 months: a sustained effort from the core development team, QE team and our growing community - a BIG thanks to everybody involved! Please visit our <a href="http://infinispan.org/download/">downloads</a> section to find the latest release. Also if you have any questions please check our <a href="http://infinispan.org/community/">forums</a>, our <a href="https://lists.jboss.org/mailman/listinfo/infinispan-dev">mailing lists</a> or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Adrian</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 26 September 2013 </h3> <h1> <a href="/blog/2013/09/26/embedded-and-remote-queries-in/"> Embedded and remote queries in Infinispan 6.0.0.Beta1</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>If you&#8217;re following Infinispan&#8217;s mailing lists you&#8217;ve probably caught a glimpse of the new developments in the Query land: a new DSL, remote querying via Hot Rod client, a new marshaller based on Google&#8217;s Protobuf. Time to unveil these properly!</p> </div> <div class="exampleblock"> <div class="content"> <div class="paragraph"> <p>==== The new Query DSL</p> </div> </div> </div> <div class="paragraph"> <p>Starting with version 6.0 Infinispan offers a new (experimental) way of running queries against your cached entities based on a simple filtering DSL. The aim of the new DSL is to simplify the way you write queries and to be agnostic of the underlying query mechanism(s) making it possible to provide alternative query engines in the future besides Lucene and still being able to use the same query language/API. The previous Hibernate Search &amp; Lucene based <a href="https://docs.jboss.org/author/display/ISPN/Querying+Infinispan">approach</a> is still in place and will continue to be supported and in fact the new DSL is currently implemented right on top of it. The future will surely bring index-less searching based on map-reduce and possibly other new cool search technologies.</p> </div> <div class="paragraph"> <p>Running DSL-based queries in embedded mode is almost identical to running the existing Lucene-based queries. All you need to do is have infinispan-query-dsl.jar and infinispan-query.jar in your classpath (besides Infinispan and its dependecies), enable indexing for your caches, annotate your POJO cache values and your&#8217;re ready.</p> </div> <div class="paragraph"> <p>__</p> </div> <div class="literalblock"> <div class="content"> <pre>ConfigurationBuilder cfg = new ConfigurationBuilder();&#x000A;  cfg.indexing().enable();&#x000A;  &#x000A;  DefaultCacheManager cacheManager = new DefaultCacheManager(cfg.build());&#x000A;  &#x000A;  Cache cache = cacheManager.getCache();</pre> </div> </div> <div class="paragraph"> <p>____Alternatively, indexing (and everything else) can also be configured via XML configuration, as already described in the user guide, so we&#8217;ll not delve into details here.</p> </div> <div class="paragraph"> <p>Your Hibernate Search annotated entity might look like this.</p> </div> <div class="paragraph"> <p>__</p> </div> <div class="literalblock"> <div class="content"> <pre>import org.hibernate.search.annotations.*;&#x000A;  ...&#x000A;  &#x000A;  @Indexed&#x000A;  public class User {&#x000A;  &#x000A;      @Field(store = Store.YES, analyze = Analyze.NO)&#x000A;      private String name;&#x000A;  &#x000A;      @Field(store = Store.YES, analyze = Analyze.NO, indexNullAs = Field.DEFAULT_NULL_TOKEN)&#x000A;      private String surname;&#x000A;  &#x000A;      @IndexedEmbedded(indexNullAs = Field.DEFAULT_NULL_TOKEN)&#x000A;      private List addresses;&#x000A;  &#x000A;      // .. the rest omitted for brevity&#x000A;  }</pre> </div> </div> <div class="paragraph"> <p><em>___Running a DSL based query involves obtaining a _https://github.com/infinispan/infinispan/blob/6.0.0.Beta1/query-dsl/src/main/java/org/infinispan/query/dsl/QueryFactory.java[QueryFactory]</em> from the (cache scoped) <em>SearchManager</em> and then constructing the query as follows:</p> </div> <div class="paragraph"> <p>__</p> </div> <div class="literalblock"> <div class="content"> <pre>import org.infinispan.query.Search;&#x000A;  import org.infinispan.query.dsl.QueryFactory;&#x000A;  import org.infinispan.query.dsl.Query;&#x000A;  ...&#x000A;  &#x000A;  QueryFactory qf = Search.getSearchManager(cache).getQueryFactory();&#x000A;  &#x000A;  Query q = qf.from(User.class)&#x000A;      .having("name").eq("John")&#x000A;      .toBuilder().build();&#x000A;  &#x000A;  List list = q.list();&#x000A;  &#x000A;  assertEquals(1, list.size());&#x000A;  assertEquals("John", list.get(0).getName());&#x000A;  assertEquals("Doe", list.get(0).getSurname());</pre> </div> </div> <div class="paragraph"> <p><em>___That&#8217;s it! I&#8217;m sure this raised your curiosity as to what the DSL is actually capable of so you might want to look at the list of supported filter operators in _https://github.com/infinispan/infinispan/blob/6.0.0.Beta1/query-dsl/src/main/java/org/infinispan/query/dsl/FilterConditionEndContext.java[FilterConditionEndContext]</em>. Combining multiple conditions with boolean operators, including sub-conditions, is also possible:</p> </div> <div class="literalblock"> <div class="content"> <pre>Query q = qf.from(User.class)&#x000A;      .having("name").eq("John")&#x000A;      .and().having("surname").eq("Doe")&#x000A;      .and().not(qf.having("address.street").like("%Tanzania%").or().having("address.postCode").in("TZ13", "TZ22"))&#x000A;      .toBuilder().build();</pre> </div> </div> <div class="paragraph"> <p>The DSL is pretty nifty right now and will surely be expanded in the future based on your feedback. It also provides support for result pagination, sorting, projections, embedded objects, all demonstrated in <em><a href="https://github.com/infinispan/infinispan/blob/6.0.0.Beta1/query/src/test/java/org/infinispan/query/dsl/embedded/QueryDslConditionsTest.java">QueryDslConditionsTest</a></em> which I encourage you to look at until the proper user guide is published. Still, this is not a relational database, so keep in mind that all queries are written in the scope of the <em>single</em> targeted entity (and its embedded entities). There are no joins (yet), no correlated subqueries, no grouping or aggregations.</p> </div> <div class="paragraph"> <p>Moving further, probably the most exciting thing about the new DSL is using it remotely via the Hot Rod client. But to make this leap we first had to adopt a common format for storing our cache entries and marshalling them over the wire that would also be cross-language and robust enough to support evolving object schemas. But probably most of all, this format had to have a schema rather than just being an opaque blob otherwise indexing and searching are meaningless. Enter Protocol Buffers.</p> </div> </div> </div> <div class="sect3"> <h4 id="_the_protobuf_marshaller"><a class="anchor" href="#_the_protobuf_marshaller"></a>The Protobuf marshaller</h4> <div class="paragraph"> <p>Configuring the <em>RemoteCacheManager</em> of the Java Hot Rod client to use it is straight forward: __</p> </div> <div class="literalblock"> <div class="content"> <pre>import org.infinispan.client.hotrod.configuration.ConfigurationBuilder;&#x000A;  ...&#x000A;  &#x000A;  ConfigurationBuilder clientBuilder = new ConfigurationBuilder();&#x000A;  clientBuilder.addServer()&#x000A;      .host("127.0.0.1").port(11234)&#x000A;      .marshaller(new ProtoStreamMarshaller());</pre> </div> </div> <div class="paragraph"> <p><em>___Now you&#8217;ll be able to store and get from the remote cache your _User</em> instaces encoded in protobuf format provided that:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>a Protobuf type was declared for your entity in a <em>.proto</em> <a href="https://github.com/infinispan/protostream/blob/1.0.0.Alpha6/sample-domain-definition/src/main/resources/bank.proto">file</a> which was then compiled into a <em>.protobin</em> <a href="https://developers.google.com/protocol-buffers/docs/techniques?hl=ro#self-description">binary descriptor</a></p> </li> <li> <p>the binary descriptor was registered with your <em>RemoteCacheManager</em>'s <em>ProtoStreamMarshaller</em> instance like this: __</p> </li> </ol> </div> <div class="literalblock"> <div class="content"> <pre>ProtoStreamMarshaller.getSerializationContext(remoteCacheManager)&#x000A;      .registerProtofile("my-test-schema.protobin");</pre> </div> </div> <div class="paragraph"> <p><em>__3. a per-entity marshaller was registered: </em></p> </div> <div class="literalblock"> <div class="content"> <pre>ProtoStreamMarshaller.getSerializationContext(remoteCacheManager)&#x000A;      .registerMarshaller(User.class, new UserMarshaller());</pre> </div> </div> <div class="paragraph"> <p><em>___Steps 2 and 3 are closely tied to the way <a href="https://github.com/infinispan/protostream">Protosteam</a> library works, which is pretty straight forward but cannot be detailed here. Having a look at our <a href="https://github.com/infinispan/protostream/blob/1.0.0.Alpha6/sample-domain-implementation/src/main/java/org/infinispan/protostream/sampledomain/marshallers/UserMarshaller.java">_UserMarshaller</em></a> sample should clear this up.</p> </div> <div class="paragraph"> <p>Keeping your objects stored in protobuf format has the benefit of being able to consume them with compatible clients written in other languages. But if this does not sound enticing enough probably the fact they can now be easily indexed should be more appealing.</p> </div> </div> <div class="sect3"> <h4 id="_remote_querying_via_the_hot_rod_client"><a class="anchor" href="#_remote_querying_via_the_hot_rod_client"></a>Remote querying via the Hot Rod client</h4> <div class="paragraph"> <p>Given a <em>RemoteCacheManager</em> configured as previously described the next steps to enable remote query over its caches are:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>add the DSL jar to client&#8217;s classpath, infinispan-remote-query-server.jar to server&#8217;s classpath and infinispan-remote-query-client.jar to both</p> </li> <li> <p>enable indexing in your cache configuration - same as for embedded mode</p> </li> <li> <p>register your protobuf binary descriptor by invoking the '<em>registerProtofile</em>' method of the server&#8217;s <em>ProtobufMetadataManager</em> MBean (one instance per <em>EmbeddedCacheManager</em>)</p> </li> </ol> </div> <div class="paragraph"> <p>All data placed in cache now is being indexed without the need to annotate your entities for Hibernate Search. In fact these classes are only meaningful to the Java client and do not even exist on the server.</p> </div> <div class="paragraph"> <p>Running the queries over the Hot Rod client is now very similar to embedded mode. The DSL is in fact the same. The only part that is slightly different is how you obtain the <em>QueryFactory</em>:</p> </div> <div class="paragraph"> <p>__</p> </div> <div class="literalblock"> <div class="content"> <pre>import org.infinispan.client.hotrod.Search;&#x000A;  import org.infinispan.query.dsl.QueryFactory;&#x000A;  import org.infinispan.query.dsl.Query;&#x000A;  ...&#x000A;  &#x000A;  remoteCache.put(2, new User("John", "Doe", 33));&#x000A;  &#x000A;  QueryFactory qf = Search.getQueryFactory(remoteCache);&#x000A;  &#x000A;  Query query = qf.from(User.class)&#x000A;      .having("name").eq("John")&#x000A;      .toBuilder().build();&#x000A;  &#x000A;  List list = query.list();&#x000A;  assertEquals(1, list.size());&#x000A;  assertEquals("John", list.get(0).getName());&#x000A;  assertEquals("Doe", list.get(0).getSurname());</pre> </div> </div> <div class="paragraph"> <p>__</p> </div> <div class="paragraph"> <p><em> </em> </p> </div> <div class="paragraph"> <p>Voila! The end of our journey for today! Stay tuned, keep an eye on Infinispan Query and please share your comments with us.</p> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 23 May 2013 </h3> <h1> <a href="/blog/2013/05/23/interoperability-between-embedded-and/">Interoperability between Embedded and Server Endpoints is here!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>As mentioned by Mircea in the <a href="http://infinispan.blogspot.com.es/2013/05/infinispan-530beta2-is-out.html">Infinispan 5.3.0.Beta2 release blog post</a>, interoperability between embedded Infinispan and remote Infinispan modes, including Hot Rod, Memcached and REST is now here!</p> </div> <div class="paragraph"> <p>What this means is that you should be able to store data via one of the endpoints and retrieve data from a different one. So, I can store an Java object using the Java Hot Rod client, and I can retrieve it using the embedded interface.</p> </div> <div class="paragraph"> <p>Documentation for this new interoperability, or compatibility mode, can be found <a href="https://docs.jboss.org/author/x/kYH2Aw">here</a>, including the key aspects of this new functionality, configuration and links to some examples.</p> </div> <div class="paragraph"> <p>As we head towards the later part of the Infinispan 5.3 series, if you&#8217;re interested in accessing data in multiple ways, give it a go and let us know what you think!</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Saturday, 19 January 2013 </h3> <h1> <a href="/blog/2013/01/19/infinispan-520cr2-is-out/">Infinispan 5.2.0.CR2 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Infinispan users,</p> </div> <div class="paragraph"> <p>This is hopefully the last CR release of the long expected infinispan 5.2 series. It contains some final touches and bug fixes, especially around the new non-blocking state transfer functionality but also a <a href="https://issues.jboss.org/browse/ISPN-2656">very useful enhancement</a> to the HotRod protocol (and the Java client) which allows users to fetch the list of keys existing in the cluster - a big thanks to <a href="http://www.linkedin.com/in/rayjtsang">Ray Tsang</a> for contributing this feature! For the complete list of features please refer to the <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12320896">release notes</a>. You can <a href="http://www.jboss.org/infinispan/downloads">download</a> the distribution or the <a href="https://repository.jboss.org/nexus/content/repositories/releases/org/infinispan/">maven artifact</a>. If you have any questions please check our <a href="http://www.jboss.org/infinispan/forums">forums</a>, our mailing lists or ping us directly on <a href="irc://irc.freenode.org/infinispan">IRC</a>!</p> </div> <div class="paragraph"> <p>Cheers, Mircea</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Thursday, 30 August 2012 </h3> <h1> <a href="/blog/2012/08/30/hotrod-c-client-beta1-is-out/">HotRod C# client Beta1 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Thanks to a sustained effort from  <a href="http://twitter.com/sunimalr">Sunimal Rathnayake</a>, the C# HotRod client has evolved quite a bit:</p> </div> <div class="ulist"> <ul> <li> <p>the public API was polished and finalized</p> </li> <li> <p>the client was upgraded to 2nd level of intelligence: that means that it can automatically piggyback cluster&#8217;s topology information from the servers. E.g. if a new server is added, the client is made aware of it and can start balancing requests towards that server</p> </li> <li> <p>a pluggable load balancing policy was added (defaults to round robin) </p> </li> <li> <p>various other bug fixes backed by an growing test suite</p> </li> </ul> </div> <div class="paragraph"> <p>We&#8217;ve also set up <a href="https://community.jboss.org/wiki/HotRodCClientDevelopmentSetup">a development setupiv document</a> to speed you up in case you want to take a look at the code or contribute. </p> </div> <div class="paragraph"> <p>You can download it from <a href="https://github.com/infinispan/dotnet-client/downloads">here</a> - please give it a try and don&#8217;t hesitate to post your comments to our <a href="http://www.jboss.org/infinispan/mailinglists">forums</a>, <a href="http://www.jboss.org/infinispan/mailinglists">the mailing list</a>  or <a href="irc://irc.freenode.org/infinispan">contact us directly on IRC</a> for a chat!</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Mircea</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Tuesday, 31 July 2012 </h3> <h1> <a href="/blog/2012/07/31/c-client-for-infinispan-alpha-release/">C# client for Infinispan - alpha release</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>A while ago I was <a href="http://infinispan.blogspot.co.uk/search/label/gsoc">announcing</a> that <a href="http://twitter.com/sunimalr">Sunimal Rathnayake</a> would start the work for a C# Hot Rod  client for Infinispan as part of the <a href="http://code.google.com/soc/">Google Summer of Code</a>. After 2 months of heavy work Sunimal delivered an intelligence-one (basic client, interested in neither cluster nor hash information) implementation. The release distribution can be downloaded from <a href="https://github.com/infinispan/dotnet-client/downloads">here</a>. Besides the required binaries and doclets, is also contains a sample application showing how the client can be configured and illustrating the basic operations with the server. This and more are being described in the readme.txt file in the distribution root.</p> </div> <div class="paragraph"> <p>And there&#8217;s much more on the way! Sunimal is working on enhancing the client to the intelligence-two level: topology-aware client, interested in cluster information - stay tuned!</p> </div> <div class="paragraph"> <p>Please give it a try and don&#8217;t hesitate to post your comments to our <a href="https://community.jboss.org/en/infinispan?view=discussions">forums</a>, the <a href="http://www.jboss.org/infinispan/mailinglists">mailing list </a> or <a href="irc://irc.freenode.org/infinispan">contact us directly on IRC</a> for a chat!</p> </div> <div class="paragraph"> <p>Cheers, Mircea</p> </div> </div> </div> </div> <hr> <div class="pagination-links"><a href="/blog/tags/hotrod/page/2/" class="previous-link">Previous</a> <a href="/blog/tags/hotrod/" class="page-link">1</a> <a href="/blog/tags/hotrod/page/2/" class="page-link">2</a> <span class="current-page">3</span> <a href="/blog/tags/hotrod/page/4/" class="page-link">4</a> <a href="/blog/tags/hotrod/page/4/" class="next-link">Next</a> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://blog.infinispan.org" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>