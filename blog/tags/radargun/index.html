<!DOCTYPE html> <html lang="en"> <head> <title> Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script crossorigin="anonymous" src="https://kit.fontawesome.com/4167a38cfa.js"></script> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <link href="/feed.atom" rel="alternate" type="application/atom+xml"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Wednesday, 05 August 2015 </h3> <h1> <a href="/blog/2015/08/05/radargun-2/"></a> </h1> <div class="content"> <div class="sect2"> <h3 id="_radargun_2_1_0_final"><a class="anchor" href="#_radargun_2_1_0_final"></a><span class="underline">RadarGun 2.1.0.Final</span></h3> <div class="paragraph"> <p>I&#8217;m happy to announce RadarGun 2.1.0.Final is officialy out. RadarGun is a multi purpose testing tool, which provides means to measure performance and test features specific to distributed systems (data grids, caches in particular).  </p> </div> <div class="paragraph"> <p>The release contains multiple fixes and improvements listed below:</p> </div> <div class="ulist"> <ul> <li> <p>New plugins: jdg65, infinispan71, infinispan72, infinispan80, jcache</p> </li> <li> <p>Reporting improvements (perfrepo reporter, percentile chart, net/gross throughput)</p> </li> <li> <p>GaussianKeySelector</p> </li> <li> <p>Enhanced listener support</p> </li> <li> <p>JMX invocation stage now supports setting attributes</p> </li> <li> <p>LogLogic improvements</p> </li> <li> <p>Enanced TopologyHistory &amp; WaitForTopologySettle stage</p> </li> <li> <p>Better test coverage</p> </li> <li> <p>Multiple bug fixes</p> </li> </ul> </div> <div class="paragraph"> <p>From this point on, the main development will continue in 3.x line. We are preparing considerable design changes, so that RadarGun can be easily utilized to measure performance of other areas as well (e.g. JPA).</p> </div> <div class="paragraph"> <p>For more information about RadarGun, feel free to visit our <a href="https://github.com/radargun/radargun/wiki">wiki page</a>, or try <a href="https://github.com/radargun/radargun/wiki/Five-Minute-Tutorial">five minute tutorial</a>. In case of any issues, please refer to our <a href="https://github.com/radargun/radargun/issues">issue tracker</a>.</p> </div> <div class="paragraph"> <p>Thanks everyone for their contributions!</p> </div> </div> </div> <em>Posted by Unknown on 2015-08-05</em> <br> <em>Tags:</em> <a href="/blog/tags/radargun/"> radargun </a> <a href="/blog/tags/release/"> release </a> <hr> <div class="post"></div> <h3> Thursday, 05 June 2014 </h3> <h1> <a href="/blog/2014/06/05/mapreduce-performance-improvements/">Map/Reduce Performance improvements between Infinispan 6 and 7</a> </h1> <div class="content"> <div class="sect1"> <h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2> <div class="sectionbody"> <div class="paragraph"> <p>There have been a number of recent Infinispan 7.0 Map/Reduce performance related <a href="https://issues.jboss.org/browse/ISPN-4241?filter=12321790">improvements</a> that we were eager to test in our performance lab and subsequently share with you. The results are more than promising. In the word count use case, Map/Reduce task execution speed and throughput improvement is between fourfold and sixfold in certain situations that were tested.</p> </div> <div class="paragraph"> <p>We have achieved these improvements by focusing on:</p> </div> <div class="ulist"> <ul> <li> <p>Optimized mapper/reducer parallel execution on all nodes</p> </li> <li> <p>Improving the handling and processing of larger data sets</p> </li> <li> <p>Reducing the amount of memory needed for execution of MapReduceTask</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="_performance_test_results"><a class="anchor" href="#_performance_test_results"></a>Performance Test Results</h2> <div class="sectionbody"> <div class="paragraph"> <p>The performance tests were run using the following parameters:</p> </div> <div class="ulist"> <ul> <li> <p>An Infinispan 7.0.0-SNAPSHOT build created after the last commits from the list were committed to the Infinispan GIT repo on May 9th vs Infinispan 6.0.1.Final </p> </li> <li> <p>OpenJDK version 1.7.0_55 with 4GB of heap and the following JVM options:</p> </li> <li> <p>Random data filled 30% of the Java heap, and 100 random words were used to create the 8 kilobyte cache values. The cache keys were generated using key affinity, so that the generated data would be distributed evenly in the cache. These values were chosen, so that a comparison to Infinispan 6 could be made. Infinispan 7 can handle a final result map with a much larger set of keys than is possible in Infinispan 6. The actual amount of heap size that is used for data will be larger due to backup copies, since the cluster is running in distributed mode.</p> </li> <li> <p>The MapReduceTask executes a word count against the cache values using <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountMapperEmitPerValue.java">mapper</a>, <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountReducer.java">reducer, combiner</a>, and <a href="https://github.com/infinispan/infinispan/blob/master/demos/distexec/src/main/java/org/infinispan/demo/mapreduce/WordCountCollator.java">collator</a> implementations. The collator returns the 10 most frequently occurring words in the cache data. The task used a distributed reduce phase and a shared intermediate cache. The MapReduceTask is executed 10 times against the data in the cache and the values are reported as an average of these durations.</p> </li> </ul> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_a_fixed_amount_of_data_and_30_of_the_heap"><a class="anchor" href="#_from_1_to_8_nodes_using_a_fixed_amount_of_data_and_30_of_the_heap"></a>From 1 to 8 nodes using a fixed amount of data and 30% of the heap</h3> <div class="paragraph"> <p>This test executes two word count executions on each cluster with an increasing number of nodes. The first execution uses an increasing amount of data equal to 30% of the total Java heap across the cluster (i.e. With one node, the data consumes 30% of 4 GB. With two nodes, the data consumes 30% of 8 GB, etc.), and the second execution uses a fixed amount of data, (1352 MB which is approximately 30% of 4 GB). Throughput is calculated by dividing the total amount of data processed by the Map/Reduce task by the duration. The following charts show the throughput as nodes are added to the cluster for these two scenarios:</p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-TZD4uFGgkuc/U5ApZx-8KGI/AAAAAAAAABo/VSJkbhFFnDg/s1600/ISPN_6_fixed_size_and_30%25_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-TZD4uFGgkuc/U5ApZx-8KGI/AAAAAAAAABo/VSJkbhFFnDg/s1600/ISPN_6_fixed_size_and_30%25_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-pCrAYjE-GF4/U5ApZ1CkjXI/AAAAAAAAABs/5FNXfsU-eBc/s1600/ISPN_7_fixed_size_and_30%25_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-pCrAYjE-GF4/U5ApZ1CkjXI/AAAAAAAAABs/5FNXfsU-eBc/s1600/ISPN_7_fixed_size_and_30%25_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p>These charts clearly show the increase in throughput that were made in Infinispan 7. The throughput also seems to scale in an almost linear fashion for this word count scenario. With one node, Infinispan 7 processes the 30% of heap data in about 100 MB/sec, two nodes process almost 200 MB/sec, and 8 nodes process over 700 MB/sec.</p> </div> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_different_heap_size_percentages"><a class="anchor" href="#_from_1_to_8_nodes_using_different_heap_size_percentages"></a>From 1 to 8 nodes using different heap size percentages</h3> <div class="paragraph"> <p>This test executes the word count task using different percentages of heap size as nodes are added to the cluster. (5%, 10%, 15%, 20%, 25%, and 30%) Here are the throughput results for this test:</p> </div> <div class="paragraph"> <p><a href="http://2.bp.blogspot.com/-exDRqNYcquI/U5AqAFGveiI/AAAAAAAAAB4/Yqn0_j6bL-w/s1600/ISPN6_multi_ram_percent_throughput.png"><span class="image"><img src="http://2.bp.blogspot.com/-exDRqNYcquI/U5AqAFGveiI/AAAAAAAAAB4/Yqn0_j6bL-w/s1600/ISPN6_multi_ram_percent_throughput.png" alt="image"></span></a>http://2.bp.blogspot.com/-fqmkYkxZtyI/U5AqS08Xk9I/AAAAAAAAACA/_wsTOmSbkdc/s1600/ISPN7_multi_ram_percent_throughput.png[<span class="image"><img src="http://2.bp.blogspot.com/-fqmkYkxZtyI/U5AqS08Xk9I/AAAAAAAAACA/_wsTOmSbkdc/s1600/ISPN7_multi_ram_percent_throughput.png" alt="image"></span>]</p> </div> <div class="paragraph"> <p>Once again, these charts show an increase in throughput when performing the same word count task using Infinispan 7. The chart for Infinispan 7 shows more fluctuation in the throughput across the different percentages of heap size. The throughput plotted in the Infinispan 6 chart is more consistent.</p> </div> </div> <div class="sect2"> <h3 id="_from_1_to_8_nodes_using_different_value_sizes"><a class="anchor" href="#_from_1_to_8_nodes_using_different_value_sizes"></a>From 1 to 8 nodes using different value sizes</h3> <div class="paragraph"> <p>This test executes the word count task using 30% of the heap size and different cache value sizes as nodes are added to the cluster. (1KB, 2KB, 4KB, 8KB, 16KB, 32KB, 64KB, 128KB, 256KB, 512KB, 1MB, and 2MB) Here are the throughput results for this test:</p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-Roq8XeAB9Tw/U48EUKEGezI/AAAAAAAAABQ/tM3VSPv8iik/s1600/ISPN6_multi_value_size_throughput.png"><span class="image"><img src="http://3.bp.blogspot.com/-Roq8XeAB9Tw/U48EUKEGezI/AAAAAAAAABQ/tM3VSPv8iik/s1600/ISPN6_multi_value_size_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p><a href="http://4.bp.blogspot.com/-GSUDu54xlXg/U48EVvvhcbI/AAAAAAAAABY/bUI1o2YFUpY/s1600/ISPN7_multi_value_size_throughput.png"><span class="image"><img src="http://4.bp.blogspot.com/-GSUDu54xlXg/U48EVvvhcbI/AAAAAAAAABY/bUI1o2YFUpY/s1600/ISPN7_multi_value_size_throughput.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p>These results are more interesting. The throughput in Infinispan 7 is higher for certain cache size values, but closer to Infinispan 6 or even slower for other cache size values. The throughput peaks for 32KB cache values, but can be much lower for larger and smaller values. Smaller values require more overhead, but for larger values this behavior is not expected. This result needs to be investigated more closely.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2> <div class="sectionbody"> <div class="paragraph"> <p>The performance tests show that Infinispan 7 Map/Reduce improvements have increased the throughput and execution speed four to sixfold in some use cases. The changes have also allowed Infinispan 7 to process data sets that include larger intermediate results and produce larger final result maps. There are still areas of the Map/Reduce algorithm that need to be improved:</p> </div> <div class="ulist"> <ul> <li> <p>The Map/Reduce algorithm should be self-tuning. The <a href="https://github.com/infinispan/infinispan/blob/master/core/src/main/java/org/infinispan/distexec/mapreduce/MapReduceTask.java#L400">maxCollectorSize</a> parameter controls the number of values that the collector holds in memory, and it is not trivial to determine the optimal value for a given scenario. The value is based on the size of the values in the cache and the size of the intermediate results. A user is likely to know the size of the cache values, but currently <a href="https://issues.jboss.org/browse/ISPN-4318">Infinispan does not report statistics</a> about the intermediate results to the user. The Map/Reduce algorithm should analyze the environment at runtime and adjust the size of the collector dynamically.</p> </li> <li> <p>The fact that the throughput results vary with different value sizes needs to be investigated more closely. This could be due to the fact that the maxCollectorSize value used for these tests is not ideal for all value sizes, but there might be other causes for this behaviour.</p> </li> </ul> </div> </div> </div> </div> <em>Posted by Unknown on 2014-06-05</em> <br> <em>Tags:</em> <a href="/blog/tags/radargun/"> radargun </a> <a href="/blog/tags/benchmarks/"> benchmarks </a> <a href="/blog/tags/performance/"> performance </a> <a href="/blog/tags/map reduce/"> map reduce </a> <hr> <div class="post"></div> <h3> Wednesday, 09 November 2011 </h3> <h1> <a href="/blog/2011/11/09/single-lock-owner-important-step/">Single lock owner: an important step forward</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>The single lock owner is a highly requested Infinispan improvement. The basic idea behind it is that, when writing to a key, locks are no longer acquired on all the nodes that own that key, but only on a single designated node (named "main owner").</p> </div> </div> </div> <div class="sect1"> <h2 id="_how_does_it_help_me"><a class="anchor" href="#_how_does_it_help_me"></a>How does it help me?</h2> <div class="sectionbody"> <div class="paragraph"> <p>Short version: if you use transactions that concurrently write to the same keys, this improvement significantly increases your system' throughput.</p> </div> <div class="paragraph"> <p>Long version: If you&#8217;re using Infinispan with transactions that modify the same key(s) concurrently then you can easily end up in a deadlock. A deadlock can also occur if two transaction modify the same key at the same time - which is both inefficient and counter-intuitive. Such a deadlock means that at one transaction(or both) eventually rollback but also the lock on the key is held for the duration of a lockAquistionTimout config option (defaults to 10 seconds). These deadlocks reduces the throughput significantly as transactions threads are held inactive during deadlock time. On top of that, other transactions that want to operate on that key are also delayed, potentially resulting in a cascade effect.</p> </div> </div> </div> <div class="sect1"> <h2 id="_whats_the_added_performance_penalty"><a class="anchor" href="#_whats_the_added_performance_penalty"></a>What&#8217;s the added performance penalty?</h2> <div class="sectionbody"> <div class="paragraph"> <p>The only encountered performance penalty is during cluster topology changes. At that point the cluster needs to perform some additional computation (no RPC involved) to fail-over the acquired locks from previous to new owners. Another noticeable aspect is that locks are now being released asynchronously, after the transaction commits. This doesn&#8217;t add any burden to the transaction duration, but it means that locks are being held slightly longer. That&#8217;s not something to be concerned about if you&#8217;re not using transactions that compete for same locks though. We plan to benchmark this feature using <a href="http://radargun.sourceforge.net/">Radargun</a> benchmark tool - we&#8217;ll report back!</p> </div> </div> </div> <div class="sect1"> <h2 id="_want_to_know_more"><a class="anchor" href="#_want_to_know_more"></a>Want to know more?</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can read the <a href="http://community.jboss.org/wiki/SingleNodeLockingModel">single lock owner design wiki</a> or/and follow the JIRA <a href="https://issues.jboss.org/browse/ISPN-1137">JIRA</a> discussions.</p> </div> </div> </div> </div> <em>Posted by Mircea Markus on 2011-11-09</em> <br> <em>Tags:</em> <a href="/blog/tags/radargun/"> radargun </a> <a href="/blog/tags/transactions/"> transactions </a> <a href="/blog/tags/locking/"> locking </a> <a href="/blog/tags/deadlock detection/"> deadlock detection </a> <hr> <div class="post"></div> <h3> Wednesday, 10 August 2011 </h3> <h1> <a href="/blog/2011/08/10/transactions-enhancements-in-50/">Transactions enhancements in 5.0</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Besides other cool features such as Map reduce and distributed executors, Infinispan 5.0.0 "Pagoa" brings some significant improvements around transactional functionality:</p> </div> <div class="ulist"> <ul> <li> <p><a href="https://docs.jboss.org/author/x/BIF7">transaction recovery</a> <a href="http://community.jboss.org/docs/DOC-16646?uniqueTitle=false" class="bare">http://community.jboss.org/docs/DOC-16646?uniqueTitle=false</a> is now supported, with a set of tools that allow state reconciliation in case the transaction fails during 2nd phase of 2PC. This is especially useful in the case of transactions spreading over Infinispan and another resource manager, e.g. a database (distributed transactions). You can find out more on how to enable and use transaction recovery <a href="https://docs.jboss.org/author/x/BIF7">here</a>.</p> </li> <li> <p><a href="http://download.oracle.com/javaee/1.3/api/javax/transaction/Synchronization.html">Synchronization</a> enlistment is another important feature in this release. This allows Infinispan to enlist in a transaction as an <a href="http://download.oracle.com/javaee/1.3/api/javax/transaction/Synchronization.html">Synchronization</a> rather than an <a href="http://download.oracle.com/javaee/1.3/api/javax/transaction/xa/XAResource.html">XAResource</a>.This enlistment allows the TransactionManager to optimize 2PC with a 1PC where only one other resource is enlisted with that transaction (<a href="http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html/Administration_And_Configuration_Guide/ch09s04.html">last resource commit optimization</a>). This is particularly important when using Infinispan as a 2nd level cache in Hibernate. You can read more about this feature <a href="https://docs.jboss.org/author/x/_YB7">here</a>.</p> </li> <li> <p>besides that several bugs were fixed particularly when it comes to the integration with a transaction manager - BIG thanks to the community for reporting and testing them!</p> </li> </ul> </div> <div class="paragraph"> <p>To summarise, Infinispan can participate in a transaction in 3 ways:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>as a fully fledged XAResource that supports recovery</p> </li> <li> <p>as an XAResource, but without recovery. This is the default configuration</p> </li> <li> <p>and as an Synchronization</p> </li> </ol> </div> <div class="paragraph"> <p>In order to analyze the performance of running Infinispan in different transactional modes I&#8217;ve <a href="https://sourceforge.net/apps/trac/radargun/wiki/BenchmarkingTransactions">enhanced</a> and used <a href="http://sourceforge.net/apps/trac/radargun/wiki/WikiStart">Radargun</a>. The diagram below shows a performance comparison between running Infinispan in all the 3 modes described. The forth plot in the chart shows the performance of running Infinispan without transactions - this gives an idea about the cost of using transactions vs. raw operations.</p> </div> <div class="paragraph"> <p><a href="http://3.bp.blogspot.com/-OBeJ5lxWquM/TgRePeHHFxI/AAAAAAAAB_g/ob6y0_gHpZ8/s1600/tx_benchmark.png"><span class="image"><img src="http://3.bp.blogspot.com/-OBeJ5lxWquM/TgRePeHHFxI/AAAAAAAAB_g/ob6y0_gHpZ8/s400/tx_benchmark.png" alt="image"></span></a></p> </div> <div class="paragraph"> <p>The benchmark was run on <a href="https://github.com/mmarkus/radargun/blob/blog_13Jun_2011/plugins/infinispan5/src/main/resources/benchmark/benchmark-tx.xml">this</a> Radargun configuration, using Infinispan 5.0.0.CR5 configured as shown <a href="https://github.com/mmarkus/radargun/blob/blog_13Jun_2011/plugins/infinispan5/src/main/resources/dist-tx-sync-commit.xml">here</a>. As a TransactionManager <a href="https://github.com/mmarkus/radargun/blob/blog_13Jun_2011/plugins/infinispan5/pom.xml#L38">JBossTS 4.15.0.FINAL</a> was used, configured with a VolatileStore as shown <a href="https://github.com/mmarkus/radargun/blob/blog_13Jun_2011/plugins/infinispan5/src/main/java/org/radargun/infinispan/JBossTMLookup.java">here</a>. Each node was an <a href="http://ark.intel.com/Product.aspx?id=47923">4-core Intel&#174; Xeon&#174; CPU E5640 @ 2.67GHz</a>, with 4GB RAM.</p> </div> <div class="paragraph"> <p>Each transaction spread over only one put operation. The chart shows the following:</p> </div> <div class="ulist"> <ul> <li> <p>a non-transactional put is about 40% faster than a transactional one</p> </li> <li> <p><a href="http://download.oracle.com/javaee/1.3/api/javax/transaction/Synchronization.html">Synchronization</a>-enlisted transactions outperform an <a href="http://download.oracle.com/javaee/1.3/api/javax/transaction/xa/XAResource.html">XAResource</a> enlisted one by about 20%</p> </li> <li> <p>A recoverable cache has about the same performance as a non-recoverable cache when it comes to transactions.</p> </li> </ul> </div> <div class="paragraph"> <p>And that&#8217;s not all! During Infinispan 5.0.0 development we&#8217;ve been thinking a lot about how we can improve transactional throughput, especially in scenarios in which multiple transactions are writing on the same key. As a result we&#8217;ve come up with some improvement suggestions summarised <a href="http://community.jboss.org/wiki/PossibleLockingImprovements">here</a>: please feel free to take a look and comment!</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Mircea</p> </div> </div> </div> </div> <em>Posted by Mircea Markus on 2011-08-10</em> <br> <em>Tags:</em> <a href="/blog/tags/jta/"> jta </a> <a href="/blog/tags/radargun/"> radargun </a> <a href="/blog/tags/transactions/"> transactions </a> <a href="/blog/tags/benchmarks/"> benchmarks </a> <hr> <div class="post"></div> <h3> Friday, 17 December 2010 </h3> <h1> <a href="/blog/2010/12/17/announcing-project-radargun/">Announcing project Radargun</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Hi all,</p> </div> <div class="paragraph"> <p>Radargun is a tool we&#8217;ve developed and used for benchmarking Infinispan&#8217;s performance both between releases and compared with other similar products. Initially we shipped under the (poorly named) Cache Benchmark Framework. Due to increase community interest and the fact that this reached a certain maturity (we used it for benchmarking 100+ nodes clusters) we decided to revamp it a little and also come with another name: Radargun. You can read more about it <a href="http://radargun.sourceforge.net/">here</a>. A good start is the <a href="https://sourceforge.net/apps/trac/radargun/wiki/FiveMinutesTutorial">5MinutesTutorial</a>.</p> </div> <div class="paragraph"> <p>Cheers, Mircea</p> </div> </div> </div> </div> <em>Posted by Mircea Markus on 2010-12-17</em> <br> <em>Tags:</em> <a href="/blog/tags/radargun/"> radargun </a> <a href="/blog/tags/benchmarks/"> benchmarks </a> <a href="/blog/tags/cache benchmark framework/"> cache benchmark framework </a> <hr> <div class="pagination-links"><span class="current-page">1</span> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://infinispan.org/blog/" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>