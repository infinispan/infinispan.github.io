<!DOCTYPE html> <html lang="en"> <head> <title> Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script crossorigin="anonymous" src="https://kit.fontawesome.com/4167a38cfa.js"></script> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Wednesday, 07 March 2018 </h3> <h1> <a href="/blog/2018/03/07/rest-with-http2/">REST with HTTP/2</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>HTTP has become one of the most successful and heavily used network protocols around the world. Version 1.0 was created in 1996 and received a minor update 3 years later. But it took more than a decade to create HTTP/2 (which was approved in 2015). Why did it take so long? Well, I wouldn’t tell you all the truth if I didn’t mention an <a href="https://developers.google.com/web/fundamentals/performance/http2/">experimental protocol, called SPDY</a>. SPDY was primarily focused on improving performance. The initial results were very promising and inside Google’s lab, the developers <a href="https://blog.chromium.org/2009/11/2x-faster-web.html">measured 55% speed improvement</a>. This work and experience was converted into HTTP/2 proposal back in 2012. A few years later, we can all use HTTP/2 (sometimes called h2) along with its older brother - HTTP/1.1.</p> </div> </div> </div> <div class="sect1"> <h2 id="_main_differences_between_http1_1_and_http2"><a class="anchor" href="#_main_differences_between_http1_1_and_http2"></a>Main differences between HTTP/1.1 and HTTP/2</h2> <div class="sectionbody"> <div class="paragraph"> <p><span class="image"><img src="https://lh6.googleusercontent.com/QGDSTl40Vz0ROc0koZA_QWHQ_yGB1M_rEISrd42_mQv4MA9WJCUyag6RUsfTkCx0juSiZnbGiTXLvJDr86REpdAPWDEfntqVjaXh8zN3uDf3J1qRugr9nsk3wfqCR4WkZ1jLtg-s" alt="image" width="624" height="515"></span></p> </div> <div class="paragraph"> <p>HTTP/1.1 is a text-based protocol. Sometimes this is very convenient, since you can use low level tools, such as Telnet, for hacking. But it doesn’t work very well for transporting large, binary payloads. HTTP/2 solves this problem by using a completely redesigned architecture. Each HTTP message (a request or a response) consists of one or more frames. A frame is the smallest portion of data travelling through a TCP connection. A set of messages is aggregated into a, so called stream.</p> </div> <div class="paragraph"> <p><span class="image"><img src="https://lh3.googleusercontent.com/PYdtYy6RLlUFY3pUVfg-E_5_AomfRZW9O1EHTkytWnkKDXhlCkjsf-D4N7_CiG9AndYDZ7tAYTkrMQEeDi56PvcnvPaZ-9YNqswuTtqUY0IsTzo6UtXJrInhTKTc_SzGy-Zh_u0V" alt="image" width="624" height="171"></span></p> </div> <div class="paragraph"> <p>HTTP/2 allows to lower the number of physical connections between the server and the client by multiplexing logical connections into one TCP connection. Streams allow the server to recognize, which frame belongs to which conversation.</p> </div> <div class="sect4"> <h5 id="_how_to_connect_using_http2"><a class="anchor" href="#_how_to_connect_using_http2"></a>How to connect using HTTP/2?</h5> <div class="paragraph"> <p>There are two ways for starting an HTTP/2 conversation.</p> </div> <div class="paragraph"> <p>The first one, and the most commonly used one, is <a href="https://tools.ietf.org/html/rfc7301">TLS/ALPN</a>. During TLS handshake the server and the client negotiate protocol for further communication. Unfortunately JDK below 9 doesn’t support it by default (there are a couple of workarounds but please refer to your favorite HTTP client’s manual to find some suggestions).</p> </div> <div class="paragraph"> <p>The second one, much less popular, is so called plain text upgrade. During HTTP/1.1 conversation, the client issues an HTTP/1.1 Upgrade header and proposes new conversation protocol. If the server agrees, they start using it. If not, they stick with HTTP/1.1.</p> </div> <div class="paragraph"> <p>The good news is that Infinispan supports both those upgrade paths. Thanks to the ALPN Hack Engine (the credit goes to Stuart Douglas from the Wildfly Team), we support TLS/ALPN without any bootstrap classpath modification.</p> </div> </div> <div class="sect4"> <h5 id="_configuring_infinispan_server_for_http2"><a class="anchor" href="#_configuring_infinispan_server_for_http2"></a>Configuring Infinispan server for HTTP/2</h5> <div class="paragraph"> <p>Infinispan’s REST server already supports plain text upgrades out of the box. TLS/ALPN however, requires additional configuration since the server needs to use a Keystore. In order to make it even more convenient, we support <a href="http://infinispan.org/docs/stable/server_guide/server_guide.html#security:hotrod_rest_encryption">generating keystores automatically when needed</a>. Here’s an example showing how to configure a security realm:</p> </div> <div class="paragraph"> <p>The next step is to bind the security realm to a REST endpoint:</p> </div> <div class="paragraph"> <p>You may also use one of our configuration examples. The easiest way to get it working is to use our <a href="https://github.com/jboss-dockerfiles/infinispan/tree/master/server">Docker image</a>:</p> </div> <div class="paragraph"> <p>Let’s explain a couple of things from the command above:</p> </div> <div class="ulist"> <ul> <li> <p>-e "APP_USER=test" - This is a user name we will be used for REST authentication.</p> </li> <li> <p>-e "APP_PASS=test" - Corresponding password.</p> </li> <li> <p>../../docs/examples/configs/standalone-rest-ssl.xml - Here is a ready-to-go configuration with REST and TLS/ALPN support</p> </li> </ul> </div> <div class="paragraph"> <p>Unfortunately, HTTP/2 functionality <a href="https://issues.jboss.org/browse/ISPN-8896">has been broken in 9.2.0.Final</a>. But we promise to fix it as soon as we can :) Please use 9.1.5.Final in the meantime.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_testing_using_curl"><a class="anchor" href="#_testing_using_curl"></a>Testing using CURL</h2> <div class="sectionbody"> <div class="paragraph"> <p><a href="https://linux.die.net/man/1/curl">Curl</a> is one of my favorite tools. It’s very simple, powerful, and… it supports HTTP/2. Assuming that you already started Infinispan server using <code>docker run</code> command, you can put something into the cache:</p> </div> <div class="paragraph"> <p>Once, it’s there, let’s try to get it back:</p> </div> <div class="paragraph"> <p>Let’s analyze CURL switches one by one:</p> </div> <div class="ulist"> <ul> <li> <p>-k - Ignores certificate validation. All automatically generated certificates and self-signed and not trusted by default.</p> </li> <li> <p>-v - Debug logging.</p> </li> <li> <p>-u test:test - Username and password for authentication.</p> </li> <li> <p>-d test - This is the payload when invoking HTTP POST.</p> </li> <li> <p>-H “Accept: text/plain” - This tells the server what type of data we’d like to get in return.</p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="_conclusions_and_links"><a class="anchor" href="#_conclusions_and_links"></a>Conclusions and links</h2> <div class="sectionbody"> <div class="paragraph"> <p>I hope you enjoyed this small tutorial about HTTP/2. I highly encourage you to have a look at the links below to learn some more things about this topic. You may also measure the performance of your app when using HTTP/1.1 and HTTP/2. You will be surprised!</p> </div> <div class="ulist"> <ul> <li> <p><a href="https://hpbn.co/">High Performance Browser Networking</a> - One of the best books about HTTP and network performance. Most of the graphics in this article has been copied from that book. I highly recommend it!</p> </li> <li> <p><a href="https://linux.die.net/man/1/curl">Curl manual</a></p> </li> <li> <p><a href="https://hub.docker.com/r/jboss/infinispan-server/">Infinispan on Docker Hub</a></p> </li> </ul> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Tuesday, 06 March 2018 </h3> <h1> <a href="/blog/2018/03/06/accessing-infinispan-inside-docker-for/">Accessing Infinispan inside Docker for Mac</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Connecting to Infinispan instances that run inside Docker for Mac using the Java Hot Rod client can be tricky. In this blog post we&#8217;ll be analyzing what makes this environment tricky and how to get around the issue.</p> </div> <div class="paragraph"> <p>The tricky thing about Docker for Mac is that internal container IP addresses are not accessible externally. This is a <a href="https://github.com/docker/for-mac/issues/155">known issue</a> and it can be hard to workaround it. In container orchestrators such as Openshift, you can use Routes to allow external access to the containers. However, if running vanilla Docker for Mac, the simplest option is to map ports over to the local machine.</p> </div> <div class="paragraph"> <p>Why is this important? When someone connects using the Hot Rod protocol, the server returns the current topology to the client. When Infinispan runs inside of Docker, this topology by default contains internal IP addresses. Since those are not accessible externally in Docker for Mac, the client won&#8217;t be able to connect.</p> </div> <div class="paragraph"> <p>To workaround the issue, Infinispan server Hot Rod endpoint can be configured with external host/port combination, but doing this would require modifying the server&#8217;s configuration. A simpler method to get around the issue is to configure the client&#8217;s intelligence to be Basic. By doing this the server won&#8217;t send topology updates nor will the client be able to locate where keys are located using hashing. This has a negative performance impact since all requests to Infinispan single server or server cluster would need to go over the same IP+port. However, for demo or sample applications on Mac environments, this is reasonable thing to do.</p> </div> <div class="paragraph"> <p>So, how do we do all of this?</p> </div> <div class="paragraph"> <p>First, start Infinispan server and map Hot Rod&#8217;s default port 11222 to the local 11222 port:</p> </div> <div class="paragraph"> <p>docker run -it -p 11222:11222 jboss/infinispan-server:9.2.0.Final</p> </div> <div class="paragraph"> <p>Open your IDE and create a project with this dependencies:</p> </div> <div class="paragraph"> <p>Finally, create a class that connects to Infinispan and does a simple put/get sequence:</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Monday, 20 March 2017 </h3> <h1> <a href="/blog/2017/03/20/memory-and-cpu-constraints-inside/">Memory and CPU constraints inside a Docker Container</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>In one of the <a href="http://blog.infinispan.org/2016/07/improved-infinispan-docker-image.html">previous blog posts</a> we wrote about different configuration options for our Docker image. Now we did another step adding auto-configuration steps for memory and CPU constraints.</p> </div> </div> </div> <div class="sect1"> <h2 id="_before_we_dig_in"><a class="anchor" href="#_before_we_dig_in"></a>Before we dig in&#8230;&#8203;</h2> <div class="sectionbody"> <div class="paragraph"> <p>Setting memory and CPU constraints to containers is very popular technique especially for public cloud offerings (such as <a href="https://docs.openshift.org/latest/dev_guide/compute_resources.html">OpenShift</a>). Behind the scenes everything works based on adding <a href="https://docs.docker.com/engine/admin/resource_constraints/">additional Docker settings</a> to the containers. There are two very popular switches: <em>--memory</em> (which is responsible for setting the amount of available memory) and <em>--cpu-quota</em> (which throttles CPU usage).</p> </div> <div class="paragraph"> <p>Now here comes the best part&#8230;&#8203; JDK has no idea about those settings! We will probably need to wait until <a href="http://hg.openjdk.java.net/jdk9/jdk9/hotspot/rev/5f1d1df0ea49">JDK9</a> for getting full CGroups support.</p> </div> </div> </div> <div class="sect1"> <h2 id="_what_can_we_do_about_it"><a class="anchor" href="#_what_can_we_do_about_it"></a>What can we do about it?</h2> <div class="sectionbody"> <div class="paragraph"> <p>The answer is very simple, we need to tell JDK what is the available memory (at least by setting <em>Xmx</em>) and available number of CPUs (by setting <a href="http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html"><em>XX:ParallelGCThreads</em>, <em>XX:ConcGCThreads</em></a> and <em><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html">Djava.util.concurrent.ForkJoinPool.common.parallelism</a></em>).</p> </div> <div class="paragraph"> <p>And we have some very good news! We already did it for you!</p> </div> </div> </div> <div class="sect1"> <h2 id="_lets_test_it_out"><a class="anchor" href="#_lets_test_it_out"></a>Let&#8217;s test it out!</h2> <div class="sectionbody"> <div class="paragraph"> <p>At first you need to pull our latest Docker image:</p> </div> <div class="paragraph"> <p>Then run it with CPU and memory limits using the following command:</p> </div> <div class="paragraph"> <p>Note that JAVA_OPTS variable was overridden. Let&#8217;s have a look what had happened:</p> </div> <div class="ulist"> <ul> <li> <p>-Xms64m -Xmx350m - it is always a good idea to <a href="https://developers.redhat.com/blog/2014/07/15/dude-wheres-my-paas-memory-tuning-javas-footprint-in-openshift-part-1/">set <em>Xmn</em></a> inside a Docker container. Next we set <em>Xmx</em> to 70% of available memory. </p> </li> <li> <p>-XX:ParallelGCThreads=6 -XX:ConcGCThreads=6 -Djava.util.concurrent.ForkJoinPool.common.parallelism=6 - The next thing is setting CPU throttling as I explained above.</p> </li> </ul> </div> <div class="paragraph"> <p>There might be some cases where you wouldn&#8217;t like to set those properties automatically. In that case, just pass <em>-n</em> switch to the starter script:</p> </div> <div class="sect2"> <h3 id="_more_reading"><a class="anchor" href="#_more_reading"></a>More reading</h3> <div class="paragraph"> <p>If this topic sounds interesting to you, do not forget to have a look at those links:</p> </div> <div class="ulist"> <ul> <li> <p>A great series of articles about memory and CPU in the containers by Andrew Dinn</p> </li> <li> <p>A practical implementation by Fabric8 Team</p> </li> <li> <p>A great article about memory limits by Rafael Benevides</p> </li> <li> <p>OpenShift guidelines for creating Docker images</p> </li> </ul> </div> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Wednesday, 20 July 2016 </h3> <h1> <a href="/blog/2016/07/20/improved-infinispan-docker-image/">Improved Infinispan Docker image available</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p><a href="https://www.docker.com/sites/default/files/Engine.png"><span class="image"><img src="https://www.docker.com/sites/default/files/Engine.png" alt="image" width="200" height="196"></span></a></p> </div> <div class="paragraph"> <p>The <a href="https://hub.docker.com/r/jboss/infinispan-server/">Infinispan Docker image</a> has been improved, making it easier to run Infinispan Servers in clustered, domain and standalone modes, with different protocol stacks.</p> </div> <div class="paragraph"> <p>In this blog post we&#8217;ll show a few usage scenarios and how to combine it with the <a href="https://hub.docker.com/r/jboss/jgroups-gossip/">jgroups-gossip</a> image to create Infinispan Server clusters in docker based environments.</p> </div> <div class="exampleblock"> <div class="content"> <div class="exampleblock"> <div class="content"> <div class="paragraph"> <p>==== Getting started</p> </div> </div> </div> <div class="paragraph"> <p>By default the container runs in clustered mode, and to start a node simply execute:</p> </div> <div class="paragraph"> <p>Bringing a second container will cause it to form a cluster.The membership can be verified by running a command directly in the newly launched container:</p> </div> <div class="paragraph"> <p>Example output:</p> </div> <div class="exampleblock"> <div class="content"> <div class="paragraph"> <p>==== Using a different JGroups stack</p> </div> </div> </div> <div class="paragraph"> <p>The command above creates a cluster with the default JGroups stack (UDP), but it&#8217;s possible to pick another one provided it&#8217;s supported by the server. For example, to use TCP:</p> </div> <div class="paragraph"> <p>==== Running on cloud environments</p> </div> <div class="paragraph"> <p>We recently dockerized the JGroups Gossip Router to be used as an alternative discovery mechanism in environments where multicast is not enabled, such as cloud environments.</p> </div> <div class="paragraph"> <p>Employing  a gossip router will enable discovery via TCP, where the router acts as a registry: each member will register itself in this registry upon start and also discover other members.</p> </div> <div class="paragraph"> <p>The gossip router container can be launched by:     </p> </div> <div class="paragraph"> <p>Take note of the address where the router will bind to, it&#8217;s needed by the Infinispan nodes. The address can be easily obtained by:    </p> </div> <div class="paragraph"> <p>Finally we can now launch our cluster specifying the tcp-gossip stack with the location of the gossip router:</p> </div> <div class="paragraph"> <p>==== Launching Standalone mode</p> </div> <div class="paragraph"> <p>Passing an extra parameter allows to run a server in standalone (non-clustered) mode:</p> </div> <div class="exampleblock"> <div class="content"> <div class="paragraph"> <p>==== Server Management Console in Domain mode</p> </div> </div> </div> <div class="paragraph"> <p>Domain mode is a special case of clustered mode (and currently a requirement to use the Server Management Console), that involves launching a domain controller process plus one or more host controller processes. The domain controller does not hold data, it is used as a centralized management process that can replicate configuration and provision servers on the host controllers.</p> </div> <div class="paragraph"> <p>Running a domain controller is easily achievable with a parameter:</p> </div> <div class="paragraph"> <p>Once the domain controller is running, it&#8217;s possible to start one or more host controllers. In the default configuration, each host controller has two Infinispan server instances:</p> </div> <div class="paragraph"> <p>The command line interface can be used to verify the hosts managed in the domain:</p> </div> <div class="paragraph"> <p>It should output all the host names that are part of the domain, including the master (domain controller):</p> </div> <div class="paragraph"> <p>To get access to the Management console, use credentials admin/admin and go to port 9990 of the domain controller, for example: <a href="http://172.17.0.2:9990/">http://172.17.0.2:9990/</a></p> </div> <div class="paragraph"> <p>==== Versions</p> </div> <div class="paragraph"> <p>The image is built on <a href="https://hub.docker.com/r/jboss/infinispan-server/">Dockerhub</a> shortly after each Infinispan release (stable and unstable), and the improvements presented in this post are available for Infinispan 9.0.0.Alpha3 and Infinispan 8.2.3.Final. As a reminder, make sure to pick the right version when launching containers:</p> </div> <div class="paragraph"> <p>Getting involved</p> </div> <div class="paragraph"> <p>The image was created to be flexible and easy to use, but if something is not working for you or if you have any suggestions to improve it, please report it at <a href="https://github.com/jboss-dockerfiles/infinispan/issues/" class="bare">https://github.com/jboss-dockerfiles/infinispan/issues/</a></p> </div> <div class="paragraph"> <p>Enjoy!</p> </div> </div> </div> </div> </div> </div> <hr> <div class="post"></div> <h3> Wednesday, 20 July 2016 </h3> <h1> <a href="/blog/2016/07/20/bleeding-edge-on-docker/">Bleeding edge on Docker</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>As you may have noticed our <a href="https://hub.docker.com/r/jboss/infinispan-server">Docker images</a> are published together with (or very soon after) releases. But what if you want to try out some brand features which have just been merged? In that case you need to build an image by yourself.</p> </div> </div> </div> <div class="sect1"> <h2 id="_step_1_clone_jboss_docker_image_repository"><a class="anchor" href="#_step_1_clone_jboss_docker_image_repository"></a>Step #1 - Clone JBoss Docker image repository</h2> <div class="sectionbody"> <div class="paragraph"> <p>At first you will need to clone our Infinispan Docker images:</p> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> <div class="sect1"> <h2 id="_step_2_build_or_download_the_latest_snapshot"><a class="anchor" href="#_step_2_build_or_download_the_latest_snapshot"></a>Step #2 - Build or download the latest SNAPSHOT</h2> <div class="sectionbody"> <div class="paragraph"> <p>There are two options here - you can build the distribution yourself or use SNAPSHOTs available on <a href="https://repository.jboss.org/nexus/content/repositories/snapshots/org/infinispan/">JBoss Nexus repository</a>.</p> </div> <div class="paragraph"> <p>The first option requires checking out the Infinispan source code and performing a Maven build:</p> </div> <div class="paragraph"> <p>The second one is much simpler (Infinispan SNAPSHOTs are pushed into the repository after each successful build:</p> </div> <div class="exampleblock"> <div class="content"> <div class="paragraph"> <p>==== Step #3 - building Infinispan Docker image</p> </div> <div class="paragraph"> <p>One of the steps for building Infinispan Docker image is to download the distribution from <a href="http://infinispan.org/download/">Infinispan Download</a> page. We need to slightly modify this step and use our manually downloaded packages.</p> </div> <div class="paragraph"> <p>Modify the Dockerfile as shown below:</p> </div> <div class="paragraph"> <p>Now you are ready to invoke the Docker build:</p> </div> </div> </div> <div class="sect3"> <h4 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h4> <div class="paragraph"> <p>As you can see building a SNAPSHOT based docker image is very simple. From my own experience I can tell you that pushing it into Docker Hub is the fastest way to start playing with it in any PaaS environment (e.g. <a href="https://www.openshift.com/devpreview/register.html">Openshift Online</a>)</p> </div> <div class="paragraph"> <p>Happy building!</p> </div> </div> </div> </div> </div> <hr> <div class="pagination-links"><span class="current-page">1</span> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://blog.infinispan.org" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>