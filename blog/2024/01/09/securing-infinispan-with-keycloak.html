<!DOCTYPE html>
<html>

<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GPD7V946LB');
  </script>
  <title>Infinispan Insights, securing Infinispan with Keycloak</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.7.2/css/all.css" integrity="sha384-nRgPTkuX86pH8yjPJUAFuASXQSSl2/bBUiNV47vSYpKFxHJhbcrGnmlYpYJMeD7a" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.css">
  <link rel="stylesheet" href="/assets/css/cookieconsent.css">
  <link rel="alternate" type="application/rss+xml"
        title="Infinispan's RSS Feed"
        href="/feed.xml" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body class="blog">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/infinispan-logo-white.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/learn/">Learn <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/introduction" class="">Introduction</a></li>
          <li><a href="/features" class="">Features</a></li>
          <li><a href="/documentation" class="">Documentation</a></li>
          <li><a href="/tutorials" class="">Tutorials</a></li>
          <li><a href="/videos" class="">Videos</a></li>
          <li><a href="/references" class="">References</a></li>
          <li><a href="/experiments" class="">Experiments</a></li>
          <li><a href="/roadmap" class="">Roadmap</a></li>
        </ul>
      </li>
      <li>
        <a href="/use-cases/" class="">Use Cases</a>
      </li>
      <li>
        <a href="/community/" class="">Community</a>
      </li>
      <li>
        <a href="/blog/" class="active">Blog</a>
      </li>
      <li>
        <a href="/download/" class="">Download</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    
<div class="component-slim full-width-bg dark-bg light-blue">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <a href="/blog">Blogs</a>  <i class="fas fa-chevron-right"></i> Infinispan Insights, securing Infinispan with Keycloak
    </div>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="grid__item width-10-12 width-12-12-m doc-content">
    <h1>Infinispan Insights, securing Infinispan with Keycloak</h1>
    <div class="post-date">January 09, 2024
      Tags: <a href="/blog/tag/tutorial">tutorial</a> <a href="/blog/tag/security">security</a> <a href="/blog/tag/rbac">rbac</a> <a href="/blog/tag/authentication">authentication</a> <a href="/blog/tag/keycloak">keycloak</a> 
    </div>
    <div class="grid-wrapper">
      <div class="grid__item width-8-12 width-12-12-m margin-tb-sm">
        <div class="grid-wrapper">
          <div class="width-2-12 justify-self-center align-self-center">
            <img src="/assets/images/blog/authors/karesti.jpg">
          </div>
          <div class="width-10-12 align-self-center">
            <p class="byline">By Katia Aresti</p>
          </div>
        </div>
      </div>
      <div class="grid__item width-12-12">
          <div class="sect1">
<h2 id="infinispan-insights-securing-infinispan-with-keycloak">Infinispan Insights: Securing Infinispan with Keycloak</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows you how to secure your Infinispan cluster using Keycloak.
To understand the basics of Infinispan Security, check
<a href="https://infinispan.org/blog/2023/12/19/infinispan-secured-caches">this blog post</a> before.</p>
</div>
<div class="paragraph">
<p><strong>Key Points:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Learn how to create a security realm in Keycloak.</p>
</li>
<li>
<p>Override the default security realm in Infinispan.</p>
</li>
<li>
<p>Authentication and authorization in Infinispan with Keycloak.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="infinispan-and-keycloak-in-a-nutshell">Infinispan and Keycloak in a nutshell</h3>
<div class="sect3">
<h4 id="about-infinispan">About Infinispan</h4>
<div class="paragraph">
<p>Infinispan is an open-source, in-memory distributed key/value data store. It is designed to provide fast
and scalable access to frequently accessed data by storing it in memory. In addition to caching,
Infinispan offers features for data distribution, replication, and partitioning, making it suitable
for use in distributed and clustered environments.</p>
</div>
<div class="paragraph">
<p>Infinispan is often used in scenarios where low-latency access to data is critical, such as caching
frequently accessed database queries, session data in web applications, or other
use cases where quick access to data can improve overall system performance</p>
</div>
</div>
<div class="sect3">
<h4 id="about-keycloak">About Keycloak</h4>
<div class="paragraph">
<p><a href="https://www.keycloak.org/">Keycloak</a> is an open-source identity and access management solution developed by Red Hat.
It provides functionalities for identity and access management, including features like single sign-on (SSO),
user authentication, authorization, and user federation. Keycloak is designed to simplify the implementation
of security protocols and standards such as OAuth 2.0, OpenID Connect, and SAML.
Some key features include Single Sign-On (SSO), Identity Brokering, User Authentication,
User Federation, RBAC and more.</p>
</div>
</div>
<div class="sect3">
<h4 id="infinispan-and-keycloak">Infinispan and Keycloak</h4>
<div class="paragraph">
<p>Keycloak uses Infinispan as its underlying data store for caching and storage purposes.
Infinispan provides  scalable and efficient caching of authentication and authorization-related data.
This helps improve performance and responsiveness, especially in scenarios where quick access to user
session information and other identity-related data is crucial.</p>
</div>
<div class="paragraph">
<p>Some ways <strong>Keycloak leverages Infinispan</strong> include Caching User Sessions, storing Authorization policies,
providing distributed caching, improving performance, <a href="https://www.keycloak.org/2023/12/recover-site-failures">failover recovering</a>
and more.</p>
</div>
</div>
<div class="sect3">
<h4 id="what-about-infinispan-leveraging-keycloak">What about Infinispan leveraging Keycloak ?</h4>
<div class="paragraph">
<p>Infinispan provides several ways to handle authentication and user management.
By default, the security realm is properties based. However, token based authentication is supported
and Keycloak can be used for that purpose.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-security-realm-in-keycloak">Creating a Security Realm in Keycloak</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="run-keycloak-in-dev-mode">Run Keycloak in dev mode</h3>
<div class="paragraph">
<p>The easiest way to use Keycloak on your laptop is in a container using the development mode.
Because we&#8217;re going to run Keycloak in one container and Infinispan in another, let&#8217;s set up
a network to connect them.</p>
</div>
<div class="paragraph">
<p>For Linux users, there&#8217;s an option called <strong>network_mode: host</strong> that might be available
to you instead of using a network bridge. However, since this option doesn&#8217;t work for
Mac or Windows currently, we&#8217;ll focus on the method that suits all operating systems.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker network create -d bridge mynetwork
docker run -p 8080:8080 --network=mynetwork --name=keycloak -e KEYCLOAK_ADMIN=keycloak -e KEYCLOAK_ADMIN_PASSWORD=keycloak quay.io/keycloak/keycloak:latest start-dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Keycloak Image will create an administrator user by defining the KEYCLOAK_ADMIN and KEYCLOAK_ADMIN_PASSWORD
environment variables.</p>
</div>
<div class="paragraph">
<p>After getting the container up and running, go to <a href="http://localhost:8080">http://localhost:8080</a>
Click on the Administration Console link, and log in using the credentials <strong>"keycloak/keycloak"</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminKeycloak.png" alt="Admin Keycloak" width="800" height="316"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-realm">Create a realm</h3>
<div class="paragraph">
<p>Keycloak realms are a fundamental concept in Keycloak. Realms in Keycloak serve as a way to
isolate and manage different sets of users, applications, and their associated configurations.</p>
</div>
<div class="paragraph">
<p>Using the web administration tool, create a new realm called <strong>"Infinispan"</strong>.
This realm is what the Infinispan Server will use in the later steps of this tutorial.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRealmKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRealmKeycloak.png" alt="Keycloak create realm" width="200" height="192"></a>
</div>
</div>
<div class="paragraph">
<p>Name your realm <strong>“infinispan”</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispanRealmKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispanRealmKeycloak.png" alt="Keycloak: realm name is infinispan" width="800" height="569"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-the-infinispan-clients">Create the Infinispan clients</h3>
<div class="paragraph">
<p>Clients are entities that can request authentication of a user. Clients come in two forms.
The first type of client is an application that wants to participate in single-sign-on.
These clients just want Keycloak to provide security for them. The other type of client is one that
is requesting an access token so that it can invoke other services on behalf of the authenticated user.</p>
</div>
<div class="paragraph">
<p>For the Infinispan Server and testing the Console security, we&#8217;ll require two clients set up
in Keycloak: one named <strong>"infinispan-console"</strong> and the other <strong>"infinispan-server"</strong>.</p>
</div>
<div class="sect3">
<h4 id="infinispan-console-client">Infinispan Console Client</h4>
<div class="paragraph">
<p>Create a Keycloak client named <strong>“infinispan-console”</strong>. The Infinispan Web Console uses this client
to authenticate console users with Keycloak in order to obtain an authentication token. This token is
then used to authenticate all requests by the console to the Infinispan server.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepOne.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepOne.png" alt="Keycloak: infinispan-console client step 1" width="800" height="377"></a>
</div>
</div>
<div class="paragraph">
<p>Configure the valid redirect URIs with Infinispan’s console URI: <strong><a href="http://localhost:11222" class="bare">http://localhost:11222</a></strong></p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepTwo.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-client-stepTwo.png" alt="Keycloak: infinispan-console client step 2" width="800" height="503"></a>
</div>
</div>
<div class="paragraph">
<p>This step is completed.</p>
</div>
</div>
<div class="sect3">
<h4 id="infinispan-server-client">Infinispan Server Client</h4>
<div class="paragraph">
<p>Create a second client called <strong>"infinispan-server"</strong>. Set <strong>"client authentication"</strong> to <strong>"ON"</strong>.
This defines the type of the OIDC client. When it&#8217;s ON, the OIDC type is set to confidential
access type. When it&#8217;s OFF, it is set to public access type ("infinispan-console" client type).</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-server-client-stepTwo.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/infinispan-server-client-stepTwo.png" alt="Keycloak: infinispan-server client step 2" width="800" height="368"></a>
</div>
</div>
<div class="paragraph">
<p>This step is completed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-a-user">Create a user</h3>
<div class="paragraph">
<p>Once we have the two clients created, we need to create an admin user for Infinispan.</p>
</div>
<div class="paragraph">
<p>Click on the <strong>"users"</strong> menu, and create a user named <strong>"admin"</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createAdminUser.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createAdminUser.png" alt="Keycloak: create admin" width="800" height="448"></a>
</div>
</div>
<div class="paragraph">
<p>Once the user admin is created, navigate to the user detail page.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminDetailKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminDetailKeycloak.png" alt="Keycloak: admin detail" width="800" height="575"></a>
</div>
</div>
<div class="paragraph">
<p>In the credentials tab, create a password for the user, for example, <strong>"adminPassword"</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminSetAPasswordKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminSetAPasswordKeycloak.png" alt="Keycloak: admin set password" width="500" height="273"></a>
</div>
</div>
<div class="paragraph">
<p>We are now ready to run Infinispan.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-infinispan-secured-with-a-keycloak-realm">Running Infinispan secured with a Keycloak realm</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="create-the-infinispan-security-realm-configuration">Create the Infinispan security realm configuration</h3>
<div class="paragraph">
<p>You can configure this in XML, JSON, or YAML. In the example provided below, the configuration
is in YAML format.</p>
</div>
<div class="paragraph">
<p>Create a file named <strong>infinispan-token-realm.yaml</strong> with the following content.</p>
</div>
<div class="paragraph">
<p><strong>infinispan-token-realm.yaml</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre>server:
 security:
   securityRealms:
     - name: default
       tokenRealm:
         name: infinispan
         authServerUrl: 'http://keycloak:8080'
         client-id: infinispan-console
         oauth2Introspection:
           clientId: infinispan-server
           clientSecret: 'COPY AND PASTE THE SECRET FROM KEYCLOAK'
           introspectionUrl: 'http://keycloak:8080/realms/infinispan/protocol/openid-connect/token/introspect'</pre>
</div>
</div>
<div class="paragraph">
<p>We are not done yet!!</p>
</div>
<div class="paragraph">
<p>Read the following sections to understand and <strong>change the placeholders</strong> in the file.</p>
</div>
<div class="sect3">
<h4 id="default-security-realm-name">Default Security Realm name</h4>
<div class="paragraph">
<p>The security realm is named <strong>"default"</strong>. This file is designed to replace the default security realm
in Infinispan, which is originally based on properties, with the configuration for this
token-based realm.</p>
</div>
</div>
<div class="sect3">
<h4 id="client-secret">Client Secret</h4>
<div class="paragraph">
<p>Retrieve the secret for the <strong>"infinispan-server"</strong> client from the Keycloak Administration,
and then paste the secret value into the file replacing <strong>'COPY AND PASTE THE SECRET FROM KEYCLOAK'</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/grabSecretFromInfinispanServerClient.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/grabSecretFromInfinispanServerClient.png" alt="Keycloak: grab secret" width="800" height="465"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authentication-server-url-authserverurl">Authentication Server URL - <strong>authServerUrl</strong></h4>
<div class="paragraph">
<p>The authentication server is Keycloak, and it&#8217;s running at <strong>localhost:8080</strong>. However, in the YAML
configuration above, we used <strong>"keycloak"</strong> instead of "localhost" (the container name).
This adjustment is needed when running containers in a Docker network. The Infinispan Server
will be reaching out to the Keycloak Server inside the Docker environment. As mentioned earlier,
Linux users can use "localhost" with the <strong>network_mode: host</strong> configuration.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-the-infinispan-server-overriding-the-default-security-realm">Run the Infinispan Server overriding the default security realm</h3>
<div class="paragraph">
<p>Lets run Infinispan in a container providing the created security realm configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run -it -p 11222:11222 -v $(pwd):/user-config
--network=mynetwork
--name=infinispan quay.io/infinispan/server:15.0
-c infinispan.xml
-c /user-config/infinispan-token-realm.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Creates a volume "user-config"</strong> in the current directory where we created the file <code>infinispan-token-realm.yaml</code></p>
</li>
<li>
<p><strong>Attaches the container to the network "mynetwork"</strong> so Infinispan and Keycloak can connect</p>
</li>
<li>
<p><strong>Uses <code>-c</code></strong>, which means the container is using the default configuration file, <code>infinispan.xml</code>.
Yet, specifying another <code>-c</code> file, it adds the content of <code>infinispan-token-realm.yaml</code> to <code>infinispan.xml</code>.
Since this file configures the default security realm, the original Infinispan default properties realm
will be replaced with the token-based realm.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="verify-the-changes">Verify the changes</h3>
<div class="paragraph">
<p>Accessing the following URL provides the information used by the Infinispan Web console
to handle authentication.</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:11222/rest/v2/login?action=config" class="bare">http://localhost:11222/rest/v2/login?action=config</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "mode": "OIDC",
   "clientId": "infinispan-console",
   "ready": "true",
   "realm": "infinispan",
   "url": "http://keycloak:8080"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Infinispan Console will use the information above, and making use of the
<a href="https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter">Keycloak Javascript Adapter</a>,
the interface  will redirect to Keycloak for user authentication.</p>
</div>
</div>
<div class="sect2">
<h3 id="connect-to-the-console-with-the-admin-user">Connect to the console with the admin user</h3>
<div class="paragraph">
<p>Go the console web URL: <a href="http://localhost:11222" class="bare">http://localhost:11222</a></p>
</div>
<div class="sect3">
<h4 id="this-site-cant-be-reached">This site can’t be reached</h4>
<div class="paragraph">
<p>The console needs to access Keycloak from outside the container.
However, the realm configuration uses <code>keycloak</code> host.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/siteNotReached.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/siteNotReached.png" alt="Site not reached" width="400" height="263"></a>
</div>
</div>
<div class="paragraph">
<p>To avoid this issue, the workaround is simple: add to the following line to the <code>/etc/hosts</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> 127.0.0.1      keycloak</pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned before, If you are using linux you can avoid this by using localhost and running
both containers with network_mode: host.</p>
</div>
</div>
<div class="sect3">
<h4 id="authenticate-using-keycloak">Authenticate using Keycloak</h4>
<div class="paragraph">
<p>When opening the Infinispan Console, Infinispan will attempt to make a call to a REST API
that requires authentication. You&#8217;ll be redirected to the Keycloak authentication, where you
should use the credentials <strong>admin/adminPassword</strong>. When you initially connect as admin,
you&#8217;ll be prompted to change the password. For this example, you can stick with "adminPassword".</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/authenticateUsingKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/authenticateUsingKeycloak.png" alt="Infinispan: authenticate with Keycloak" width="400" height="258"></a>
</div>
</div>
<div class="paragraph">
<p>After Keycloak redirects back to the Infinispan Console, you can verify that admin is authenticated.
However, you will encounter Unauthorized errors in the console interface, since the connected
user’s roles are not known by Infinispan.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsNotAnAdmin.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsNotAnAdmin.png" alt="Admin has not admin role" width="800" height="264"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-and-assign-infinispan-admin-role">Create and assign Infinispan ADMIN role</h3>
<div class="paragraph">
<p>To grant complete access to the admin user, it&#8217;s necessary to create a role named <strong>"admin"</strong>
and assign that role to the user in Keycloak.</p>
</div>
<div class="sect3">
<h4 id="create-the-admin-role-in-keycloak">Create the ADMIN role in Keycloak</h4>
<div class="paragraph">
<p>Open the Keycloak administration interface, click on "Roles", and then create a role with the name
"admin".</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRoleAdminKeycloak.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/createRoleAdminKeycloak.png" alt="Keycloak: create admin role" width="800" height="285"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="assign-the-admin-role-in-keycloak">Assign the ADMIN role in Keycloak</h4>
<div class="paragraph">
<p>In the admin user detail page, go to the Role Mapping tab and assign the previously created
"admin" role there.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/asignAdminRoleToAdminUser.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/asignAdminRoleToAdminUser.png" alt="Keycloak: assign admin role to admin user" width="800" height="361"></a>
</div>
</div>
<div class="paragraph">
<p>Return to the Infinispan Console, and you&#8217;ll notice that the admin user is now granted the
admin role in Infinispan as well.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsGranted.png"><img src="/assets/images/blog/2024-01-09-infinispan-secured-keycloak/adminIsGranted.png" alt="Infinispan: admin is granted" width="800" height="440"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="to-go-further">To go further</h3>
<div class="paragraph">
<p>In the <a href="https://infinispan.org/tutorials/simple/simple_tutorials.html#secured_with_token_keycloak_remote-cache-tutorials">Infinispan Simple tutorials</a>
repository you will find an example with docker-compose, for Linux and non linux users.
There are many other advanced features in Keycloak, this is just the most simple use case.</p>
</div>
<div class="paragraph">
<p>Learn more about it in the Keycloak and Infinispan documentation.</p>
</div>
</div>
</div>
</div>
          
      </div>
      <div class="grid__item width-12-12">
        <h2>Get it, Use it, Ask us! </h2>
We’re hard at work on new features, improvements and fixes, so watch this space for more announcements!
<div class="paragraph">
    <p>Please, <a href="/download" target="_blank">download</a> and test the latest release.</p>
</div>
<div class="paragraph">
    <p>The source code is hosted on <a href="" target="_blank">GitHub</a>.
        If you need to report a bug or request a new feature, look for a similar one on our <a href="https://github.com/infinispan/infinispan/issues" target="_blank">GitHub issues tracker</a>.
        If you don’t find any, <a href="https://github.com/infinispan/infinispan/issues" target="_blank">create a new issue</a>.</p>
</div>
<div class="paragraph">
    <p>If you have questions, are experiencing a bug or want advice on using Infinispan,
        you can use <a href="https://github.com/infinispan/infinispan/discussions/"
                       target="_blank">GitHub discussions</a>.
        We will do our best to answer you as soon as we can.</p>
</div>
<div class="paragraph">
    <p>The Infinispan community uses <a href="https://zulipchat.com/"
                                        target="_blank">Zulip</a> for real-time communications.
        Join us using either a web-browser or a <a href="https://infinispan.zulipchat.com/apps/" target="_blank">dedicated
            application</a> on the <a href="https://infinispan.zulipchat.com/" target="_blank">Infinispan chat</a>.</p>
</div>
      </div>
      
      <div class="width-12-12 callout orange margin-tb-xs">
    <div class="grid-wrapper">
        <div class="width-4-12 width-12-12-m block-image">
            <img src="/assets/images/blog/authors/karesti.jpg" class="author-img">
        </div>
        <div class="width-8-12 width-12-12-m block-content">
            <h5>Katia Aresti</h5>
            <p>Katia Aresti is a Senior Software Engineer working for Red Hat since 2017. She is part of the core Infinispan team, reponsible of the integration with other frameworks such as Spring-Boot, Vert.x or Quarkus, developing new features such as Clustered Counters, REST API endpoints and the new Server Web Console.</p>
            <div class="width-3-12 width-6-12-m bio-block">
                <a href="http://github.com/karesti"><img src="/assets/images/community/icon-github.png"></a>
                
                
                <a href="https://www.linkedin.com/in/karesti"><img src="/assets/images/community/icon-linkedin.png"></a>
                
            </div>
        </div>
    </div>
</div>
      
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/infinispan-logo.png" class="project-logo" title="Infinispan Logo" alt="Infinispan"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Infinispan is released under the Apache 2.0 open source license. Learn more about the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>.<br/><br/>This website built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/infinispan/infinispan.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <b>Navigation</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/" >Home</a></li>
          
            
            <li><a href="/features" >Features</a></li>
          
            
            <li><a href="/documentation" >Docs</a></li>
          
            
            <li><a href="/tutorials" >Tutorials</a></li>
          
            
            <li><a href="/videos" >Videos</a></li>
          
            
            <li><a href="/use-cases" >Use Cases</a></li>
          
            
            <li><a href="/community" >Community</a></li>
          
            
            <li><a href="/download" >Download</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Contribute</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="https://github.com/infinispan/infinispan/issues" target="_blank">Submit a Bug</a></li>
          
            
            <li><a href="https://github.com/infinispan" target="_blank">Write Code</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Follow Us</b>
        <ul class="footer-links width-1-12">
          
            
            <li><a href="/blog" >Blog</a></li>
          
            
            <li><a href="https://twitter.com/infinispan" target="_blank">Twitter</a></li>
          
        </ul>
      </div>
    

    <div class="width-6-12 more-links">
      <div class="grid-wrapper">
        <div class="width-6-12">
          <b>A Member of</b><br/>
          <a href="https://www.commonhaus.org/" target="_blank"><img src="/assets/images/CF_logo_horizontal.svg" title="Commonhaus Foundation"></a><br/>
        </div>
        <div class="width-6-12">
          <b>Thanks to</b><br/>
          <a href="https://zulip.com" target="_blank"><img src="/assets/images/footer/zulip.png" title="Zulip" alt="Zulip"></a>
          <a href="https://weblate.org" target="_blank"><img src="/assets/images/footer/weblate.png" title="Weblate" alt="Weblate"></a>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="content-slim redhat-footer">
  <div class="grid-wrapper">
    <span class="cookie-preferences">
      <a href="#" data-cc="show-preferencesModal">Manage cookie preferences</a>
    </span>
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/truncate-list.js"></script>

  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.umd.js" type="text/javascript"></script>
  <script src="/assets/javascript/cookieconsent.config.js" type="module"></script>

<!--   <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script> -->
</body>

</html>
