<!DOCTYPE html> <html lang="en"> <head> <title> Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script crossorigin="anonymous" src="https://kit.fontawesome.com/4167a38cfa.js"></script> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <link href="/feed.atom" rel="alternate" type="application/atom+xml"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Tuesday, 24 January 2012 </h3> <h1> <a href="/blog/2012/01/24/infinispan-510final-is-finally-here/">Infinispan 5.1.0.FINAL is finally here!!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>After over 4 months of development, testing, profiling&#8230;&#8203;etc, I&#8217;m extremely pleased to announce that Infinispan 5.1.0.FINAL 'Brahma' is out now! It comes with some very important brand new features such as:</p> </div> <div class="ulist"> <ul> <li> <p><a href="http://infinispan.blogspot.com/2011/10/transaction-remake-in-infinispan-51.html">O</a>http://infinispan.blogspot.com/2011/10/transaction-remake-in-infinispan-51.html[ptimistic vs pessimistic locking separation], <a href="http://infinispan.blogspot.com/2011/11/more-locking-improvements-in-infinispan.html">single node locking</a> and <a href="https://community.jboss.org/wiki/LockReorderingForAvoidingDeadlocks">lock reordering</a></p> </li> <li> <p><a href="http://infinispan.blogspot.com/2011/10/infinispan-510beta2-is-out-and.html">A</a>http://infinispan.blogspot.com/2011/10/infinispan-510beta2-is-out-and.html[symmetric cluster supports]</p> </li> <li> <p><a href="http://infinispan.blogspot.com/2011/10/infinispan-510beta3-is-out-with-atomic.html">Fine-grained atomic maps</a></p> </li> </ul> </div> <div class="paragraph"> <p>We&#8217;ve also implemented a bunch of improvements such as:</p> </div> <div class="ulist"> <ul> <li> <p><a href="http://infinispan.blogspot.com/2012/01/configuration-changes-in-infinispan.html">Move to Stax XML parser and new programmatic configuration</a></p> </li> <li> <p><a href="http://infinispan.blogspot.com/2011/10/infinispan-510beta3-is-out-with-atomic.html">Hot Rod protocol 1.1 to provide better support for environments with virtual nodes enabled</a></p> </li> <li> <p><a href="http://infinispan.blogspot.com/2011/12/startup-performance.html">Startup performance</a></p> </li> <li> <p><a href="http://infinispan.blogspot.com/2011/09/next-infinispan-510-alpha-hits-streets.html">Push-based state transfer for replicated caches</a></p> </li> </ul> </div> <div class="paragraph"> <p>This has been a huge effort by all the Infinispan community including forum users, which have been giving us tremendous feedback, occasional community contributors and core developers. Thank you very much for all the effort you&#8217;ve put in!!</p> </div> <div class="paragraph"> <p>We&#8217;ve build a migration guide for anyone upgrading for 5.0.0.FINAL to 5.1.0.FINAL, so make sure you <a href="https://docs.jboss.org/author/display/ISPN/Upgrading+from+5.0+to+5.1">read it</a> if you&#8217;re upgrading.</p> </div> <div class="paragraph"> <p>As usual, <a href="http://www.jboss.org/infinispan/downloads">download</a> the release, provide <a href="http://community.jboss.org/en/infinispan?view=discussions">feedback</a>, read through the detailed <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12313470">changelog</a>. And check out our <a href="https://docs.jboss.org/author/display/ISPN51/Home">documentation</a> for this version too.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Galder</p> </div> </div> </div> </div> <em>Posted by Galder Zamarreño on 2012-01-24</em> <br> <em>Tags:</em> <hr> <div class="post"></div> <h3> Thursday, 19 January 2012 </h3> <h1> <a href="/blog/2012/01/19/infinispan-coming-to-india/">Infinispan coming to India!!!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Next week Manik and I will be representing the Infinispan contingent at <a href="http://www.jboss.org/events/JUDCon/2012/india">JUDCon India in Bangalore</a> and we have plenty to talk about:</p> </div> <div class="paragraph"> <p> Tuesday, 24th January</p> </div> <div class="ulist"> <ul> <li> <p><strong><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day1track1.html">Infinispan: The Path Ahead</a> -</strong> Manik </p> </li> <li> <p><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day1track2.html"><strong>Extreme Performance and Scalability with Infinispan Near Caches</strong></a> - Galder</p> </li> <li> <p><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day1track2.html"><strong>Building a Transactional, Scaled Application Using Infinispan and Java EE</strong></a> - Galder</p> </li> </ul> </div> <div class="paragraph"> <p>Wednesday, 25th January</p> </div> <div class="ulist"> <ul> <li> <p><strong><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day2track2.html">Technical Deep-dive with Infinispan</a></strong> - Manik</p> </li> <li> <p><strong><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day2track2.html">Eventual Consistency in Infinispan</a></strong> - Manik</p> </li> <li> <p><strong><a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day2track2.html">Infinispan In 50 Minutes</a></strong> - Galder</p> </li> </ul> </div> <div class="paragraph"> <p>Finally, to top it up, I&#8217;ll be doing a presentation on <a href="http://www.jboss.org/events/JUDCon/2012/india/agenda/day2track3.html">JBoss' Polyglot revolution</a>!</p> </div> <div class="paragraph"> <p>This is going to be my first visit to India and I&#8217;m very excited to be presenting at this conference :). Looking forward to meeting developers, architects and in general, anyone interested in data grids and various NoSQL technologies next week.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Galder</p> </div> </div> </div> </div> <em>Posted by Galder Zamarreño on 2012-01-19</em> <br> <em>Tags:</em> <a href="/blog/tags/ conference/"> conference </a> <a href="/blog/tags/event/"> event </a> <a href="/blog/tags/judcon/"> judcon </a> <a href="/blog/tags/india/"> india </a> <hr> <div class="post"></div> <h3> Tuesday, 17 January 2012 </h3> <h1> <a href="/blog/2012/01/17/infinispan-510cr4-is-out/">Infinispan 5.1.0.CR4 is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Over the past week we&#8217;ve been busy profiling Infinispan, in particular we&#8217;ve been trying to maximise the performance of Infinispan transactional caches which received a major overhaul int the 5.1 'Brahma' series, and the result is that instead of going final, we&#8217;ve decided to cut another candidate release, Infinispan 5.1.0.CR4 which is now available for download from the <a href="http://www.jboss.org/infinispan/downloads">usual place</a>. We&#8217;re confident that these improvements will be greatly appreciated by Infinispan consumers such as Hibernate second-level-cache and JBoss Application Server 7 HTTP session replication.</p> </div> <div class="paragraph"> <p>As part of the configuration and parser work, new configuration documentation has generated which you can now find in <a href="http://docs.jboss.org/infinispan/5.1/configdocs/" class="bare">http://docs.jboss.org/infinispan/5.1/configdocs/</a>.</p> </div> <div class="paragraph"> <p>As always, give it a spin to this new candidate release and <a href="http://community.jboss.org/en/infinispan?view=discussions">let us know what you think</a>. You can find detailed information on the issues fixed in our <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12318854">release notes</a>.</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <em>Posted by Galder Zamarreño on 2012-01-17</em> <br> <em>Tags:</em> <a href="/blog/tags/transactions/"> transactions </a> <hr> <div class="post"></div> <h3> Tuesday, 10 January 2012 </h3> <h1> <a href="/blog/2012/01/10/last-infinispan-51-brahma-cr-is-out/">Last Infinispan 5.1 'Brahma' CR is out!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>First of all, happy new year to all the Infinispan community!</p> </div> <div class="paragraph"> <p>The final CR of the Infinispan 5.1 'Brahma' series, called 5.1.0.CR3 is <a href="http://www.jboss.org/infinispan/downloads">out</a> with another round of <a href="http://goo.gl/lMyin">fixes</a>. This will be the last of the candidate releases and we expect to go final with the release very shortly, so your help now is crucial. If you&#8217;re using the last of our stable releases, 5.0.1.FINAL, please upgrade to 5.1.0.CR3 and <a href="http://community.jboss.org/en/infinispan?view=discussions">let us know</a> if you encounter any issues.</p> </div> <div class="paragraph"> <p>Cheers, Galder</p> </div> </div> </div> </div> <em>Posted by Galder Zamarreño on 2012-01-10</em> <br> <em>Tags:</em> <hr> <div class="post"></div> <h3> Wednesday, 04 January 2012 </h3> <h1> <a href="/blog/2012/01/04/configuration-changes-in-infinispan/">Configuration Changes in Infinispan</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>This blog will introduce both Infinispan users, and Infinispan contributors to the new configuration system. First, I&#8217;ll detail the changes for users, and then for committers.</p> </div> </div> </div> <div class="sect1"> <h2 id="_users"><a class="anchor" href="#_users"></a>Users</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you use XML to configure Infinispan, you shouldn&#8217;t notice any change, except a much faster startup, courtesy of the Stax based parser. However, if you use programmatic configuration, read on for the important differences. Configuration is now packaged in <code>org.infinispan.configuration</code>, and you must use a builder style:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Configuration</span> c1 = <span class="keyword">new</span> ConfigurationBuilder()&#x000A;     <span class="comment">// Adjust any configuration defaults you want</span>&#x000A;     .clustering()&#x000A;        .l1()&#x000A;           .disable()&#x000A;        .mode(DIST_SYNC)&#x000A;        .hash()&#x000A;           .numOwners(<span class="integer">5</span>)&#x000A;     .build();</code></pre> </div> </div> <div class="paragraph"> <p>The old bean style configuration is now deprecated and will be removed in a later version. Configuration properties which can be safely changed at runtime are mutable, and all others are immutable. To copy a configuration, use the <code>read()</code> method on the builder, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Configuration</span> c2 = <span class="keyword">new</span> ConfigurationBuilder()&#x000A;     <span class="comment">// Read in C1 to provide defaults</span>&#x000A;     .read(c1)&#x000A;     .clustering()&#x000A;        .l1()&#x000A;           .enable()&#x000A;     <span class="comment">// This cache is DIST_SYNC, will have 5 owners, with L1 cache enabled</span>&#x000A;     .build();</code></pre> </div> </div> <div class="paragraph"> <p>This completely replaces the old system of defining a set of overrides on bean properties. Note that this means the behaviour of Infinispan configuration is somewhat different when used programmatically. Whilst before, you could define a default configuration, and any overrides would be applied on top of <strong>your</strong> defaults when defined, now you must explicitly read in your defaults to the builder. This allows for much greater flexibility in your code (you can have a as many "default" configurations as you want), and makes your code more explicit and type safe (finding references works).</p> </div> <div class="paragraph"> <p>The schema is unchanged from before. Infinispan 4.0 configurations are currently not being parsed. Support for these will be added shortly, however a warning message will be printed if they are used. To upgrade, just change the schema definition from:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;infinispan</span>&#x000A;       <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>&#x000A;       <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:infinispan:config:4.1 http://www.infinispan.org/schemas/infinispan-config-4.1.xsd</span><span class="delimiter">&quot;</span></span>&#x000A;       <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:infinispan:config:4.1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre> </div> </div> <div class="paragraph"> <p>to</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;infinispan</span>&#x000A;       <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>&#x000A;       <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:infinispan:config:5.1 http://www.infinispan.org/schemas/infinispan-config-5.1.xsd</span><span class="delimiter">&quot;</span></span>&#x000A;       <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:infinispan:config:5.1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span></code></pre> </div> </div> <div class="paragraph"> <p>The schema documentation has changed format, as it is now produced using the standard tool x3p. This should be a significant improvement, as better navigation is offered. Some elements and attributes are missing docs right now, we are working on adding this. As an added benefit, your IDE should now show documentation when an xsd referenced (as above)</p> </div> <div class="paragraph"> <p>We are in the process of adding in support for this configuration style for modules (such as cache stores). In the meantime, please use the old configuration or XML if you require support for cache store module configuration.</p> </div> </div> </div> <div class="sect1"> <h2 id="_committers"><a class="anchor" href="#_committers"></a>Committers</h2> <div class="sectionbody"> <div class="paragraph"> <p>If you are a committer to Infinispan, you may find the following notes useful. Note that currently we still use the old configuration system internally within Infinispan. This makes things a little complicated. This will be switched out soon! For now, you need to also add your property to the old config system as well as the new.</p> </div> <div class="paragraph"> <p>Note, these guides assume you are adding an element to the cache configuration, but apply equally to the global configuration.</p> </div> <div class="paragraph"> <p>Before you start adding a configuration property, identify whether you want to add a property to an existing configuration group/element, or whether you need to create a child object. We call the configuration group XXX in the steps below.</p> </div> <div class="sect2"> <h3 id="_adding_a_property"><a class="anchor" href="#_adding_a_property"></a>Adding a property</h3> <div class="olist arabic"> <ol class="arabic"> <li> <p>Add the property to the relevant <code>XXXConfiguration</code> class. Add a private final field, add a parameter to the constructor, and assign the value to the field in the constructor body. Add a accessor for the property. If the property should be mutable at runtime, then add a mutator as well. Most configuration properties are not mutable at runtime - if the configuration is runtime mutable, then Infinispan needs to take notice of this update whilst the cache is running (you can&#8217;t cache the value of the configuration in your implementation class). Mutators and accessors don&#8217;t use the classic JavaBean pattern of prepending accessors with "get" and mutators with "set". Instead, the name of the property is used for an accessor. A mutator is an overloaded version of the accessor which takes a parameter, the new value.</p> </li> <li> <p>Add the property to the matching <code>XXXConfigurationBuilder</code>. You&#8217;ll need to add a mutable field to the class, and initialise it to it&#8217;s default value in the field declaration. Add a mutator (following the above pattern).</p> </li> <li> <p>The <code>create()</code> method is called by the parent object in order to instantiate the <code>XXXConfiguration</code> object from the builder. Therefore, make sure to pass the value of the field in the builder to the <code>XXXConfiguration</code> object&#8217;s constructor here. Additionally, if you require a complex default (for example, the value of a configuration property is defaulted conditionally based on the value of some other configuration property), then this is the place to do this.</p> </li> <li> <p>The <code>validate()</code> method is called by the parent object to validate the values the user has passed in. This method may also be called directly by user code, should they wish to manually validate a configuration object. You should place any validation logic here related to your configuration property. If you need to "cross-validate" properties (validate the value of your property conditionally upon the value of another property), and the other property is on another builder object, increase the visibility of that other property field to "default", and reference it from this builder, by calling the <code>getBuilder()</code> method, which will gives you a handle on the root configuration builder.</p> </li> <li> <p>The final step is to add parsing logic to the <code>Parser</code> class. First, add the attribute to name to the <code>Attribute</code> enum (this class simply provides a mapping between the non-type-safe name of the attribute in XML and a type-safe reference to use in the parser). Locate the relevant <code>parseXXX()</code> method on the class, and add a case to the switch statement for the attribute. Call the builder mutator you created above, performing any XML related validation (you are unlikely to need this), and type conversion (using the static methods on the primitive wrapper classes, String class, or relevant enum class).</p> </li> </ol> </div> </div> <div class="sect2"> <h3 id="_adding_a_group"><a class="anchor" href="#_adding_a_group"></a>Adding a group</h3> <div class="paragraph"> <p>In some situations you may additionally want to add a configuration grouping object, represented in XML as an element. You might want to do this if you are adding a new area of functionality to Infinispan. Identify the location of the new configuration grouping object. It might be added to the root <code>Configuration</code> object, or it might be added to one it&#8217;s children, children&#8217;s children. We&#8217;ll call the parent YYY in the steps below.</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Create the <code>XXXConfiguration</code> object. Add any properties required following the guide for adding properties. The constructors visibility should be "default".</p> </li> <li> <p>Create the <code>XXXConfigurationBuilder</code> object. It should subclass the relevant configuration child builder&#8201;&#8212;&#8201;use the <code>YYYConfigurationChildBuilder</code> as the superclass. This will ensure that all builder methods that allow the user to "escape" are provided correctly (i.e provide access to other grouping elements), and also require you to provide a create() and validate() method. The constructor needs to take the the <code>YYYConfigurationBuilder</code> as an argument, and pass this to the superclass (this simply allows access to the root of the builder tree using the <code>getBuilder()</code> method).</p> </li> <li> <p>Follow the property adding guide to add any properties you need to the builder. The <code>create()</code> method needs to return a new instance of the <code>XXXConfiguration</code> object. Implement any validation needed in the <code>validate()</code> method.</p> </li> <li> <p>In the <code>YYYConfiguration</code> object, add your new configuration class as a private final field, add an accessor, and add initialiser assignment in the constructor</p> </li> <li> <p>In the <code>YYYConfigurationBuilder</code>, add your new configuration builder as a private final field, and initialise it in the constructor with a new instance. Finally, add an accessor for it following the standard pattern discussed in the guide.</p> </li> <li> <p>In the <code>YYYConfigurationBuilder</code> ensure that your validate method is called in it&#8217;s validate method, and that result of the <code>XXXConfiguration</code> instances' create method is passed to the constructor of <code>YYYConfiguration</code></p> </li> <li> <p>Finally, add this to the parser. First, add the element to the <code>Element</code> class, which provides a type safe representation of the element name in XML. In the <code>Parser</code> class, add a new <code>parseXXX</code> method, copying one of the others that most matches your requirements (parse methods either parse elements only - look for <code>ParseUtils,requireNoAttributes()</code>, attributes only&#8201;&#8212;&#8201;look for <code>ParseUtils.requireNoContent()</code> or a combination of both&#8201;&#8212;&#8201;look for an iterator over both elements and attributes). Add any attributes as discussed in the adding a property guide. Finally, wire this in by locating the <code>parseYYY()</code> method, and adding an element to the switch statement, that calls your new <code>parseXXX()</code> method.</p> </li> </ol> </div> </div> <div class="sect2"> <h3 id="_bridging_to_the_old_configuration"><a class="anchor" href="#_bridging_to_the_old_configuration"></a>Bridging to the old configuration</h3> <div class="paragraph"> <p>Until we entirely swap out the old configuration you will need to add your property to the old configuration (no need to worry about jaxb mappings though!), and then add some code to the <code>LegacyConfigurationAdaptor</code> to adapt both ways. It&#8217;s fairly straightforward, just locate the relevant point in the <code>adapt()</code> method (near the configuration group you are using) and map from the legacy configuration to the new configuration, or vs versa. You will need to map both ways, in both adapt methods.</p> </div> </div> </div> </div> </div> <em>Posted by Pete Muir on 2012-01-04</em> <br> <em>Tags:</em> <a href="/blog/tags/configuration/"> configuration </a> <hr> <div class="pagination-links"><a href="/blog/page/83/" class="previous-link">Previous</a> <a href="/blog/" class="page-link">1</a> <a href="/blog/page/2/" class="page-link">2</a> <span class="skip">...</span><a href="/blog/page/83/" class="page-link">83</a> <span class="current-page">84</span> <a href="/blog/page/85/" class="page-link">85</a> <span class="skip">...</span><a href="/blog/page/113/" class="page-link">113</a> <a href="/blog/page/114/" class="page-link">114</a> <a href="/blog/page/85/" class="next-link">Next</a> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://infinispan.org/blog/" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>