<!DOCTYPE html> <html lang="en"> <head> <title> Blog - Infinispan</title> <meta charset="utf-8"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <meta content="DENY" http-equiv="X-Frame-Options"> <meta content="1; mode=block" http-equiv="X-XSS-Protection"> <meta content="nosniff" http-equiv="X-Content-Type-Options"> <link href="https://static.jboss.org/theme/css/bootstrap-community/3.2.0.2/bootstrap-community.min.css" media="screen" rel="stylesheet"> <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" rel="stylesheet"> <script crossorigin="anonymous" src="https://kit.fontawesome.com/4167a38cfa.js"></script> <script id="dpal" src="https://www.redhat.com/dtm.js" type="text/javascript"></script> <link href="/images/favicon.png" rel="shortcut icon" type="image/png"> <link href="//static.jboss.org/images/example/apple-touch-icon-144x144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144"> <link href="//static.jboss.org/images/example/apple-touch-icon-114x114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114"> <link href="//static.jboss.org/images/example/apple-touch-icon-72x72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72"> <link href="//static.jboss.org/images/example/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed"> <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css" rel="stylesheet"> <link href="https://static.jboss.org/css/rhbar.css" media="screen" rel="stylesheet"> <link href="/feed.atom" rel="alternate" type="application/atom+xml"> <style>
      .jumbotron {
        padding: 0.5em 0.1em 0.5em 0.1em;
        background-image: none;
        background-color: #ffec9f;
      }
      .jumbotron p, 
      .jumbotron h1 {
        color: #656565;
      }
      .dropup {
        z-index: 1032;
      }
      .navbar {
        font-size: x-large;
      }
      .navbar ul {
        padding-top: 0.7em;
      }
      .navbar-brand {
        height: 80px;
      }
      .navbar-default {
        background-color: white;
      }
      .navbar-default .navbar-nav > li > a {
        color: #336699;
      }
      .navbar-default .navbar-nav > li > a:hover {
        color: #204060;
      }
      .navbar-default .navbar-nav > .open > a,
      .navbar-default .navbar-nav > .open > a:hover,
      .navbar-default .navbar-nav > .open > a:focus {
        background-color: #4a5d75;
      }
      h3.well {
        border-color: #ffd630;
        background-color: #ffec9f;
      }
      .panel-sidebar {
        border-color: #f5f5f5;
      }
      .panel-sidebar > .panel-heading {
        border-color: #e3e3e3;
        background-color: #f5f5f5;
        color: #656565;
      }
      .btn-primary {
        border-color: #ffd630;
        background-color: #ffec9f;
        color: #656565;
      }
      footer.container {
        background-color: white;
      }
      footer.container h1, footer.container h2, footer.container h3, footer.container h4, footer.container h5, footer.container h6, footer.container p, footer.container a {
        color: #656565;
      }
      footer.container ul {
        padding: 0;
      }
      i.enormous-icon {
        margin-top: 0.3em;
      }
      .home-examples {
        font-size: 16px;
      }
    </style> <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script> <script>
      hljs.initHighlightingOnLoad();
    </script> <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     
    ga('create', 'UA-8601422-1', 'auto');
    ga('send', 'pageview');
    
    </script> </head> <body> <div id=""> <ul class="visuallyhidden" id="top"> <li> <a accesskey="n" href="#nav" title="Skip to navigation">Skip to navigation</a> </li> <li> <a accesskey="c" href="#page" title="Skip to content">Skip to content</a> </li> </ul> <div id="rhbar"> <a class="jbdevlogo" href="http://www.jboss.org/projects/about"></a> <a class="rhlogo" href="http://www.redhat.com/"></a> </div> <div class="container" id="content"> <nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <div class="navbar-header"> <button aria-expanded="false" class="navbar-toggle collapsed" data-target="#thenavbar" data-toggle="collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <img alt="Infinispan" src="/images/infinispan_nav_brand.png"> </a> </div> <div class="navbar-collapse collapse" id="thenavbar"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/about">About <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/about">Introduction</a></li> <li><a href="/features">Features</a></li> <li><a href="/release-notes">Release notes</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/references">References</a></li> <li><a href="/experiments/">Experiments</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/documentation">Learn <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/documentation">Documentation</a></li> <li><a href="/tutorials">Tutorials</a></li> <li><a href="/videos">Videos</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/download">Download <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/download">Infinispan Releases</a></li> <li><a href="/cache-store-implementations">Cache Store Implementations</a></li> <li><a href="/hotrod-clients">Hot Rod Clients</a></li> <li><a href="/integrations">Integrations</a></li> <li><a href="/download-archive">Archive</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="/community">Community <b class="caret"></b></a> <ul class="dropdown-menu"> <li><a href="/community">Ask for Help</a></li> <li><a href="/getinvolved">Get Involved</a></li> </ul> </li> <li class=""><a href="/roadmap">Road Map</a></li> <li class="divider"></li> </ul> </div> </div> </nav> <div class="post"></div> <h3> Thursday, 21 December 2017 </h3> <h1> <a href="/blog/2017/12/21/2017-busy-year-for-infinispan/">2017: A busy year for Infinispan evangelisation!</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>It&#8217;s been a very busy year from an Infinispan evangelisation perspective, so before the year ends, we wanted to round up the conferences and user groups that featured Infinispan related talks. This is a good opportunity to catch up on what we&#8217;ve been showing in our Infinispan outings:</p> </div> </div> </div> <div class="sect4"> <h5 id="_patterns_dutilisation_de_systèmes_in_memory"><a class="anchor" href="#_patterns_dutilisation_de_systèmes_in_memory"></a>Patterns d’utilisation de systèmes in memory </h5> <div class="paragraph"> <p>by <a href="https://twitter.com/emmanuelbernard">Emmanuel Bernard</a> and Galder Zamarreño @ <a href="http://blog.infinispan.org/2017/04/in-memory-data-grid-patterns-demos-from.html">Devoxx France</a></p> </div> <div class="paragraph"> <p>This was our first outing of the year with Emmanuel and I showing the audience at Devoxx France the different use cases for data grids. This was also the first time we showed swiss train related demos which we&#8217;d improve throughout the year. Slides can be found <a href="https://speakerdeck.com/galderz/patterns-dutilisation-de-systemes-in-memory">here</a> and video below:</p> </div> </div> <div class="sect4"> <h5 id="_big_data_in_action_with_infinispan"><a class="anchor" href="#_big_data_in_action_with_infinispan"></a>Big Data In Action with Infinispan</h5> <div class="paragraph"> <p>by Galder Zamarreño @ <a href="http://blog.infinispan.org/2017/05/reactive-big-data-on-openshift-in.html">Great Indian Developer Summit</a> @ <a href="http://blog.infinispan.org/2017/06/back-from-berlin-buzzwords-video.html">Berlin Buzzwords</a> @ <a href="http://blog.infinispan.org/2017/09/devnation-live-video-and-slides.html">Red Hat DevNation Live</a></p> </div> <div class="paragraph"> <p>In this talk, I focused on the big data related use cases for Infinispan. I showed how Infinispan could be used for near real-time data processing using Continuous Querys, and how to analise data using distributed Java Streams. Slides can be found <a href="https://speakerdeck.com/galderz/big-data-in-action-with-infinispan">here</a> and the demo <a href="https://github.com/infinispan-demos/swiss-transport-datagrid">here</a>. The video from the DevNation talk can be found here:</p> </div> </div> <div class="sect4"> <h5 id="_hacep_highly_available_and_horizontally_scalable_complex_event_processing"><a class="anchor" href="#_hacep_highly_available_and_horizontally_scalable_complex_event_processing"></a>HACEP: Highly available and horizontally scalable complex event processing</h5> <div class="paragraph"> <p>by Ugo Landini, Sanne Grinovero, Andrea Leoncini, Andrea Tarocchi @ Red Hat Summit</p> </div> <div class="paragraph"> <p>In this hands on lab, Ugo et al showed how to build a highly available and scalable complex event processing engine with Red Hat JBoss BRMS and and Red Hat JBoss Data Grid (the commercial supported version of Infinispan). This workshop resulted in unmissable <a href="https://access.redhat.com/documentation/en-us/reference_architectures/2017/html/highly-available_complex_event_processing_with_red_hat_jboss_brms_and_red_hat_jboss_data_grid/highly_available_scalable_complex_event_processing_with_red_hat_jboss_brms">architecture reference guide</a>.</p> </div> </div> <div class="sect4"> <h5 id="_learn_how_to_build_functional_reactive_applications_with_elm_node_js_and_infinispan"><a class="anchor" href="#_learn_how_to_build_functional_reactive_applications_with_elm_node_js_and_infinispan"></a>Learn how to build Functional Reactive Applications with Elm, Node.js and Infinispan</h5> <div class="paragraph"> <p>by Galder Zamarreño @ Great Indian Developer Summit @ <a href="http://blog.infinispan.org/2017/05/j-on-beach-unmissable-conference-for.html">J On The Beach</a></p> </div> <div class="paragraph"> <p>The aim of this talk is to demonstrate how Infinispan&#8217;s Node.js client could be combined with Elm and Infinispan server instances to build a functional reactive application. The talk focused on how build a CRUD application using Elm and Node.js technologies and using Infinispan in-memory data grids for storing and querying information. Slides can be found here:</p> </div> </div> <div class="sect4"> <h5 id="_streaming_data_analysis_with_kubernetes"><a class="anchor" href="#_streaming_data_analysis_with_kubernetes"></a>Streaming Data Analysis with Kubernetes</h5> <div class="paragraph"> <p>by Galder Zamarreño</p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/10/thanks-basel-one-2017.html">Basel One</a></p> </div> <div class="paragraph"> <p>This talk is a spin off of the big data in action talk which focuses on exploring in greater detail how streaming data can be analysed within a Kubernetes orchestrated cluster. The demo can be found <a href="https://github.com/infinispan-demos/streaming-data-kubernetes/tree/baselone-17">here</a> and the slides here:</p> </div> </div> <div class="sect4"> <h5 id="_data_grids_descubre_qué_esconden_los_datos"><a class="anchor" href="#_data_grids_descubre_qué_esconden_los_datos"></a>Data grids : descubre qué esconden los datos</h5> <div class="paragraph"> <p>by Galder Zamarreño</p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/11/back-from-madrid-jug-and-codemotion.html">Madrid Java User Group</a></p> </div> <div class="paragraph"> <p>This talk is a Spanish spin off the analytics part of the big data in action talk. Not only did it showed how to use distributed Java Streams to analyse data with Infinispan, but also demonstrated the capabilities of Spark/Hadoop integrations. The demos can be found <a href="https://github.com/infinispan-demos/swiss-transport-datagrid/blob/codemotion-madrid-17/live-events/madridjug17.md">here</a> and <a href="https://github.com/infinispan/infinispan-spark/blob/master/examples/twitter/README.md">here</a>, and the slides here:</p> </div> </div> <div class="sect4"> <h5 id="_streaming_data_ni_pierdas_el_tren_ni_esperes_en_balde"><a class="anchor" href="#_streaming_data_ni_pierdas_el_tren_ni_esperes_en_balde"></a>Streaming Data : ni pierdas el tren, ni esperes en balde</h5> <div class="paragraph"> <p>by Galder Zamarreño</p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/11/back-from-madrid-jug-and-codemotion.html">Codemotion Madrid</a></p> </div> <div class="paragraph"> <p>A Spanish version of the streaming data analysis talk delivered in Basel One.</p> </div> <div class="paragraph"> <p><strong class="line-through">This talk was recorded, so hoping for the video to be available soon. </strong> <strong>Update (2018/02/02):</strong> The video is now available here:</p> </div> <div class="paragraph"> <p>In the mean time, the demo can be found <a href="https://github.com/infinispan-demos/streaming-data-kubernetes/blob/codemotion-madrid-17/live-coding/codemotion-madrid-17.md">here</a> and the slides here:</p> </div> </div> <div class="sect4"> <h5 id="_streaming_data_workshop"><a class="anchor" href="#_streaming_data_workshop"></a>Streaming Data Workshop</h5> <div class="paragraph"> <p>by Katia Aresti, Thomas Segismont and Galder Zamarreño</p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/11/merci-duchess-et-devoxx.html">Duchess France Meetup</a></p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/11/merci-duchess-et-devoxx.html">Devoxx Belgium</a></p> </div> <div class="paragraph"> <p>@ <a href="http://blog.infinispan.org/2017/11/back-from-madrid-jug-and-codemotion.html">Codemotion Madrid</a></p> </div> <div class="paragraph"> <p>A hands-on workshop showing how to work with streaming data with Infinispan and Vert.x, on top of OpenShift container platform. No videos were recorded but you can follow this workshop step by step following instructions <a href="http://htmlpreview.github.io/?https://github.com/infinispan-demos/streaming-data-workshop/blob/master/workshop-steps/workshop.html">here</a>. The Github repository can be found <a href="https://github.com/infinispan-demos/streaming-data-workshop">here</a> and the latest slides here:</p> </div> <div class="paragraph"> <p>There&#8217;s plenty the to keep you entertained between now and the new year! :)</p> </div> <div class="paragraph"> <p>If you have any doubts about the talks above, or you encounter any issues running the demos, do not hesitate <a href="http://infinispan.org/community/">contacting us</a>! In the mean time, the Infinispan team is working hard on Infinispan 9.2 as well as improving our OpenShift integration.</p> </div> <div class="paragraph"> <p>Cheers,</p> </div> <div class="paragraph"> <p>Galder</p> </div> </div> </div> <em>Posted by Galder Zamarreño on 2017-12-21</em> <br> <em>Tags:</em> <a href="/blog/tags/ conference/"> conference </a> <hr> <div class="post"></div> <h3> Tuesday, 19 December 2017 </h3> <h1> <a href="/blog/2017/12/19/infinispan-911final-released/">Infinispan 9.1.4.Final Released</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Infinispan Community,</p> </div> <div class="paragraph"> <p>We&#8217;re excited to announce the release of Infinispan 9.1.4.Final, which can be found on our download <a href="http://infinispan.org/download/">page</a>.</p> </div> <div class="paragraph"> <p>Full details of the various fixes included in this release can be found <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12336151">here</a>.</p> </div> </div> </div> </div> <em>Posted by Ryan Emerson on 2017-12-19</em> <br> <em>Tags:</em> <a href="/blog/tags/ release/"> release </a> <hr> <div class="post"></div> <h3> Monday, 18 December 2017 </h3> <h1> <a href="/blog/2017/12/18/infinispan-920beta2-released/">Infinispan 9.2.0.Beta2 Released</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Dear Infinispan Community,</p> </div> <div class="paragraph"> <p>We&#8217;re excited to announce the release of Infinispan 9.2.0.Beta2, which can be found on our download <a href="http://infinispan.org/download/">page</a>.</p> </div> <div class="paragraph"> <p>The highlights of 9.2.0.Beta2 are:</p> </div> <div class="ulist"> <ul> <li> <p>MultiMaps are now available over hotrod [<a href="https://issues.jboss.org/browse/ISPN-7887">ISPN-7887</a>].</p> </li> <li> <p>Clustered Counters are now available in the server and can be managed via the management api [<a href="https://issues.jboss.org/browse/ISPN-8376">SPN-8376</a>] or the web console [<a href="https://issues.jboss.org/browse/ISPN-7927">ISPN-7927</a>].</p> </li> <li> <p>Biased reads in scattered cache [<a href="https://issues.jboss.org/browse/ISPN-8458">ISPN-8458</a>].</p> </li> <li> <p>Conflict resolution on partition merges are now implemented for DENY_READ_WRITES and ALLOW_READS strategies [<a href="https://issues.jboss.org/browse/ISPN-8440">ISPN-8440</a>].</p> </li> </ul> </div> <div class="paragraph"> <p>Full details of the new features and enhancements included in this release can be found <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310799&amp;version=12335608">here</a>. Thank you for following us and stay tuned!</p> </div> <div class="paragraph"> <p>The Infinispan Team</p> </div> </div> </div> </div> <em>Posted by Ryan Emerson on 2017-12-18</em> <br> <em>Tags:</em> <a href="/blog/tags/ release/"> release </a> <a href="/blog/tags/beta/"> beta </a> <hr> <div class="post"></div> <h3> Thursday, 14 December 2017 </h3> <h1> <a href="/blog/2017/12/14/first-steps-with-vertx-and-infinispan-push-api/">First steps with Vert.x and Infinispan PUSH API (Part 2)</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Welcome to the second in a multi-part series of blog posts about creating <a href="http://vertx.io/">Eclipse Vert.x</a> applications with <a href="http://infinispan.org/">Infinispan</a>. In the <a href="http://blog.infinispan.org/2017/12/first-steps-with-vertx-and-infinispan-rest-api.html">previous blog post</a> we have seen how to create a REST API. The purpose of this tutorial is to showcase how to create a PUSH API implemented with Vert.x and using Infinispan as a server.</p> </div> <div class="quoteblock"> <blockquote> <div class="paragraph"> <p><em>All the code of this tutorial is available in this <a href="https://github.com/karesti/cute-names">GitHub repository</a>. The backend is a Java project using Maven, so all the needed dependencies can be found in the pom.xml. The front is a super simple react application.</em></p> </div> </blockquote> </div> </div> </div> <div class="sect1"> <h2 id="_push_api"><a class="anchor" href="#_push_api"></a>PUSH API</h2> <div class="sectionbody"> <div class="paragraph"> <p>Creating a REST API is very straightforward. But today, even if we are heavily using REST, we don&#8217;t always want to use request/response or polling, but instead we want to push directly from the server to the client. In this example, we are going to create an API that pushes every new value inserted in the default cache of Infinispan. These values are cute names, as we did in the REST API example.</p> </div> <div class="paragraph"> <p>We are using two features here :</p> </div> <div class="ulist"> <ul> <li> <p>Infinispan client listeners</p> </li> <li> <p>Vert.x bridge between the <a href="http://vertx.io/docs/vertx-core/java/#event_bus">Event Bus</a> and the browser</p> </li> </ul> </div> <div class="paragraph"> <p><a href="http://infinispan.org/docs/stable/user_guide/user_guide.html#_Listeners_and_notifications_section">Infinispan Listeners</a> provide a way to the client get notified when something happens in a cache.</p> </div> <div class="paragraph"> <p>The <a href="http://vertx.io/docs/vertx-web/java/#_sockjs_event_bus_bridge">Event Bus Bridge</a> that connects to the browser, uses <a href="http://sockjs.org/">SockJS</a>. SockJS is a JavaScript library that provides a WebSocket API, but it can be used with browsers that don&#8217;t support web-sockets (see the website of the project for more detailed information). Vert.x supports this library and creates a bridge between your browser and your back-end easily through the Event Bus.</p> </div> <div class="sect2"> <h3 id="_creating_an_event_bus_bridge"><a class="anchor" href="#_creating_an_event_bus_bridge"></a>Creating an Event Bus bridge</h3> <div class="paragraph"> <p>Vert.x is a reactive framework, which means that uses <a href="https://github.com/ReactiveX/RxJava">RxJava</a> too, and provides a fancy API on top of it.</p> </div> <div class="paragraph"> <p>First, we are going to create a new verticle called SendCuteNamesAPI. This verticle extends the CacheAccessVerticle we created in the <a href="http://blog.infinispan.org/2017/12/first-steps-with-vertx-and-infinispan-rest-api.html">previous blog post</a>. CacheAccessVerticle initialises the connection with Infinispan using the <a href="http://infinispan.org/docs/dev/user_guide/user_guide.html#using_hot_rod_server">Hot Rod protocol.</a></p> </div> <div class="paragraph"> <p>Now we need to create a SocketJSHandler. This handler has a method called bridge, where we configure some BridgeOptions. Obviously <strong>we don&#8217;t want the client to be able to read everything</strong> traveling on the event bus, and this won&#8217;t happen. We <strong>configure an address</strong>, <strong>'cute-names'</strong>, and we add the permission to read and write to this address.</p> </div> <div class="paragraph"> <p>This handler is passed to the event bus route, where the path is /eventbus/*.</p> </div> <div class="paragraph"> <p>Finally, we create a http server as we did in the REST API example. The difference is that instead of calling listen method, we call <strong>rxListen</strong> and <strong>subscribe</strong>.</p> </div> </div> <div class="sect2"> <h3 id="_getting_notified_and_publishing"><a class="anchor" href="#_getting_notified_and_publishing"></a>Getting notified and publishing</h3> <div class="paragraph"> <p>Using <a href="http://infinispan.org/docs/stable/user_guide/user_guide.html#_Listeners_and_notifications_section">Infinispan listeners</a> is very easy.</p> </div> <div class="paragraph"> <p>First, we are going to create a class that has the @ClientListener annotation. The client listener has to be added to the cache client configuration. We add a protected method called addConfigToCache that will be called just after the initialisation of the defaultCache in the abstract CacheAccessVerticle. Verticles extending the abstract class can now add custom configuration to the client.</p> </div> <div class="paragraph"> <p>We want to be notified when a new entry is created. In this case, our listener has to contain a method with the @ClientCacheEntryCreated annotation on it. The signature of the method has to include a ClientCacheEntryCreatedEvent&lt;String&gt; parameter. This parameter will hold the 'key' of the entry that has been created.</p> </div> <div class="paragraph"> <p>Finally, we use the key to retrieve the name using the getAsync method and then <strong>publish</strong> the value in the<strong> Vert.x event bus</strong> to the <strong>address </strong>where the <strong>socket listener</strong> is permitted to read <strong>: cute-names</strong>.</p> </div> <div class="paragraph"> <p>Now we can run the main method and whenever we post a new name, we will see in the logs that the client listener is notified!</p> </div> </div> <div class="sect2"> <h3 id="_client_code"><a class="anchor" href="#_client_code"></a>Client code</h3> <div class="paragraph"> <p>We are going to create a super simple react application that will just display hello. React community is <strong>huge</strong>, so there are lot&#8217;s of tutorials out there to create a hello world client application. This application has a single component that displays "Hello".</p> </div> <div class="paragraph"> <p>The react application runs calling npm install and npm start  in <a href="http://localhost:9000/" class="bare">http://localhost:9000/</a>.</p> </div> <div class="paragraph"> <p>Now we need to connect the client to the backend with <strong>SockJS</strong>.<strong> </strong>Vert.x provides a JavaScript library for that: <a href="https://www.npmjs.com/package/vertx3-eventbus-client">vertx3-eventbus-client</a>, built on top of SockJS. We create an EventBus object that will connect to <strong><a href="http://localhost:8082/eventbus" class="bare">http://localhost:8082/eventbus</a></strong> as we configured in the SendCuteNamesAPI. We register a handler on the <strong>'cute-names'</strong> address. The body of the message will contain the new cute name published in the event bus. Every time the handler is called, we update the component&#8217;s state, and it will be rendered.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_wrap_up"><a class="anchor" href="#_wrap_up"></a>Wrap up</h2> <div class="sectionbody"> <div class="paragraph"> <p>We have learned how to create PUSH APIs with Vert.x, powered by Infinispan. The repository has some unit tests. Feedback is more than welcome to improve the code and the provided examples. I hope you enjoyed this tutorial ! On the next tutorials we will talk about <a href="https://github.com/vert-x3/vertx-infinispan">Infinispan as the cluster manager for Vert.x</a>. Stay tuned !</p> </div> </div> </div> </div> <em>Posted by Katia Aresti on 2017-12-14</em> <br> <em>Tags:</em> <a href="/blog/tags/reactive/"> reactive </a> <a href="/blog/tags/listeners/"> listeners </a> <a href="/blog/tags/vert.x/"> vert.x </a> <a href="/blog/tags/push api/"> push api </a> <a href="/blog/tags/react/"> react </a> <hr> <div class="post"></div> <h3> Tuesday, 12 December 2017 </h3> <h1> <a href="/blog/2017/12/12/first-steps-with-vertx-and-infinispan-rest-api/">First steps with Vert.x and Infinispan REST API (Part 1)</a> </h1> <div class="content"> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Welcome to the first in a multi-part series of blog posts about creating <a href="http://vertx.io/">Eclipse Vert.x</a> applications with <a href="http://infinispan.org/">Infinispan</a>. The purpose of this first tutorial is to showcase how to create a REST API.</p> </div> <div class="quoteblock"> <blockquote> <div class="paragraph"> <p><em>All the code of this tutorial is available in this <a href="https://github.com/infinispan-demos/vertx-api">GitHub repository</a>. The backend is a Java project using <a href="https://maven.apache.org/">Maven</a>, so all the needed dependencies can be found in the pom.xml.</em></p> </div> </blockquote> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> <div class="sect1"> <h2 id="_what_is_vert_x"><a class="anchor" href="#_what_is_vert_x"></a>What is Vert.x ?</h2> <div class="sectionbody"> <div class="paragraph"> <p><a href="http://vertx.io/">Vert.x</a> is a tool-kit for building reactive applications on the JVM. It’s an event driven and non blocking tool-kit. It is based on the <a href="http://vertx.io/docs/vertx-core/java/#_reactor_and_multi_reactor">Reactor Pattern</a>, like Node.js, but unlike Node it can easily use all the cores of your machine so you can create highly concurrent and performant applications. Code examples can be found <a href="https://github.com/vert-x3/vertx-examples">in this repository</a>.</p> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> <div class="sect1"> <h2 id="_rest_api"><a class="anchor" href="#_rest_api"></a>REST API</h2> <div class="sectionbody"> <div class="paragraph"> <p>Let’s start creating a simple endpoint that will display a welcome message on '/'. In Vert.x this is done by creating a <strong><a href="http://vertx.io/docs/vertx-core/java/#_verticles">Verticle</a></strong>. A verticle is a unit of deployment and processes incoming events over an event-loop. <a href="https://en.wikipedia.org/wiki/Event_loop">Event-loops</a> are used in asynchronous programming models. I won&#8217;t spend more time here explaining these concepts as this is very well done in this <a href="https://www.youtube.com/watch?v=qL5BGHPXrac">Devoxx Vert.x talk</a> or in the documentation available <a href="http://vertx.io/docs/guide-for-java-devs/">here</a>.</p> </div> <div class="paragraph"> <p>We need to override the start method, create a 'router' so '/' requests can be handled, and finally create a http server.</p> </div> <div class="paragraph"> <p>The most important thing to remember about vert.x, is that <strong>we can NEVER EVER call blocking code</strong> (we will see how to deal with blocking API&#8217;s just after). If we do so, we will <a href="http://vertx.io/docs/vertx-core/java/#golden_rule">block the event loop</a> and we won&#8217;t be able to serve incoming requests properly.</p> </div> <div class="paragraph"> <p>Run the main method, go to your browser to <a href="http://localhost:8081/ and" class="bare">http://localhost:8081/ and</a> we see the welcome message !</p> </div> <div class="sect2"> <h3 id="_connecting_with_infinispan"><a class="anchor" href="#_connecting_with_infinispan"></a>Connecting with Infinispan</h3> <div class="paragraph"> <p>Now we are going to create a <strong>REST API</strong> that uses Infinispan. The purpose here is to post and get names by id. We are going to use the default cache in Infinispan for this example, and we will connect to it remotely. To do that, we are going to use the <a href="http://infinispan.org/hotrod-clients/">Infinispan hotrod protocol</a>, which is the recommended way to do it (but we could use <a href="http://infinispan.org/docs/9.0.x/infinispan_server_guide/infinispan_server_guide.html#_rest">REST</a> or <a href="http://infinispan.org/docs/9.0.x/infinispan_server_guide/infinispan_server_guide.html#_memcached">Memcached</a> protocol too)</p> </div> <div class="sect3"> <h4 id="_start_infinispan_locally"><a class="anchor" href="#_start_infinispan_locally"></a>Start Infinispan locally</h4> <div class="paragraph"> <p>The first thing we are going to do is to run an Infinispan Server locally. We download the Infinispan Server from <a href="http://downloads.jboss.org/infinispan/9.1.3.Final/infinispan-server-9.1.3.Final-bin.zip">here</a>, unzip the downloaded file and run ./bin/standalone.sh. </p> </div> <div class="quoteblock"> <blockquote> <div class="paragraph"> <p><em>If you are using Docker on Linux, you can use the Ihttps://hub.docker.com/r/jboss/infinispan-server/[nfinispan Docker Image Available] easily. If you are using Docker for Mac, at the time of this writing there is an issue with internal IP addresses and they can&#8217;t be called externally. Different workarounds exist to solve the problem, but the easiest thing for this example is simply downloading and running the standalone server locally. We will see how to use the docker image in Openshift just after.</em></p> </div> </blockquote> </div> <div class="paragraph"> <p>The hotrod server is listening in localhost:11222.</p> </div> </div> <div class="sect3"> <h4 id="_connect_the_client_to_the_server"><a class="anchor" href="#_connect_the_client_to_the_server"></a>Connect the client to the server</h4> <div class="paragraph"> <p>The code we need to connect with Infinispan from our java application is the following :</p> </div> <div class="paragraph"> <p>This code <strong>is blocking</strong>. As I said before, <strong>we can&#8217;t block the event loop</strong> and this will happen if we directly call these API&#8217;s from a verticle. The code must be called using <a href="http://vertx.io/docs/vertx-core/java/#blocking_code">vertx.executeBlocking</a> method, and passing a Handler. The code in the handler will be executed from a worker thread pool and will pass the result back asynchronously. Instead of overriding the start method, we are going to override start(Future&lt;Void&gt; startFuture). This way, we are going to be able to handle errors.</p> </div> <div class="paragraph"> <p>To stop the client, the API supplies a non blocking method that can be called when the verticle is stopped, so we are safe on that.</p> </div> <div class="paragraph"> <p>We are going to create an abstract CacheAccessVerticle where we will initialise the manager and get default cache. When everything is correct and the defautCache variable is initialised, we will log a message and execute the initSuccess abstract method.</p> </div> </div> </div> <div class="sect2"> <h3 id="_rest_api_to_create_names"><a class="anchor" href="#_rest_api_to_create_names"></a>REST API to create names</h3> <div class="paragraph"> <p>We are going to add 3 new endpoints.</p> </div> <div class="ulist"> <ul> <li> <p>GET /api displays the API name</p> </li> <li> <p>POST /api/cutenames creates a new name</p> </li> <li> <p>GET /api/cutenames/id displays a name by id</p> </li> </ul> </div> <div class="paragraph"> <p>CuteNamesRestAPI verticle can now extend this class and override the initSuccess method instead of the start method.</p> </div> <div class="sect3"> <h4 id="_post"><a class="anchor" href="#_post"></a>POST</h4> <div class="paragraph"> <p>Our goal is to use a curl to create a name like this :</p> </div> <div class="paragraph"> <p>curl -X POST \  -H "Content-Type: application/json" \ -d '\{"name":"Oihana"}' "http://localhost:8081/api/cutenames"</p> </div> <div class="literalblock"> <div class="content"> </div> </div> <div class="quoteblock"> <blockquote> <div class="paragraph"> <p><em>For those that are not familiar with basques names, Oihana means 'rainforest' and is a super cute name. Those who know me will confirm that I&#8217;m absolutely not biased making this statement.</em></p> </div> </blockquote> </div> <div class="paragraph"> <p>To read the body content, we need to <strong>add a body handler</strong> to the route, otherwise the body won&#8217;t be parsed. This is done by calling router.route().handler(BodyHandler.create()).</p> </div> <div class="paragraph"> <p>The handler that will handle the post method in '/api/cutenames' is a RoutingContext handler. We want to create a new name in the default cache. For that, we will call putAsync method from the <strong>defaultCache</strong>.</p> </div> <div class="paragraph"> <p>The server responds 201 when the name is correctly created, and 400 when the request is not correct.</p> </div> </div> <div class="sect3"> <h4 id="_get_by_id"><a class="anchor" href="#_get_by_id"></a>GET by id</h4> <div class="paragraph"> <p>To create a get endpoint by id, we need to declare a route that will take a parameter :id. In the route handler, we are going to call getAsync method.</p> </div> <div class="paragraph"> <p>If we run the main, we can POST and GET names using curl !</p> </div> <div class="paragraph"> <p> curl -X POST -H "Content-Type: application/json" \  -d '\{"id":"42", "name":"Oihana"}' \  "http://localhost:8081/api/cutenames" </p> </div> <div class="paragraph"> <p><strong>Cute name added </strong></p> </div> <div class="paragraph"> <p> curl -X GET -H "Content-Type: application/json" \  "http://localhost:8081/api/cutenames/42" * \{"name":"Oihana"}*</p> </div> <div class="paragraph"> <p>==</p> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_wrap_up"><a class="anchor" href="#_wrap_up"></a>Wrap up</h2> <div class="sectionbody"> <div class="paragraph"> <p>We have learned how to create a REST API with Vert.x, powered by Infinispan. The repository has some unit tests using the <a href="http://vertx.io/docs/vertx-web-client/java/">web client</a>. Feedback is more than welcome to improve the code and the provided examples. I hope you enjoyed this tutorial ! On the next tutorial you will learn how to create a <a href="http://blog.infinispan.org/2017/12/first-steps-with-vertx-and-infinispan-push-api.html">PUSH API</a>.</p> </div> </div> </div> </div> <em>Posted by Katia Aresti on 2017-12-12</em> <br> <em>Tags:</em> <a href="/blog/tags/vert.x/"> vert.x </a> <a href="/blog/tags/rest/"> rest </a> <a href="/blog/tags/API/"> API </a> <hr> <div class="pagination-links"><a href="/blog/page/16/" class="previous-link">Previous</a> <a href="/blog/" class="page-link">1</a> <a href="/blog/page/2/" class="page-link">2</a> <span class="skip">...</span><a href="/blog/page/16/" class="page-link">16</a> <span class="current-page">17</span> <a href="/blog/page/18/" class="page-link">18</a> <span class="skip">...</span><a href="/blog/page/112/" class="page-link">112</a> <a href="/blog/page/113/" class="page-link">113</a> <a href="/blog/page/18/" class="next-link">Next</a> </div> </div> <footer class="container"> <hr> <div class="row"> <div class="col-md-2 col-md-offset-1"> <h4>Navigate</h4> <ul> <li> <a href="/about" title="About">About</a> </li> <li> <a href="/documentation" title="Learn">Learn</a> </li> <li> <a href="/community" title="Community">Community</a> </li> <li> <a href="/getinvolved" title="Get Involved">Get Involved</a> </li> <li> <a href="/download" title="Download">Download</a> </li> </ul> </div> <div class="col-md-2"> <h4>Contribute</h4> <ul> <li> <a href="https://issues.jboss.org/browse/ISPN" title="Submit a bug">Submit a bug</a> </li> <li> <a href="https://github.com/infinispan" title="Write code">Write Code</a> </li> </ul> <h4>Follow Us</h4> <ul> <li> <a href="https://infinispan.org/blog/" title="Blog">Blog</a> </li> <li> <a href="https://twitter.com/infinispan" title="Twitter">Twitter</a> </li> </ul> </div> <div class="col-md-2"> <h4>Open Source</h4> <p> Infinispan is released under the <b>Apache 2.0 open source license.</b> Learn more about the Apache 2.0 license <a href="https://www.apache.org/licenses/LICENSE-2.0">here.</a> </p> </div> <div class="col-md-2"> <h4>A member of</h4> <a alt="CloudTM" href="http://www.cloudtm.eu/" target="_NEW"> <img src="/images/cloudtm.png"> </a> <a alt="LEADS" href="http://leads-project.eu/" target="_NEW"> <img src="/images/leads.png"> </a> <a alt="CloudButton" href="http://cloudbutton.eu/" target="_NEW"> <img src="/images/cloudbutton.png"> </a> </div> <div class="col-md-2"> <h4>Thanks to</h4> <p>JetBrains Intellij IDEA</p> <a alt="JetBrains Intellij IDEA" href="https://www.jetbrains.com/idea/" target="_NEW"> <img src="/images/icon_IntelliJIDEA.png"> </a> </div> </div> <div class="col-md-10"> <p style="margin-top: 5px; font-size: 80%;"> © Copyright 2009-2019 Red Hat, Inc. <br> <i class="icon-fire"></i> Made with <a href="https://github.com/jbossorg/bootstrap-community" style="text-decoration: underline;" target="_NEW">JBoss Community Bootstrap</a> and <a href="http://awestruct.org/" style="text-decoration: underline;" target="_NEW">Awestruct</a> <br> <i class="icon-globe"></i> This website is open source! If you want to improve it, <a href="https://github.com/infinispan/infinispan.github.io" style="text-decoration: underline;" target="_NEW">fork the project,</a> and hack on it, then send a pull request. You can also view the <a href="https://www.seethestats.com/site/infinispan.org" style="text-decoration: underline;" target="_NEW">visitor stats.</a> <br> <i class="icon-share"></i> Website and documentation released under <a href="https://creativecommons.org/licenses/by/3.0/" style="text-decoration: underline;" target="_NEW">CC BY 3.0.</a> </p> </div> </footer> <div class="container" id="companyfooter"> <div class="redhatlogo"> <div id="logospacer"></div> <a href="http://www.redhat.com/"><img src="//static.jboss.org/theme/images/common/redhat_logo.png"></a> </div> </div> <span class="backToTop"> <a href="#top">back to top</a> </span> <script src="//static.jboss.org/theme/js/libs/bootstrap-community/3.2.0.2/bootstrap-community.min.js"></script> <script>
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
        }
      </script> </div> </body> </html>