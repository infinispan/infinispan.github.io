<!DOCTYPE html>
<html>

<head>
  <title>Infinispan Spark connector 0.1 released!</title>
  <!-- <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.2/styles/github.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.2/highlight.min.js"></script>
  <script charset="UTF-8"
          src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.2/languages/java.min.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<!--   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125236544-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
 
    gtag('config', 'UA-125236544-1');
  </script> -->


</head>

<body class="blog">
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
  <div class="container">
    <div class="logo-wrapper">
        <a href="/"><img src="/assets/images/infinispan-logo-white.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/learn/">Learn <i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/introduction" class="">Introduction</a></li>
          <li><a href="/features" class="">Features</a></li>
          <li><a href="/documentation" class="">Documentation</a></li>
          <li><a href="/tutorials" class="">Tutorials</a></li>
          <li><a href="/videos" class="">Videos</a></li>
          <li><a href="/references" class="">References</a></li>
          <li><a href="/experiments" class="">Experiments</a></li>
          <li><a href="/roadmap" class="">Roadmap</a></li>
        </ul>
      </li>
      <li>
        <a href="/use-cases/" class="">Use Cases</a>
      </li>
      <li>
        <a href="/community/" class="">Community</a>
      </li>
      <li>
        <a href="/blog/" class="active">Blog</a>
      </li>
      <li>
        <a href="/download/" class="">Download</a>
      </li>
    </ul>
  </div>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    
<div class="component-slim full-width-bg dark-bg light-blue">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <a href="/blog">Blogs</a>  <i class="fas fa-chevron-right"></i> Infinispan Spark connector 0.1 released!
    </div>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="grid__item width-10-12 width-12-12-m doc-content">
    <h1>Infinispan Spark connector 0.1 released!</h1>
    <div class="post-date">August 17, 2015
      Tags: <a href="/blog/tag/release">release</a> <a href="/blog/tag/spark">spark</a> 
    </div>
    <div class="grid-wrapper">
      <div class="grid__item width-8-12 width-12-12-m margin-tb-sm">
        <div class="grid-wrapper">
          <div class="width-2-12 justify-self-center align-self-center">
            <img src="/assets/images/blog/authors/gustavo.jpg">
          </div>
          <div class="width-10-12 align-self-center">
            <p class="byline">By Gustavo Fernandes</p>
          </div>
        </div>
      </div>
      <div class="grid__item width-12-12">
          <div class="paragraph">
<p>Dear users,</p>
</div>
<div class="paragraph">
<p>The Infinispan connector for Apache Spark has just been made available
as a <a href="http://spark-packages.org/package/infinispan/infinispan-spark">Spark
Package</a>!</p>
</div>
<div class="sect3">
<h4 id="what-is-it">What is it?</h4>
<div class="paragraph">
<p>The Infinispan Spark connector allows tight integration with Apache
Spark, allowing Spark jobs to be run against data stored in the
Infinispan Server, exposing any cache as an RDD, and also writing data
from any key/value RDD to a cache. It&#8217;s also possible to create a
DStream backed by cache events and to save any key-value DStream to a
cache.</p>
</div>
<div class="paragraph">
<p>The minimum version required is Infinispan 8.0.0.Beta3.</p>
</div>
</div>
<div class="sect3">
<h4 id="giving-it-a-spin-with-docker">Giving it a spin with Docker</h4>
<div class="paragraph">
<p>A handy docker image that contains an Infinispan cluster co-located with
an Apache Spark standalone cluster is the fastest way to try the
connector. Start by launching the container that hosts the Spark
Master:</p>
</div>
<div class="paragraph">
<p>And then run as many worker nodes as you want:</p>
</div>
</div>
<div class="sect3">
<h4 id="using-the-shell">Using the shell</h4>
<div class="paragraph">
<p>The Apache Spark shell is a convenient way to quickly run jobs in an
interactive fashion. Taking advantage of the fact that Spark is already
installed in the docker containers (and thus the shell), let&#8217;s attach to
the master:</p>
</div>
<div class="paragraph">
<p>Once inside, a Spark shell can be launched by:</p>
</div>
<div class="paragraph">
<p>That&#8217;s all it&#8217;s needed. The shell grabs the Infinispan connector and its
dependencies from spark-packages.org and exposes them in the
classpath.</p>
</div>
</div>
<div class="sect3">
<h4 id="generating-data-and-writing-to-infinispan">Generating data and writing to Infinispan</h4>
<div class="paragraph">
<p>Let&#8217;s obtain a list of words from the Linux dictionary, and generate 1k
random 4-word phrases. Paste the commands in the shell:</p>
</div>
<div class="paragraph">
<p>From the phrases, we&#8217;ll create a key value RDD (Long, String):</p>
</div>
<div class="paragraph">
<p>To save to Infinispan:</p>
</div>
</div>
<div class="sect3">
<h4 id="obtaining-facts-about-data">Obtaining facts about data</h4>
<div class="paragraph">
<p>To be able to explore data in the cache, the first step is to create an
infinispan RDD:</p>
</div>
<div class="paragraph">
<p>As an example job, let&#8217;s calculate a histogram showing the distribution
of word lengths in the phrases. This is simply a sequence of
transformations expressed by:</p>
</div>
<div class="paragraph">
<p>This pipeline yields:</p>
</div>
<div class="paragraph">
<p>2 chars words: 10 occurrences
3 chars words: 37 occurrences
4 chars words: 133 occurrences
5 chars words: 219 occurrences
6 chars words: 373 occurrences
7 chars words: 428 occurrences
8 chars words: 510 occurrences
9 chars words: 508 occurrences
10 chars words: 471 occurrences
11 chars words: 380 occurrences
12 chars words: 309 occurrences
13 chars words: 238 occurrences</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s find similar words using the
<a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance
algorithm</a>. For that we need to define a function that will calculate
the edit distance between two strings. As usual, paste in the shell:</p>
</div>
<div class="paragraph">
<p>Empowered by the Levenshtein distance implementation, we need another
function that given a word, will find in the cache similar words
according to the provided maximum edit distance:</p>
</div>
<div class="paragraph">
<p>Sample usage:</p>
</div>
</div>
<div class="sect3">
<h4 id="where-to-go-from-here">Where to go from here</h4>
<div class="paragraph">
<p>And that concludes this first post on Infinispan-Spark integration. Be
sure to check the
<a href="https://github.com/infinispan/infinispan-spark/tree/master/examples/twitter">Twitter
demo</a> for non-shell usages of the connector, including Java and Scala
API.</p>
</div>
<div class="paragraph">
<p>And it goes without saying, your feedback is much appreciated! :)</p>
</div>
</div>
          
      </div>
      <div class="grid__item width-12-12">
        <h2>Get it, Use it, Ask us! </h2>
We’re hard at work on new features, improvements and fixes, so watch this space for more announcements!
<div class="paragraph">
    <p>Please, <a href="/download" target="_blank">download</a> and test the latest release.</p>
</div>
<div class="paragraph">
    <p>The source code is hosted on <a href="" target="_blank">GitHub</a>.
        If you need to report a bug or request a new feature, look for a similar one on our <a href="https://jira.jboss.org/browse/ISPN" target="_blank">JIRA issues tracker</a>.
        If you don’t find any, <a href="https://jira.jboss.org/browse/ISPN" target="_blank">create a new issue</a>.</p>
</div>
<div class="paragraph">
    <p>If you have questions, are experiencing a bug or want advice on using Infinispan,
        you can use <a href="https://stackoverflow.com/questions/tagged/?tagnames=infinispan&sort=newest"
                       target="_blank">StackOverflow</a>.
        We will do our best to answer you as soon as we can.</p>
</div>
<div class="paragraph">
    <p>The Infinispan community uses <a href="https://zulipchat.com/"
                                        target="_blank">Zulip</a> for real-time communications.
        Join us using either a web-browser or a <a href="https://infinispan.zulipchat.com/apps/" target="_blank">dedicated
            application</a> on the <a href="https://infinispan.zulipchat.com/" target="_blank">Infinispan chat</a>.</p>
</div>
      </div>
      
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/infinispan-logo.png" class="project-logo" title="Infinispan Logo"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Infinispan is released under the Apache 2.0 open source license. Learn more about the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a>.<br/><br/>This website built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/infinispan/infinispan.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <b>Navigation</b>
        <ul class="footer-links width-1-12">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/features">Features</a></li>
          
            <li><a href="/documentation">Docs</a></li>
          
            <li><a href="/tutorials">Tutorials</a></li>
          
            <li><a href="/videos">Videos</a></li>
          
            <li><a href="/use-cases">Use Cases</a></li>
          
            <li><a href="/community">Community</a></li>
          
            <li><a href="/download">Download</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Contribute</b>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/ISPN">Submit a Bug</a></li>
          
            <li><a href="https://github.com/infinispan">Write Code</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <b>Follow Us</b>
        <ul class="footer-links width-1-12">
          
            <li><a href="/blog">Blog</a></li>
          
            <li><a href="https://twitter.com/infinispan">Twitter</a></li>
          
        </ul>
      </div>
    

    <div class="width-6-12 more-links">
      <div class="grid-wrapper">
        <div class="width-6-12">
          <b>A Member of</b><br/>
          <a href="http://www.cloudtm.eu/" target="_blank"><img src="/assets/images/footer/cloud-tm.png"></a>
          <img src="/assets/images/footer/leads.png">
          <br/>
          <a href="http://cloudbutton.eu/" target="_blank"><img src="/assets/images/footer/cloud-button.png"></a>

        </div>
        <div class="width-6-12">

          <b>Thanks to</b><br/>
          <a href="https://www.jetbrains.com/idea/" target="_blank">JetBrains Intellj IDEA</a><br/>
          <a href="https://www.jetbrains.com/idea/" target="_blank"><img src="/assets/images/footer/jetbrains.png">
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
  <div class="content-slim redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
      | <a href="https://www.redhat.com/en/about/privacy-policy">Red Hat Privacy Policy</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/truncate-list.js"></script>

<!--   <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script> -->
</body>

</html>
