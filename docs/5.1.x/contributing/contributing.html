<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="generator" content="Asciidoctor 0.1.4"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Contributing to Infinispan</title> <style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style> <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css"> <style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style> </head> <body class="book toc2 toc-left"> <div id="header"> <h1>Contributing to Infinispan</h1> <div id="toc" class="toc2"> <div id="toctitle">Table of Contents</div> <ul class="sectlevel0"> <li><a href="#_the_basics">The Basics</a></li> <li> <ul class="sectlevel1"> <li><a href="#_prequisites">1. Prequisites</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-IssueManagementJIRA">2. Issue Management - JIRA</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-VersioningGuidelines">2.1. Versioning Guidelines</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-SourcecontrolGit">2.2. Source control - Git</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-SettingupyourIDE">2.2.1. Setting up your IDE</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-BuildMaven">2.3. Build - Maven</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-ContinuousIntegrationJenkinsonCloudbees">2.3.1. Continuous Integration - Jenkins on Cloudbees</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-TestingTestNG">2.4. Testing - TestNG</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-CommunicatingwithotherInfinispancontributors">2.5. Communicating with other Infinispan contributors</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-StyleRequirements">2.6. Style Requirements</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Spelling">2.6.1. Spelling</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Licenseheader">2.6.2. License header</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Checkincomments">2.6.3. Check-in comments</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-Configuration">2.7. Configuration</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Logging">2.8. Logging</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-SourceControl">3. Source Control</a></li> <li> <ul class="sectlevel2"> <li><a href="#sid-18645209_ContributingtoInfinispan-Prerequisitesx">3.1. requisites</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Repositories">3.2. Repositories</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Roles">3.3. Roles</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-OccasionalContributor">3.3.1. Occasional Contributor</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-FrequentContributor">3.3.2. Frequent Contributor</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-ProjectAdmin">3.3.3. Project Admin</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-Committingyourwork">3.4. Committing your work</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Releasebranches">3.4.1. Release branches</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Topicbranches">3.4.2. Topic branches</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Comments">3.4.3. Comments</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Commits">3.4.4. Commits</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-Keepingyourrepoinsyncwithupstream">3.5. Keeping your repo in sync with upstream</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Ifyouhaveclonedupstream">3.5.1. If you have cloned upstream</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Ifyouhaveforkedupstream">3.5.2. If you have forked upstream</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-Tipsonenhancinggit">3.6. Tips on enhancing git</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Autocompletions">3.6.1. completions</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Terminalcolours">3.6.2. Terminal colours</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Aliases">3.6.3. Aliases</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-VisualHistory">3.6.4. Visual History</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Visualdiffandmergetools">3.6.5. Visual diff and merge tools</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-ChoosinganEditor">3.6.6. Choosing an Editor</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Shellprompt">3.6.7. Shell prompt</a></li> </ul> </li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-BuildingInfinispan">4. Building Infinispan</a></li> <li> <ul class="sectlevel2"> <li><a href="#sid-18645209_ContributingtoInfinispan-Requirements">4.1. Requirements</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Quickcommandreference">4.2. Quick command reference</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-PublishingreleasestoMaven">4.3. Publishing releases to Maven</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Publishingsnapshots">4.3.1. Publishing snapshots</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Publishingreleases">4.3.2. Publishing releases</a></li> </ul> </li> <li><a href="#sid-18645209_ContributingtoInfinispan-TheMavenArchetypes">4.4. The Maven Archetypes</a></li> <li> <ul class="sectlevel3"> <li><a href="#sid-18645209_ContributingtoInfinispan-Startinganewproject">4.4.1. Starting a new project</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-WritingatestcaseforInfinispan">4.4.2. Writing a test case for Infinispan</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-Versions">4.4.3. Versions</a></li> <li><a href="#sid-18645209_ContributingtoInfinispan-SourceCode">4.4.4. Source Code</a></li> </ul> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div id="content"> <h1 id="_the_basics" class="sect0"><a class="anchor" href="#_the_basics"></a>The Basics</h1> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> In this chapter we quickly walk through the basics on contributing; future chapters go into more depth. </td> </tr> </table> </div> <div class="sect1"> <h2 id="_prequisites"><a class="anchor" href="#_prequisites"></a>1. Prequisites</h2> <div class="sectionbody"> <table class="tableblock frame-all grid-all" style="width:100%; "> <colgroup> <col style="width:50%;"> <col style="width:50%;"> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">Java 1.6</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Infinispan is baselined on Java 6.0, and is built and tested using Sun Java 6.0.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">Maven 3</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Infinispan build uses Maven, and we recommend using Maven 3.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">Git <em>(optional)</em></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Infinispan sources are stored in Git. If you don&#8217;t wish to install Git, you can download source bundles</p></td> </tr> </tbody> </table> </div> </div> <div class="sect1"> <h2 id="sid-18645209_ContributingtoInfinispan-IssueManagementJIRA"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-IssueManagementJIRA"></a>2. Issue Management - JIRA</h2> <div class="sectionbody"> <div class="paragraph"> <p>Infinispan uses JIRA for issue management, hosted on <a href="http://issues.jboss.org/browse/ISPN">issues.jboss.org</a> . You can log in using your normal jboss.org username and password.</p> </div> <div class="paragraph"> <p>If you need to create a new issue then follow these steps.</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Choose between</p> <div class="ulist"> <ul> <li> <p><em>Feature Request</em> if you want to request an enhancement or new feature for Infinispan</p> </li> <li> <p><em>Bug</em> if you have discovered an issue</p> </li> <li> <p><em>Task</em> if you wish to request a documentation, sample or process (e.g. build system) enhancement or issue</p> </li> </ul> </div> </li> <li> <p>Then enter a <em>Summary</em> , describing briefly the problem - please try to be descriptive!</p> </li> <li> <p>You should not set <em>Priority</em> .</p> </li> <li> <p>Now, enter the version you are reporting an issue against in the <em>Affects Version</em> field, and leave the <em>Fix Version</em> field blank.</p> </li> <li> <p>In the <em>Environment</em> text area, describe in as much detail as possible your environment (e.g. Java runtime and version, operating system, any network topology which is relevant).</p> </li> <li> <p>In the <em>Description</em> field enter a detailed description of your problem or request.</p> </li> <li> <p>If the issue has been discussed on the forums or the mailing list, enter a reference in the <em>Forum Reference</em> field</p> </li> <li> <p>Finally, hit <em>Create</em></p> </li> </ol> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-VersioningGuidelines"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-VersioningGuidelines"></a>2.1. Versioning Guidelines</h4> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="icon-warning" title="Warning"></i> </td> <td class="content"> <div class="literalblock"> <div class="content"> <pre>Only Infinispan contributors should set the _Fix Version_ field.</pre> </div> </div> </td> </tr> </table> </div> <div class="paragraph"> <p>When setting the <em>Fix Version</em> field for bugs and issues in JIRA, the following guidelines apply:</p> </div> <div class="paragraph"> <p>Version numbers are defined as MAJOR.MINOR.MICRO.MODIFIER. For example, 4.1.0.BETA1 would be:</p> </div> <table class="tableblock frame-all grid-all" style="width:100%; "> <colgroup> <col style="width:50%;"> <col style="width:50%;"> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">MAJOR</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">MINOR</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">MICRO</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">MODIFIER</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">BETA1</p></td> </tr> </tbody> </table> <div class="literalblock"> <div class="content"> <pre>If the issue relates to a Task or Feature Request, please ensure that the .FINAL version is included in the Fixed In field.  For example, a new feature should contain 4.1.0.BETA1, 4.1.0.FINAL if it is new for 4.1.0 and was first made public in BETA1.  For example, see link:$$https://issues.jboss.org/browse/ISPN-299$$[ISPN-299] .</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>If the issue relates to a bug which affected a previous FINAL version, then the Fixed In field should also contain the .FINAL version which contains the fix, in addition to any ALPHA, BETA or CR release.  For example, see link:$$https://issues.jboss.org/browse/ISPN-546$$[ISPN-546] . If the issue pertains to a bug in the current release, then the .FINAL version should not be in the Fixed In field.  For example, a bug found in 4.1.0.ALPHA2 (but not in 4.1.0.ALPHA1) should be marked as fixed in 4.1.0.ALPHA3, but not in 4.1.0.FINAL.  For example, see link:$$https://issues.jboss.org/browse/ISPN-416$$[ISPN-416] .</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-SourcecontrolGit"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-SourcecontrolGit"></a>2.2. Source control - Git</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan uses link:$$http://git-scm.com$$[git] , hosted on link:$$http://github.com$$[GitHub] , for version control. You can find the upstream git repository at link:$$https://github.com/infinispan$$[] . To clone the repository:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
$ git clone git@github.com:infinispan/infinispan.git
</pre> </div> </div> <div class="paragraph"> <p>or to clone your fork:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git clone git@github.com:YOUR_GITHB_USERNAME/infinispan.git
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>For more information, read &lt;&lt;sid-18645215,the Git chapter&gt;&gt; .</pre> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-SettingupyourIDE"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-SettingupyourIDE"></a>2.2.1. Setting up your IDE</h4> <div class="paragraph"> <p>Maven supports generating IDE configuration files for easy setup of a project. Tested are Eclipse, IntelliJ IDEA and Netbeans.</p> </div> <div class="paragraph"> <p>Before we import the project, we need to clone the project as described above.</p> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Eclipse"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Eclipse"></a>Eclipse</h5> <div class="olist arabic"> <ol class="arabic"> <li> <p>Install the m2eclipse plugin if you have not already installed it. Eclipse is including it since version "Indigo" 3.7, for older versions follow instructions at <a href="http://eclipse.org/m2e/">http://eclipse.org/m2e/</a> .</p> </li> <li> <p>Import the Infinispan maven project. Select File -&gt; Import in your eclipse workbench. Select the Existing Maven Project importer.</p> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Select the root directory of your Infinispan checkout.</p> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Select Infinispan modules that you want to import.</p> </li> <li> <p>Finally, from Infinispan 5.0 onwards, annotation processing is used to allow log messages to be internationalized. This processing can be done directly from Eclipse as part of compilation but it requires some set up:</p> </li> <li> <p>Open the properties for infinispan-core and locate Annotation Processing</p> </li> <li> <p>Tick Enable project specific settings</p> </li> <li> <p>Enter target/generated-sources/annotations as the Generated source directory</p> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="literalblock"> <div class="content"> <pre>Code Formatting. From the menu Window-&amp;gt;Preferences-&amp;gt; select Java -&amp;gt; Code Style -&amp;gt; Formatter. Import link:$$https://github.com/infinispan/infinispan/blob/master/ide-settings/eclipse/formatter.xml$$[formatter.xml] Code template. From the menu Window-&amp;gt;Preferences-&amp;gt; select Java -&amp;gt; Code Style -&amp;gt;  Code Templates. Import link:$$https://github.com/infinispan/infinispan/blob/master/ide-settings/eclipse/codetemplates.xml$$[codetemplates.xml]</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>As some modules use Scala, it's worth installing the link:$$http://www.scala-lang.org/node/94$$[Scala tools] .</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-IntelliJIDEA"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-IntelliJIDEA"></a>IntelliJ IDEA</h5> <div class="paragraph"> <p>IntelliJ&#8217;s built-in Maven support is the best way to go. From IntelliJ 9 onwards, this is a robust and reliable mechanism to import a project from Maven.</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Create a new project in IntelliJ</p> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>And choose to import the project from an external model</p> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>When asked, point the wizard to the directory created when you cloned the repository</p> </li> <li> <p>Make sure that the check-boxes for "Search for projects recursively" and "Create module groups for multi-module Maven projects" are checked.</p> </li> <li> <p>Just follow through the rest of the steps in the wizard and you&#8217;re good to go.</p> </li> <li> <p>Finally, from Infinispan 5.0 onwards, annotation processing is used to allow log messages to be internationalized. This processing can be done directly from IntelliJ as part of compilation but it requires some set up:</p> <div class="ulist"> <ul> <li> <p>Go to "Preferences/Compiler/Annotation Processor" and click on <em>Enable annotation processing</em></p> </li> <li> <p>Add an annotation processor with "Processor FQN Name" as org.jboss.logging.LoggingToolsProcessor</p> </li> <li> <p>In "Processed Modules", add all modules except the root and the parent modules.</p> </li> </ul> </div> </li> </ol> </div> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="paragraph"> <p>IntelliJ has built in Scala support, just make sure the Scala module is installed.</p> </div> <div class="literalblock"> <div class="content"> <pre>IntelliJ related code style jar is at link:$$https://github.com/infinispan/infinispan/blob/master/ide-settings/intellij/IntelliJ_IDEA_Code_Style.jar$$[idea-code-style.jar]</pre> </div> </div> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-BuildMaven"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-BuildMaven"></a>2.3. Build - Maven</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan uses link:$$http://maven.apache.org/$$[Maven] for builds. Make sure you have Maven 3 installed, and properly configured. For more information, read &lt;&lt;sid-18645215,the Maven chapter&gt;&gt; .</pre> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-ContinuousIntegrationJenkinsonCloudbees"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-ContinuousIntegrationJenkinsonCloudbees"></a>2.3.1. Continuous Integration - Jenkins on Cloudbees</h4> <div class="literalblock"> <div class="content"> <pre>Infinispan uses Jenkins on Cloudbees for continuous integration. Jenkins polls GitHub for updates and runs whenever updates are available. For more information view link:$$http://www.jboss.org/infinispan/build.html$$[the project site] .</pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-TestingTestNG"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-TestingTestNG"></a>2.4. Testing - TestNG</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan uses TestNG for unit and functional tests, and all Infinispan tests are run in parallel. For more information see &lt;&lt;sid-18645211,the Test Suite chapter&gt;&gt; ; this chapter gives advice on writing tests which can safely execute in parallel.</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-CommunicatingwithotherInfinispancontributors"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-CommunicatingwithotherInfinispancontributors"></a>2.5. Communicating with other Infinispan contributors</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan contributors use a mix of link:$$http://www.jboss.org/infinispan/mailinglists$$[mailings lists] and link:$$http://www.jboss.org/infinispan/community.html$$[IRC] to communicate ideas and designs, with more detailed designs often making their way into link:$$http://community.jboss.org/$$[wiki pages] .</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-StyleRequirements"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-StyleRequirements"></a>2.6. Style Requirements</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan uses the link:$$http://en.wikipedia.org/wiki/Indent_style#K.26R_style$$[K&amp;amp;R code style] for all Java source files, with two exceptions:</pre> </div> </div> <div class="ulist"> <ul> <li> <p>use 3 spaces instead of a tab character for indentations.</p> </li> <li> <p>braces start on the same line for class, interface and method declarations as well as code blocks.</p> <div class="literalblock"> <div class="content"> <pre>In addition, sure all link:$$http://en.wikipedia.org/wiki/Newline$$[new line characters] used must be LF (UNIX style line feeds). Most good IDEs allow you to set this, regardless of operating system used.</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>All patches or code committed must adhere to this style. Code style settings which can be imported into IntelliJ IDEA and Eclipse are committed in the project sources, in link:$$https://github.com/infinispan/infinispan/blob/master/ide-settings/$$[ide-settings] .</pre> </div> </div> </li> </ul> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Spelling"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Spelling"></a>2.6.1. Spelling</h4> <div class="literalblock"> <div class="content"> <pre>Ensure correct spelling in code, comments, Javadocs, etc. (use _American English_ spelling). It is recommended that you use a spellchecker plugin for your IDE.</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Licenseheader"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Licenseheader"></a>2.6.2. License header</h4> <div class="literalblock"> <div class="content"> <pre>All source files must have up-to-date license headers as described in link:$$http://community.jboss.org/docs/16352$$[Copyright Ownership and Licenses] . Never remove existing headers or copyrights.</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Checkincomments"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Checkincomments"></a>2.6.3. Check-in comments</h4> <div class="literalblock"> <div class="content"> <pre>Please ensure any commit comments use link:$$https://docs.jboss.org/author/pages/viewpage.action?pageId=18645271_InfinispanandGitHub-Comments$$[this format] if related to a task or issue in JIRA. This helps JIRA pick out these checkins and display them on the issue, making it very useful for back/forward porting fixes. If your comment does not follow this format, your commit may not be merged into upstream.</pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Configuration"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Configuration"></a>2.7. Configuration</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan offers both programmatic configuration and XML configuration. For more information read the &lt;&lt;sid-18645216,Configuration&gt;&gt; chapter.</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Logging"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Logging"></a>2.8. Logging</h3> <div class="literalblock"> <div class="content"> <pre>From Infinispan 5.0 onwards, Infinispan uses JBoss Logging to abstract over the logging backend. Infinispan supports localization of log message for categories of INFO or above as explained in link:$$http://community.jboss.org/docs/16738$$[the JBoss Logging guidelines] . As a developer, this means that for each INFO , WARN , ERROR , FATAL message your code emits, you need to modify the Log class in your module and add an explicit method for it with the right annotations. For example:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
@LogMessage(level = INFO)
@Message(value = "An informative message: %s - %s", id = 600)
void anInformativeMessage(String param1, String param2);
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>And then, instead of calling log.info(...) , you call the method, for example log.anInformativeMessage(param1, param2) . If what you're trying to log is an error or similar message and you want an exception to be logged as cause, simply use @Cause annotation, example:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
@LogMessage(level = ERROR)
@Message(value = "An error message: %s", id = 600)
void anErrorMessage(String param1, @Cause IllegalStateException e);
</pre> </div> </div> <div class="paragraph"> <p>The last thing to figure out is which id to give to the message. Each module that logs something in production code that could be internationalized has been given an id range, and so the messages should use an available id in the range for the module where the log call resides. Here are the id range assignments per module:</p> </div> <table class="tableblock frame-all grid-all" style="width:100%; "> <colgroup> <col style="width:50%;"> <col style="width:50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Module name</th> <th class="tableblock halign-left valign-top">Id range</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">core</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">1 - 1000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">tree</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">1001 - 2000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">bdbje cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">2001 - 3000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">cassandra cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">3001 - 4000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">hotrod client</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">4001 - 5000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">server core</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">5001 - 6000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">server hotrod</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">6001 - 7000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">cloud cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">7001 - 8000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">jdbc cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">8001 - 9000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">jdbm cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">9001 - 10000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">remote cache store</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">10001 - 11000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">server memcached</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">11001 - 12000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">server rest</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">12001 - 13000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">server websocket</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">13001 - 14000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">query</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">14001 - 15000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">lucene directory</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">15001 - 16000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">rhq plugin</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">16001 - 17000</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">cdi integration</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">17001 - 18000</p></td> </tr> </tbody> </table> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>You will need to enable annotation processing in order to be able to compile Infinispan and have the logger implementation generated.</p> </div> </td> </tr> </table> </div> </div> </div> </div> <div class="sect1"> <h2 id="sid-18645209_ContributingtoInfinispan-SourceControl"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-SourceControl"></a>3. Source Control</h2> <div class="sectionbody"> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="literalblock"> <div class="content"> <pre>As a convention, _upstream_ is used as the name of the link:$$http://github.com/infinispan/infinispan$$[] repository. This repository is the canonical repository for Infinispan.</pre> </div> </div> </td> </tr> </table> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Prerequisitesx"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Prerequisitesx"></a>3.1. requisites</h3> <div class="literalblock"> <div class="content"> <pre>This document assumes some working knowledge of git. We recommend Scott Chacon's excellent link:$$http://progit.org/$$[Pro Git] as a valuable piece of background reading. The book is released under the Creative Commons license and can be downloaded in electronic form for free At very least, we recommend that link:$$http://progit.org/book/ch2-0.html$$[Chapter 2] , link:$$http://progit.org/book/ch3-0.html$$[Chapter 3] and link:$$http://progit.org/book/ch5-0.html$$[Chapter 5] of Pro Git are read before proceeding.</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Repositories"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Repositories"></a>3.2. Repositories</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan uses link:$$http://github.com/infinispan/infinispan$$[] as its canonical repository, and this repository contains the stable code on master (currently Infinispan 5.x) as well as the maintenance branches for 4.2.x, 4.1.x and 4.0.x.</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>Typically, only _Project Admins_ would be able to push to this repo while all else may clone or fork this repo.</pre> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Roles"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Roles"></a>3.3. Roles</h3> <div class="literalblock"> <div class="content"> <pre>The project assumes one of 3 _roles_ an individual may assume when interacting with the Infinispan codebase. The three roles here are:</pre> </div> </div> <div class="ulist"> <ul> <li> <p><em>Project Admin</em> (typically, no more than 3 or 4 people)</p> </li> <li> <p><em>Frequent Contributor</em></p> </li> <li> <p><em>Occasional Contributor</em></p> </li> </ul> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>None of the roles assume that you are a Red Hat employee. All it assumes is how much responsibility over the project has been granted to you. Typically, someone may be in more than one role at any given time, and puts on a different "hats" based on the task at hand.</p> </div> </td> </tr> </table> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-OccasionalContributor"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-OccasionalContributor"></a>3.3.1. Occasional Contributor</h4> <div class="paragraph"> <p>This role defines a user who browses through the source code of the project and occasionally submits patches. Patches may be submitted in one of two ways:</p> </div> <div class="ulist"> <ul> <li> <p>Attach a patch file to the JIRA issue</p> </li> <li> <p>Creating a pull request on GitHub</p> </li> </ul> </div> <div class="paragraph"> <p>The approach a contributor chooses to use depends entirely his/her personal preference, but usually is tied to how the contributor accesses Infinispan&#8217;s source code. If the contributor directly clones the upstream repository, they should submit patch files. If the contributor instead uses their personal GitHub account to fork the upstream repository, then they are should issue a pull request.</p> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>A GitHub pull request is the preferred method to submit a patch!</p> </div> </td> </tr> </table> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-AttachapatchfiletotheJIRAissue"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-AttachapatchfiletotheJIRAissue"></a>Attach a patch file to the JIRA issue</h5> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="paragraph"> <p>In this workflow, the contributor directly clones the upstream repository, makes changes to his local clone, adequately tests and commits his work with proper comments (more on commit comments later), and generates a patch. The patch should then be attached to the JIRA issue.</p> </div> <div class="literalblock"> <div class="content"> <pre>More information on generating patches suitable for attaching to a JIRA can be found in link:$$http://progit.org/book/ch5-2.html$$[Chapter 5, Section 2] of Pro Git, under the section titled _Public Large Project_ .</pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>Rather than emailing the patches to a developer mail list, please attach your patch to the JIRA issue.</p> </div> </td> </tr> </table> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-CreatingapullrequestonGitHub"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-CreatingapullrequestonGitHub"></a>Creating a pull request on GitHub</h5> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="literalblock"> <div class="content"> <pre>In this workflow, the contributor forks the Infinispan upstream repository on GitHub, clones their fork, and makes changes to this private fork. When changes have been tested and are ready to be contributed back to the project, a _pull request_ is issued via GitHub so that one of the Project Administrators can pull in the change.</pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="title">Topic Branches</div> <div class="literalblock"> <div class="content"> <pre>It is desirable to work off a _topic branch_ , even when using your own, forked repository. A topic branch is created for every feature or bug fix you do. Typically you would create one topic branch per issue, but if several patches are related it's acceptable to have several commits in the same branch; however different changes should always be identified by different commits.</pre> </div> </div> </td> </tr> </table> </div> <div class="paragraph"> <p>Before you push your work onto your fork of the repository, it is often a good idea to review your commits. Consolidating them (squashing) or breaking them up as necessary and cleaning up commit messages should all be done while still working off your local clone. Also, prior to issuing a pull request, you should make sure you rebase your branch against the upstream branch you expect it to be merged into. Also, only submit pull requests for your branch - not for your master!</p> </div> <div class="literalblock"> <div class="content"> <pre>The section on _Public Small Project_ in link:$$http://progit.org/book/ch5-2.html$$[Chapter 5, Section 2] of Pro Git has more information on this style of workflow.</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Aworkedexample"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Aworkedexample"></a>=A worked example</h5> <div class="olist arabic"> <ol class="arabic"> <li> <p>Make sure your master is synced up with upstream. See <a href="#sid-18645209_ContributingtoInfinispan-Ifyouhaveforkedupstream">this section</a> for how to do this</p> </li> <li> <p>Create new branch for your topic and switch to it. For the example issue, ISPN-1234:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git checkout -b ISPN-12345 master</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Do your work. Test. Repeat</p> </li> <li> <p>Commit your work on your topic branch</p> </li> <li> <p>Push your topic branch to GitHub. For example:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git push origin ISPN-12345</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Issue a pull request using the <a href="http://help.github.com/send-pull-requests/">GitHub pull request system</a></p> </li> <li> <p>Once your pull request has been applied upstream, delete the topic branch both locally and on your fork. For example:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git branch -d ISPN-12345 &amp;&amp; git push origin :ISPN-12345</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Sync with upstream again so that your changes now appear in your master branch</p> </li> </ol> </div> <div class="paragraph"> <p>If your topic branch has been open for a while and you are afraid changes upstream may clash with your changes, it makes sense to rebase your topic branch before you issue a pull request. To do this:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Sync your master branch with upstream</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git checkout master
git pull upstream master</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Switch to your topic branch. For example:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git checkout ISPN-12345</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Rebase your topic branch against master:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git rebase master</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>During the rebase process you might need to fix conflicts;</p> </li> <li> <p>when you&#8217;re done test your code again.</p> </li> <li> <p>Push your rebased topic branch to your repo on GitHub (you will likely need to force this with the -f option).</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git push -f origin ISPN-12345</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Continue your work on your topic branch.</p> </li> </ol> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>If you are sharing your forked Infinispan repo with others, then do not rebase! Use a merge instead.</p> </div> </td> </tr> </table> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Multistepcoordinationbetweendevelopersusingforkedrepositories"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Multistepcoordinationbetweendevelopersusingforkedrepositories"></a>Multi-step coordination between developers using forked repositories</h5> <div class="paragraph"> <p>Sometimes a feature/task is rather complex to implement and requires competence from multiple areas of the projects. In such occasions it is not uncommon for developers to coordinate feature implementation using personal forks of Infinispan prior to finally issuing request to integrate into Infinispan main repository on GitHub.</p> </div> <div class="paragraph"> <p>For example, developer A using his personal Infinispan fork creates a topic branch T and completes as much work as he/she can before requesting for assistance from developer B. Developer A pushes topic T to his personal Infinispan fork where developer B picks it up and brings it down to his local repo. Developer B then in turn completes necessary work, commits his/her changes on branch T, and finally pushes back T to his own personal fork. After issuing request for pull to developer A, developer B waits for notification that developer A integrated his changes. This exchange can be repeated as much as it is necessary and can involve multiple developers.</p> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Aworkedexamplex"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Aworkedexamplex"></a>=A worked example</h5> <div class="literalblock"> <div class="content"> <pre>This example assumes that developer A and B have added each others Infinispan forked repositories with the git add remote command. For example, developer B would add developer A's personal Infinispan fork repository with the command</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
git remote add devA https://github.com/developerA/infinispan.git]
</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Developer A starts implementing feature ISPN-244 and works on a local topic branch ispn244 Developer A pushes ispn244 to personal Infinispan fork. For example:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git push origin ispn244</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Developer B fetches branch ispn244 to local repository. For example:</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git fetch devA ispn244:my_ispn244</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Developer B works on local branch my_ispn244</p> </li> <li> <p>Developer B commits changes, pushes my_ispn244 to own fork.</p> </li> </ol> </div> <div class="listingblock"> <div class="content"> <pre>git push origin my_ispn244</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Developer B sends pull request to developer A to integrate changes from my_ispn244 to ispn244</p> </li> </ol> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-FrequentContributor"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-FrequentContributor"></a>3.3.2. Frequent Contributor</h4> <div class="paragraph"> <p>A frequent contributor will only ever submit patches via a pull requests. The pull request will be submitted via GitHub.</p> </div> <div class="literalblock"> <div class="content"> <pre>Frequent contributors should _always_ fork the upstream project on GitHub and work off a clone of this fork. This is very similar to &lt;&lt;sid-18645209_ContributingtoInfinispan-CreatingapullrequestonGitHub,Creating a pull request on GitHub&gt;&gt; workflow used by a &lt;&lt;sid-18645209_ContributingtoInfinispan-OccasionalContributor,Occasional Contributor&gt;&gt; .</pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>All Infinispan core developers are considered frequent contributors and work off personal forks of the upstream repository. This allows for complex features to be developed in parallel without tripping up over one another. This process is certainly not restricted to just Infinispan core developers; any contributor is welcome to also participate in this manner.</p> </div> </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-ProjectAdmin"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-ProjectAdmin"></a>3.3.3. Project Admin</h4> <div class="literalblock"> <div class="content"> <pre>Project Admins have a very limited role. Only Project Admins are allowed to push to upstream, and Project Admins _never_ write any code directly on the upstream repository. All Project Admins do is pull in and merge changes from contributors (even if the "contributor" happens to be themselves) into upstream, perform code reviews and either commit or reject such changes.</pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>All Contributors who are also Project Admins are encouraged to not merge their own changes, to ensure that all changes are reviewed.</p> </div> </td> </tr> </table> </div> <div class="paragraph"> <p>This approach ensures Infinispan maintains quality on the main code source tree, and allows for important code reviews to take place again ensuring quality. Further, it ensures clean and easily traceable code history and makes sure that more than one person knows about the changes being performed.</p> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Merginginpatches"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Merginginpatches"></a>Merging in patches</h5> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="paragraph"> <p>Patches submitted via JIRA are audited and promoted to the upstream repository as detailed above. A Project Admin would typically create a working branch to which the patch is applied and tested. The patch can be further modified, cleaned up, and commit messages made clearer if necessary. The branch should then be merged to the master or one of the maintenance branches before being pushed.</p> </div> <div class="literalblock"> <div class="content"> <pre>More information on applying patches can be found in link:$$http://progit.org/book/ch5-3.html$$[Chapter 5, Section 3] of Pro Git, under _Applying Patches From Email._</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Handlingpullrequests"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Handlingpullrequests"></a>Handling pull requests</h5> <div class="paragraph"> <div class="title">TODO InformalFigure image title empty</div> <p>image::[]</p> </div> <div class="paragraph"> <p>Project Admins are also responsible for responding to pull requests. The process is similar to applying a patch directly, except that when pulling in changes from a forked repository, more than a single commit may be pulled in. Again, this should be done on a newly created working branch, code reviewed, tested and cleaned up as necessary.</p> </div> <div class="paragraph"> <p>If commits need to be altered - e.g., rebasing to squash or split commits, or to alter commit messages - it is often better to contact the Contributor and ask the Contributor to do so and re-issue the pull request, since doing so on the upstream repo could cause update issues for contributors later on. If commits were altered or three-way merge was performed during a merge instead of fast-forward, it&#8217;s also a good idea to check the log to make sure that the resulting repository history looks OK:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git log --pretty=oneline --graph --abbrev-commit # History messed up due to a bad merge
* 3005020 Merge branch 'ISPN-786' of git://github.com/Sanne/infinispan
|\
| * e757265 ISPN-786 Make dependency to log4j optional &lt;-- Same with cb4e5d6 - unnecessary
* | cb4e5d6 ISPN-786 Make dependency to log4j optional &lt;-- Cherry-picked commit by other admin
|/
* ...

$ git reset cb4e5d6 # revert the bad merge
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>It is therefore _strongly recommended_ that you use the link:$$https://github.com/maniksurtani/githelpers/blob/master/project_admins/handle_pull_request$$[handle_pull_request] script that ensures a clean merge. If you _still_ wish to do this manually, please consider reading through the script first to get an idea of what needs to happen.</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>More information on pulling changes from remote, forked repos can be found in link:$$http://progit.org/book/ch5-3.html$$[Chapter 5, Section 3] of Pro Git, under _Checking Out Remote Branches_ .</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Possibletroublehandlingpullrequests"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Possibletroublehandlingpullrequests"></a>=Possible trouble handling pull requests</h5> <div class="olist arabic"> <ol class="arabic"> <li> <p>If you have warnings about "Merge made by recursive" you have to fix it rebasing.</p> </li> <li> <p>If you have warnings about "non-fast-forward" you have to rebase.</p> </li> <li> <p>If you see "non-fast-forward updates were rejected" you shall never use "force" on upstream! It means that another patch was merged before you and you have to update your master again, and rebase again.</p> </li> <li> <p>"force" is allowed only in special maintenance circumstances. If you find you&#8217;re needing it to handle a pull request, then you&#8217;re doing it wrong, and the mistake might be a dangerous one! It&#8217;s like the good rule of never commit when you&#8217;re drunk (coding is allowed).</p> </li> </ol> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="icon-warning" title="Warning"></i> </td> <td class="content"> <div class="title">Never use force on git push</div> <div class="literalblock"> <div class="content"> <pre>Using _-f_ while pushing on a shared repository such as _upstream_ you could effectively erase other committed patches. Noone shall ever use this option unless unanimously approved on the public mailing list: the most dangerous aspect of it is that nobody get any notification if this happens, and we might think issues are solved but you silently removed the fix and it's history from the repository.</pre> </div> </div> </td> </tr> </table> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Cuttingreleases"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Cuttingreleases"></a>Cutting releases</h5> <div class="paragraph"> <p>Releases can only me cut by Project Admins, and must be done off a recently updated (git fetch and git pull origin) clone of the upstream repo. Infinispan&#8217;s release.py script takes care of the rest.</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Committingyourwork"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Committingyourwork"></a>3.4. Committing your work</h3> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Releasebranches"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Releasebranches"></a>3.4.1. Release branches</h4> <div class="paragraph"> <p>Infinispan has 4 main release branches. These are master (ongoing work on the 5.0.x series), 4.2.x (ongoing work on the 4.2.x series), 4.1.x and 4.0.x (respective maintenance branches). Work should never be committed directly to any of these release branches; topic branches should always be used for work, and these topic branches should be merged in.</p> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Topicbranches"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Topicbranches"></a>3.4.2. Topic branches</h4> <div class="paragraph"> <p>Some of the biggest features of git are speed and efficiency of branching, and accuracy of merging. As a result, best practices involve making frequent use of branches. Creating several topic branches a day, even, should not be considered excessive, and working on several topic branches simultaneously again should be commonplace.</p> </div> <div class="literalblock"> <div class="content"> <pre>link:$$http://progit.org/book/ch3-4.html$$[Chapter 3, Section 4] of Pro Git has a detailed discussion of topic branches. For Infinispan, it makes sense to create a topic branch and name it after the JIRA it corresponds to. (if it doesn't correspond to a JIRA, a simple but descriptive name should be used).</pre> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-TopicBranchesAffectingMoreThanOneReleaseBranch"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-TopicBranchesAffectingMoreThanOneReleaseBranch"></a>Topic Branches Affecting More Than One Release Branch</h5> <div class="paragraph"> <p>Most topic branches will only affect a single release branch, e.g. Infinispan 5.0 features only affect the master release branch, so a topic branch should be created based off master. However, occasionally, fixes may apply to both release branches 4.2.x as well as master. In this case, the following workflow should apply:</p> </div> <div class="ulist"> <ul> <li> <p>Create topic branch off 4.2.x. For example:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre>git checkout -b &lt;topic&gt;_4.2.x 4.2.x</pre> </div> </div> <div class="ulist"> <ul> <li> <p>Create topic branch off master. For example:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre>git checkout -b &lt;topic&gt;_master master</pre> </div> </div> <div class="ulist"> <ul> <li> <p>Do your work on &lt;topic&gt;_master , test and commit your fixes</p> </li> <li> <p>Switch to {{&lt;topic&gt;_4.2.x}. For example:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre>git checkout &lt;topic&gt;_4.2.x</pre> </div> </div> <div class="ulist"> <ul> <li> <p>Cherry-pick your commit on &lt;topic&gt;_master onto &lt;topic&gt;_4.2.x . For example:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre>git cherry-pick &lt;commit_id&gt;</pre> </div> </div> <div class="ulist"> <ul> <li> <p>Test &lt;topic&gt;_4.2.x for correctness, modify as necessary</p> </li> <li> <p>Issue pull requests for both topic branches</p> </li> </ul> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Comments"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Comments"></a>3.4.3. Comments</h4> <div class="literalblock"> <div class="content"> <pre>It is _extremely important_ that comments for each commit are clear and follow certain conventions. This allows for proper parsing of logs by git tools. Read link:$$http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html$$[this article] on how to format comments for git and adhere to them. Further to the recommendations in the article, the short summary of the commit message should be in the following format:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>ISPN-XXX - Subject line of the JIRA in question</pre> </div> </div> <div class="paragraph"> <p>This should be followed by a detailed explanation of the commit. Why it was done, how much of it. was completed, etc. You may wish to express this as a list, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre>
* Add a unit test
* Add more unit tests
* Fix regressions
* Solve major NP-Complete problems
</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Commits"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Commits"></a>3.4.4. Commits</h4> <div class="literalblock"> <div class="content"> <pre> Sometimes work on your topic branch may include several commits. For example, committing a test. Then committing another test. Then perhaps committing a fix. And perhaps fixing the fix in the next commit
.TODO Gliffy image title empty
image::[]</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Before issuing a pull request for this topic branch, consider cleaning up these commits. Interactive rebasing helps you squash several commits into a single commit, which is often more coherent to deal with for others merging in your work. <a href="http://progit.org/book/ch6-4.html">Chapter 6, Section 4</a> of Pro Git has details on how to squash commits and generally, clean up a series of commits before sharing this work with others.</p> <div class="literalblock"> <div class="content"> <pre>Also, it is important to make sure you don't accidentally commit files for which no real changes have happened, but rather, whitespace has been modified. This often happens with some IDEs. git diff --check should be run before you issue such a pull request, which will check for such "noise" commits and warn you accordingly. Such files should be reverted and not be committed to the branch.</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>Further, adhering to &lt;&lt;sid-18645210_Contributing-TheBasics-StyleRequirements,Infinispan's code style&gt;&gt; guidelines will help minimise "noise" commits. Project Admins should feel free to ask contributors to reformat their code if necessary.</pre> </div> </div> </li> </ol> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Keepingyourrepoinsyncwithupstream"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Keepingyourrepoinsyncwithupstream"></a>3.5. Keeping your repo in sync with upstream</h3> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Ifyouhaveclonedupstream"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Ifyouhaveclonedupstream"></a>3.5.1. If you have cloned upstream</h4> <div class="paragraph"> <p>If you have a clone of the upstream, you may want to update it from time to time. Running:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git fetch origin
$ git fetch origin --tags
</pre> </div> </div> <div class="paragraph"> <p>will often do the trick. You could then pull the specific branches you would need to update:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git checkout master
$ git pull origin master
$ git checkout 4.2.x
$ git pull origin 4.2.x
</pre> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Updatingtopicbranches"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Updatingtopicbranches"></a>Updating topic branches</h5> <div class="paragraph"> <p>You should rebase your topic branches at this point so that they are up-to-date and when pulled by upstream, upstream can fast-forward the release branches:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git checkout &lt;topic&gt;_master
$ git rebase master
</pre> </div> </div> <div class="paragraph"> <p>and/or</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git checkout topic_4.2.x
$ git rebase 4.2.x
</pre> </div> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Ifyouhaveforkedupstream"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Ifyouhaveforkedupstream"></a>3.5.2. If you have forked upstream</h4> <div class="paragraph"> <p>If you have a fork of upstream, you should probably define upstream as one of your remotes:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git remote add upstream git://github.com/infinispan/infinispan.git
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>You should now be able to fetch and pull changes from upstream into your local repo, though you should make sure you have no uncommitted changes. (You _do_ use topic branches, right?)</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
$ git fetch upstream
$ git fetch upstream --tags
$ git checkout master
$ git pull upstream master
$ git push origin master
$ git checkout 4.2.x
$ git pull upstream 4.2.x
$ git push origin 4.2.x
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>A script can do this for you - have a look at link:$$https://github.com/maniksurtani/githelpers/blob/master/contributors/sync_with_upstream$$[sync_with_upstream] .</pre> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Updatingtopicbranchesx"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Updatingtopicbranchesx"></a>Updating topic branches</h5> <div class="paragraph"> <p>Again, you should rebase your topic branches at this point so that they are up-to-date and when pulled by upstream, upstream can fast-forward the release branches:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git checkout topic_master
$ git rebase master
</pre> </div> </div> <div class="paragraph"> <p>and/or</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git checkout topic_4.2.x
$ git rebase 4.2.x
</pre> </div> </div> <div class="paragraph"> <p>The sync_with_upstream script can do this for you if your topic branch naming conventions match the script.</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Tipsonenhancinggit"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Tipsonenhancinggit"></a>3.6. Tips on enhancing git</h3> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Autocompletions"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Autocompletions"></a>3.6.1. completions</h4> <div class="literalblock"> <div class="content"> <pre>Save link:$$http://git.kernel.org/?p=git/git.git;a=blob_plain;f=contrib/completion/git-completion.bash;h=168669bbf79cb33c527a688fb906e276beadaf79;hb=HEAD$$[this script] as
             ~/.git-completion.bash~
            ~and in~ /.bash_profile , add the following on one line:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
source ~/.git-completion.bash
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>After logging out and back in again, typing git &amp;lt;TAB&amp;gt; will give you a list of git commands, as would git c&amp;lt;TAB&amp;gt; , etc. This even works for options, e.g. git commit --&amp;lt;TAB&amp;gt; . The completions are even aware of your refs, so even git checkout my_br&amp;lt;TAB&amp;gt; will complete to git checkout my_branch !</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>Note that you get git autocompletion for free if you use link:$$http://zsh.sourceforge.net/$$[zsh] instead of bash.</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Terminalcolours"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Terminalcolours"></a>3.6.2. Terminal colours</h4> <div class="literalblock"> <div class="content"> <pre>Add the following to your ~/.gitconfig</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
[color]
    ui = yes
[color "branch"]
     current = yellow reverse
     local = yellow
     remote = green
[color "diff"]
     meta = yellow bold
     frag = magenta bold
     old = red bold
     new = green bold
[color "status"]
     added = yellow
     changed = green
     untracked = cyan
</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Aliases"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Aliases"></a>3.6.3. Aliases</h4> <div class="literalblock"> <div class="content"> <pre>Some git commands are pretty long to type, especially with various switches. Aliases help you to map shortcuts to more complex commands.; Again, For example, add the followin to ~/.gitconfig :</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
[alias]
 co = checkout
 undo = reset --hard
 cb = checkout -b
 br = branch
 cp = cherry-pick
 st = status
 l = log --pretty=oneline --decorate --abbrev-commit
 lg = log --decorate --abbrev-commit
 last = log --decorate -1 -p --abbrev-commit
 ci = commit -a
 pom = push origin master
 graph = log --pretty=oneline --graph --abbrev-commit
 dt = difftool
</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-VisualHistory"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-VisualHistory"></a>3.6.4. Visual History</h4> <div class="literalblock"> <div class="content"> <pre>Git ships with gitk, a GUI that visually represents a log. If you use Mac OS X, link:$$http://gitx.frim.nl/$$[GitX] is a good alternative. Try typing gitk or gitx in a git project directory.</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Visualdiffandmergetools"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Visualdiffandmergetools"></a>3.6.5. Visual diff and merge tools</h4> <div class="literalblock"> <div class="content"> <pre>There are several options available, including link:$$http://kdiff3.sourceforge.net/$$[KDiff3] , link:$$http://meld.sourceforge.net/$$[meld] and Perforce's link:$$http://www.perforce.com/perforce/products/merge.html$$[P4Merge] which are all either open source or available for free. See link:$$http://progit.org/book/ch7-1.html$$[this link] on setting these up (section under External Merge and Diff Tools)</pre> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-ChoosinganEditor"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-ChoosinganEditor"></a>3.6.6. Choosing an Editor</h4> <div class="literalblock"> <div class="content"> <pre>You can customise the editor used by git editing ~/.gitconfig . The following fires up link:$$http://code.google.com/p/macvim/$$[MacVIM] instead of the default vi editor:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
[core]
 editor = mvim -f
</pre> </div> </div> <div class="paragraph"> <p>Alternatively, you could fire up TextMate or another editors of your choice.</p> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Shellprompt"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Shellprompt"></a>3.6.7. Shell prompt</h4> <div class="literalblock"> <div class="content"> <pre>You can change your Bash shell prompt to print the current repository's branch name. Add the following to your ~/.bashrc :</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
function git_current_branch {
 git branch --no-color 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/[\1]/'
}

if [ "$PS1" ]; then
 PS1='[\u@\h:\W]$(git_current_branch)\$ '
fi
</pre> </div> </div> <div class="paragraph"> <p>The resulting shell prompt will look like:</p> </div> <div class="listingblock"> <div class="content"> <pre>
trustin@matrix:infinispan-4.2][4.2.x]$
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>If you're a ZSH user, you can get even more interesting branch information thanks to link:$$http://sebastiancelis.com/2009/nov/16/zsh-prompt-git-users/$$[this blog post] , such as:</pre> </div> </div> <div class="ulist"> <ul> <li> <p>whether your branch is dirty ()</p> </li> <li> <p>whether it&#8217;s ahead of the remote()</p> </li> <li> <p>whether it diverges with the remote ()</p> </li> <li> <p>whether it&#8217;s behind ()</p> </li> </ul> </div> <div class="paragraph"> <p>For example, the following prompt indicates that the current branch is <em>t_ispn775_master</em> and that the branch is dirty:</p> </div> <div class="listingblock"> <div class="content"> <pre>
~/Go/code/infinispan.git]% (t_ispn775_master)
</pre> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="sid-18645209_ContributingtoInfinispan-BuildingInfinispan"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-BuildingInfinispan"></a>4. Building Infinispan</h2> <div class="sectionbody"> <div class="literalblock"> <div class="content"> <pre>Infinispan uses link:$$http://maven.apache.org/$$[Maven] as a build system.</pre> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Requirements"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Requirements"></a>4.1. Requirements</h3> <div class="ulist"> <ul> <li> <p>Java 6.0 or above</p> </li> <li> <p>Maven 3 or above</p> </li> </ul> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="icon-warning" title="Warning"></i> </td> <td class="content"> <div class="literalblock"> <div class="content"> <pre>Make sure you follow the steps outlined in link:$$http://community.jboss.org/docs/15169$$[Maven Getting Started - Users] to set up your JBoss repository correctly. This step is _crucial_ to ensure your Maven setup can locate JBoss artifacts!</pre> </div> </div> </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-Quickcommandreference"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Quickcommandreference"></a>4.2. Quick command reference</h3> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> <div class="literalblock"> <div class="content"> <pre>Maven places it's output in target/</pre> </div> </div> </td> </tr> </table> </div> <table class="tableblock frame-all grid-all" style="width:100%; "> <colgroup> <col style="width:50%;"> <col style="width:50%;"> </colgroup> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn clean</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Cleans out any old builds and binaries</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn compile</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Compiles java source code</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn test</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Runs the TestNG unit test suite on the compiled code. Will also compile the tests. See the testing section below for more information on running different test groups. The default test group run is the "unit" group.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn package</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Packages the module as a JAR file, the resulting JAR file will be in target/</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn package -Dmaven.test.skip.exec=true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Creates a JAR file without running tests</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn package -Dmaven.test.skip.exec=true -P minimal-distribution</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Creates a reduced version of the distribution with all modules,scripts&#8230;etc but no javadoc or source code. This is very handy to quickly build the distribution in order to run some tests.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn install -Dmaven.test.skip.exec=true</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Installs the artifacts in your local repo for use by other projects/modules, including inter-module dependencies within the same project.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn install -P distribution</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">In addition to install, will also use Maven&#8217;s assembly plugin to build ZIP files for distribution (in target/distribution ). Contents of various distribution are controlled by the files in src/main/resources/assemblies .</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn deploy</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Builds and deploy the project to the JBoss snapshots repository.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn -Pgenerate-schema-doc install -DskipTests=true -pl core &amp;&amp; firefox core/target/xsd_doc</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Builds the configuration reference HTML file</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">mvn install -P-extras</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Avoids the extras profile disables the enforce plugin, generation of source jars and OSGI bundleconstruction, hence making builds run faster. Clearly, this option should not be used when making a release or publishing a snapshot.</p></td> </tr> </tbody> </table> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="literalblock"> <div class="content"> <pre>For non-snapshot releases (e.g., alphas, betas, release candidates and final releases) you should use the bin/release.py script.</pre> </div> </div> </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-PublishingreleasestoMaven"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-PublishingreleasestoMaven"></a>4.3. Publishing releases to Maven</h3> <div class="literalblock"> <div class="content"> <pre>To be able to publish releases to Maven, you need to have the following in your ${HOME}/.m2/settings.xml file:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
&lt;settings&gt;
 ...
 &lt;servers&gt;
 ...
 &lt;server&gt;
 &lt;id&gt;jboss-snapshots-repository&lt;/id&gt;
 &lt;username&gt;your JBoss.org username&lt;/username&gt;
 &lt;password&gt;your JBoss.org password&lt;/password&gt;

 &lt;/server&gt;
 &lt;server&gt;
 &lt;id&gt;jboss-releases-repository&lt;/id&gt;
 &lt;username&gt;your JBoss.org username&lt;/username&gt;
 &lt;password&gt;your JBoss.org password&lt;/password&gt;

 &lt;/server&gt;
 ...
 &lt;/servers&gt;
 ...
&lt;/settings&gt;
</pre> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Publishingsnapshots"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Publishingsnapshots"></a>4.3.1. Publishing snapshots</h4> <div class="paragraph"> <p>Simply running</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn clean deploy -Dmaven.test.skip.exec=true
</pre> </div> </div> <div class="paragraph"> <p>in the Infinispan root directory will deploy a snapshot.</p> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Publishingreleases"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Publishingreleases"></a>4.3.2. Publishing releases</h4> <div class="paragraph"> <p>Use the bin/release.py script.</p> </div> </div> </div> <div class="sect2"> <h3 id="sid-18645209_ContributingtoInfinispan-TheMavenArchetypes"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-TheMavenArchetypes"></a>4.4. The Maven Archetypes</h3> <div class="literalblock"> <div class="content"> <pre>Infinispan currently has 2 separate Maven link:$$http://maven.apache.org/guides/introduction/introduction-to-archetypes.html$$[archetypes] you can use to create a skeleton project and get started using Infinispan. This is an easy way to get started using Infinispan as the archetype generates sample code, a sample Maven pom.xml with necessary depedencies, etc.</pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>You don&#8217;t need to have any experience with or knowledge of Maven&#8217;s Archetypes to use this! Just follow the simple steps below.</p> </div> </td> </tr> </table> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="icon-warning" title="Warning"></i> </td> <td class="content"> <div class="paragraph"> <p>These archetypes have only been tested with Maven 3. Please report back if you have any success with using Maven 2.</p> </div> </td> </tr> </table> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Startinganewproject"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Startinganewproject"></a>4.4.1. Starting a new project</h4> <div class="paragraph"> <p>Use the newproject-archetype project. The simple command below will get you started, and</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn archetype:generate \
 -DarchetypeGroupId=org.infinispan.archetypes \
 -DarchetypeArtifactId=newproject-archetype \
 -DarchetypeVersion=1.0.5 \
 -DarchetypeRepository=http://repository.jboss.org/nexus/content/groups/public
</pre> </div> </div> <div class="literalblock"> <div class="content"> <pre>You will be prompted for a few things, including the artifactId , groupId and version of your new project. And that's it - you're ready to go!</pre> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Exploringyournewproject"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Exploringyournewproject"></a>Exploring your new project</h5> <div class="literalblock"> <div class="content"> <pre>The skeleton project ships with a sample application class for interacting with Infinispan. You can open this new project in your IDE - most good IDEs such as IntelliJ and Eclipse allow you to import Maven projects, see link:$$http://www.jetbrains.com/idea/webhelp/importing-maven-project.html$$[this guide] and link:$$http://m2eclipse.sonatype.org/$$[this guide] .  Once you open your project in your IDE, you should examine the generated classes and read through the comments.</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Onthecommandline..."><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Onthecommandline..."></a>On the command line&#8230;</h5> <div class="paragraph"> <p>Try running</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn install -Prun
</pre> </div> </div> <div class="paragraph"> <p>in your newly generated project. This runs the main() method in the generated application class.</p> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-WritingatestcaseforInfinispan"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-WritingatestcaseforInfinispan"></a>4.4.2. Writing a test case for Infinispan</h4> <div class="paragraph"> <p>This archetype is useful if you wish to contribute a test to the Infinispan project and helps you get set up to use Infinispan&#8217;s testing harness and related tools.</p> </div> <div class="paragraph"> <p>Use</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn archetype:generate \
 -DarchetypeGroupId=org.infinispan.archetypes \
 -DarchetypeArtifactId=testcase-archetype \
 -DarchetypeVersion=1.0.5 \
 -DarchetypeRepository=http://repository.jboss.org/nexus/content/groups/public
</pre> </div> </div> <div class="paragraph"> <p>As above, this will prompt you for project details and again as above, you should open this project in your IDE. Once you have done so, you will see some sample tests written for Infinispan making use of Infinispan&#8217;s test harness and testing tools along with extensive comments and links for further reading.</p> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Onthecommandline...x"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Onthecommandline...x"></a>On the command line&#8230;</h5> <div class="paragraph"> <p>Try running</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn test
</pre> </div> </div> <div class="paragraph"> <p>in your newly generated project to run your tests.</p> </div> <div class="literalblock"> <div class="content"> <pre>The generated project has a few different profiles you can use as well, using Maven's -P flag. For example:</pre> </div> </div> <div class="listingblock"> <div class="content"> <pre>
$ mvn test -Pudp
</pre> </div> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-Availableprofiles"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Availableprofiles"></a>Available profiles</h5> <div class="paragraph"> <p>The profiles available in the generated sample project are:</p> </div> <div class="ulist"> <ul> <li> <p>udp: use UDP for network communications rather than TCP</p> </li> <li> <p>tcp: use TCP for network communications rather than UDP</p> </li> <li> <p>jbosstm: Use the embedded <a href="http://www.jboss.org/jbosstm">JBoss Transaction Manager</a> rather than Infinispan&#8217;s dummy test transaction manager</p> </li> </ul> </div> </div> <div class="sect4"> <h5 id="sid-18645209_ContributingtoInfinispan-ContributingtestsbacktoInfinispan"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-ContributingtestsbacktoInfinispan"></a>Contributing tests back to Infinispan</h5> <div class="literalblock"> <div class="content"> <pre>If you have written a functional, unit or stress test for Infinispan and want to contribute this back to Infinispan, your best bet is to link:$$https://github.com/infinispan/infinispan$$[fork the Infinispan sources on GitHub] . The test you would have prototyped and tested in an isolated project created using this archetype can be simply dropped in to Infinispan's test suite. Make your changes, add your test, prove that it fails even on Infinispan's upstream source tree and issue a link:$$http://help.github.com/pull-requests/$$[pull request] .</pre> </div> </div> <div class="paragraph"> <p>{tip:title=New to working with Infinispan and GitHub?</p> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>Want to know how best to work with the repositories and contribute code? Read Infinispan and Git</p> </div> </td> </tr> </table> </div> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-Versions"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-Versions"></a>4.4.3. Versions</h4> <div class="paragraph"> <p>The archetypes generate poms with dependencies to specific versions of Infinispan. You should edit these generated poms by hand to point to other versions of Infinispan that you are interested in.</p> </div> </div> <div class="sect3"> <h4 id="sid-18645209_ContributingtoInfinispan-SourceCode"><a class="anchor" href="#sid-18645209_ContributingtoInfinispan-SourceCode"></a>4.4.4. Source Code</h4> <div class="literalblock"> <div class="content"> <pre>The source code used to generate these archetypes are link:$$https://github.com/infinispan/infinispan-archetypes$$[on GitHub] . If you wish to enhance and contribute back to the project, fork away!</pre> </div> </div> </div> </div> </div> </div> </div> <div id="footer"> <div id="footer-text"> Last updated 2013-09-11 13:53:10 BST </div> </div> </body> </html>