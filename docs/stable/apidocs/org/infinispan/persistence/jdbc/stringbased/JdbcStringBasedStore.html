<!DOCTYPE HTML>
<html lang>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GPD7V946LB');
</script>
<!-- Generated by javadoc (25) -->
<title>JdbcStringBasedStore (Infinispan 16.1 JavaDoc)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.infinispan.persistence.jdbc.stringbased, class: JdbcStringBasedStore">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/JdbcStringBasedStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Infinispan 16.1.0</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.infinispan.persistence.jdbc.stringbased</a></li>
<li><a href="JdbcStringBasedStore.html" class="current-selection">JdbcStringBasedStore</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">JdbcStringBasedStore()</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#characteristics()" tabindex="0">characteristics()</a></li>
<li><a href="#createTableOperations(org.infinispan.persistence.spi.InitializationContext,org.infinispan.persistence.jdbc.configuration.JdbcStringBasedStoreConfiguration)" tabindex="0">createTableOperations(InitializationContext, JdbcStringBasedStoreConfiguration)</a></li>
<li><a href="#getTableManager()" tabindex="0">getTableManager()</a></li>
<li><a href="#extraStopSteps()" tabindex="0">extraStopSteps()</a></li>
<li><a href="#size(org.infinispan.commons.util.IntSet)" tabindex="0">size(IntSet)</a></li>
<li><a href="#approximateSize(org.infinispan.commons.util.IntSet)" tabindex="0">approximateSize(IntSet)</a></li>
<li><a href="#addSegments(org.infinispan.commons.util.IntSet)" tabindex="0">addSegments(IntSet)</a></li>
<li><a href="#removeSegments(org.infinispan.commons.util.IntSet)" tabindex="0">removeSegments(IntSet)</a></li>
<li><a href="#getConnectionFactory()" tabindex="0">getConnectionFactory()</a></li>
<li><a href="#purgeExpired()" tabindex="0">purgeExpired()</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class JdbcStringBasedStore" class="title">Class JdbcStringBasedStore&lt;<span id="type-param-K">K</span>,<wbr><span id="type-param-V">V</span>&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">org.infinispan.persistence.jdbc.common.impl.BaseJdbcStore</a>&lt;K, V, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;
<div class="inheritance">org.infinispan.persistence.jdbc.stringbased.JdbcStringBasedStore&lt;K,<wbr>V&gt;</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../spi/NonBlockingStore.html" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a>&lt;K,<wbr>V&gt;</code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">JdbcStringBasedStore&lt;K,<wbr>V&gt;</span>
<span class="extends-implements">extends <a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;K, V, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</span></div>
<div class="block"><a href="../../spi/NonBlockingStore.html" title="interface in org.infinispan.persistence.spi"><code>NonBlockingStore</code></a> implementation that stores the entries in a database.
This cache store will store each entry within a row in the table. This assures a finer grained granularity for all
operation, and better performance. In order to be able to store non-string keys, it relies on an <a href="../../keymappers/Key2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>Key2StringMapper</code></a>.
Note that only the keys are stored as strings, the values are still saved as binary data. Using a character
data type for the value column will result in unmarshalling errors.
The actual storage table is defined through configuration <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration"><code>JdbcStringBasedStoreConfiguration</code></a>.
The table can be created/dropped on-the-fly, at deployment time. For more details consult javadoc for <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration"><code>JdbcStringBasedStoreConfiguration</code></a>.
<b>Preload</b>.In order to support preload functionality the store needs to read the string keys from the database and transform them
into the corresponding key objects. <a href="../../keymappers/Key2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>Key2StringMapper</code></a> only supports
key to string transformation(one way); in order to be able to use preload one needs to specify an
<a href="../../keymappers/TwoWayKey2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>TwoWayKey2StringMapper</code></a>, which extends <a href="../../keymappers/Key2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>Key2StringMapper</code></a> and
allows bidirectional transformation.
<b>Rehashing</b>. When a node leaves/joins, Infinispan moves around persistent state as part of rehashing process.
For this it needs access to the underlaying key objects, so if distribution is used, the mapper needs to be an
<a href="../../keymappers/TwoWayKey2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>TwoWayKey2StringMapper</code></a> otherwise the cache won't start (same constraint as with preloading).</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Mircea.Markus@jboss.com</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../keymappers/Key2StringMapper.html" title="interface in org.infinispan.persistence.keymappers"><code>Key2StringMapper</code></a></li>
<li><a href="../../keymappers/DefaultTwoWayKey2StringMapper.html" title="class in org.infinispan.persistence.keymappers"><code>DefaultTwoWayKey2StringMapper</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h3 id="nested-classes-inherited-from-class-org.infinispan.persistence.spi.NonBlockingStore">Nested classes/interfaces inherited from interface&nbsp;<a href="../../spi/NonBlockingStore.html#nested-class-summary" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a></h3>
<code><a href="../../spi/NonBlockingStore.Characteristic.html" title="enum class in org.infinispan.persistence.spi">NonBlockingStore.Characteristic</a>, <a href="../../spi/NonBlockingStore.SegmentedPublisher.html" title="interface in org.infinispan.persistence.spi">NonBlockingStore.SegmentedPublisher</a>&lt;Type&gt;</code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.infinispan.persistence.jdbc.common.impl.BaseJdbcStore">Fields inherited from class&nbsp;<a href="../common/impl/BaseJdbcStore.html#field-summary" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a></h3>
<code><a href="../common/impl/BaseJdbcStore.html#blockingManager">blockingManager</a>, <a href="../common/impl/BaseJdbcStore.html#config">config</a>, <a href="../common/impl/BaseJdbcStore.html#connectionFactory">connectionFactory</a>, <a href="../common/impl/BaseJdbcStore.html#tableOperations">tableOperations</a>, <a href="../common/impl/BaseJdbcStore.html#transactionConnectionMap">transactionConnectionMap</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.infinispan.persistence.spi.NonBlockingStore">Fields inherited from interface&nbsp;<a href="../../spi/NonBlockingStore.html#field-summary" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a></h3>
<code><a href="../../spi/NonBlockingStore.html#SIZE_UNAVAILABLE_FUTURE">SIZE_UNAVAILABLE_FUTURE</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">JdbcStringBasedStore</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addSegments(org.infinispan.commons.util.IntSet)" class="member-name-link">addSegments</a><wbr>(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked when a node becomes an owner of the given segments.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#approximateSize(org.infinispan.commons.util.IntSet)" class="member-name-link">approximateSize</a><wbr>(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns an estimation of the amount of entries that map to the given segments in the store.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="../../spi/NonBlockingStore.Characteristic.html" title="enum class in org.infinispan.persistence.spi">NonBlockingStore.Characteristic</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#characteristics()" class="member-name-link">characteristics</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a set of characteristics for this store and its elements.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../common/TableOperations.html" title="interface in org.infinispan.persistence.jdbc.common">TableOperations</a><wbr>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createTableOperations(org.infinispan.persistence.spi.InitializationContext,org.infinispan.persistence.jdbc.configuration.JdbcStringBasedStoreConfiguration)" class="member-name-link">createTableOperations</a><wbr>(<a href="../../spi/InitializationContext.html" title="interface in org.infinispan.persistence.spi">InitializationContext</a>&nbsp;ctx,
 <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&nbsp;configuration)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Extension point to allow for initializing and creating a table operations object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#extraStopSteps()" class="member-name-link">extraStopSteps</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Method to extend to add additional steps when the store is shutting down.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../common/connectionfactory/ConnectionFactory.html" title="class in org.infinispan.persistence.jdbc.common.connectionfactory">ConnectionFactory</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnectionFactory()" class="member-name-link">getConnectionFactory</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.infinispan.persistence.jdbc.impl.table.TableManager<wbr>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTableManager()" class="member-name-link">getTableManager</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.reactivestreams.Publisher<wbr>&lt;<a href="../../spi/MarshallableEntry.html" title="interface in org.infinispan.persistence.spi">MarshallableEntry</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#purgeExpired()" class="member-name-link">purgeExpired</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a Publisher that, after it is subscribed to, removes any expired entries from the store and publishes
them to the returned Publisher.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeSegments(org.infinispan.commons.util.IntSet)" class="member-name-link">removeSegments</a><wbr>(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked when a node loses ownership of the given segments.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size(org.infinispan.commons.util.IntSet)" class="member-name-link">size</a><wbr>(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the amount of entries that map to the given segments in the store.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.infinispan.persistence.jdbc.common.impl.BaseJdbcStore">Methods inherited from class&nbsp;<a href="../common/impl/BaseJdbcStore.html#method-summary" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a></h3>
<code><a href="../common/impl/BaseJdbcStore.html#batch(int,org.reactivestreams.Publisher,org.reactivestreams.Publisher)" title="batch(int, Publisher, Publisher)">batch</a>, <a href="../common/impl/BaseJdbcStore.html#clear()" title="clear()">clear</a>, <a href="../common/impl/BaseJdbcStore.html#commit(jakarta.transaction.Transaction)" title="commit(Transaction)">commit</a>, <a href="../common/impl/BaseJdbcStore.html#delete(int,java.lang.Object)" title="delete(int, Object)">delete</a>, <a href="../common/impl/BaseJdbcStore.html#destroyTxConnection(jakarta.transaction.Transaction)" title="destroyTxConnection(Transaction)">destroyTxConnection</a>, <a href="../common/impl/BaseJdbcStore.html#getTxConnection(jakarta.transaction.Transaction)" title="getTxConnection(Transaction)">getTxConnection</a>, <a href="../common/impl/BaseJdbcStore.html#isAvailable()" title="isAvailable()">isAvailable</a>, <a href="../common/impl/BaseJdbcStore.html#load(int,java.lang.Object)" title="load(int, Object)">load</a>, <a href="../common/impl/BaseJdbcStore.html#prepareWithModifications(jakarta.transaction.Transaction,int,org.reactivestreams.Publisher,org.reactivestreams.Publisher)" title="prepareWithModifications(Transaction, int, Publisher, Publisher)">prepareWithModifications</a>, <a href="../common/impl/BaseJdbcStore.html#publishEntries(org.infinispan.commons.util.IntSet,java.util.function.Predicate,boolean)" title="publishEntries(IntSet, Predicate, boolean)">publishEntries</a>, <a href="../common/impl/BaseJdbcStore.html#publishKeys(org.infinispan.commons.util.IntSet,java.util.function.Predicate)" title="publishKeys(IntSet, Predicate)">publishKeys</a>, <a href="../common/impl/BaseJdbcStore.html#rollback(jakarta.transaction.Transaction)" title="rollback(Transaction)">rollback</a>, <a href="../common/impl/BaseJdbcStore.html#start(org.infinispan.persistence.spi.InitializationContext)" title="start(InitializationContext)">start</a>, <a href="../common/impl/BaseJdbcStore.html#stop()" title="stop()">stop</a>, <a href="../common/impl/BaseJdbcStore.html#write(int,org.infinispan.persistence.spi.MarshallableEntry)" title="write(int, MarshallableEntry)">write</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.infinispan.persistence.spi.NonBlockingStore">Methods inherited from interface&nbsp;<a href="../../spi/NonBlockingStore.html#method-summary" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a></h3>
<code><a href="../../spi/NonBlockingStore.html#containsKey(int,java.lang.Object)" title="containsKey(int, Object)">containsKey</a>, <a href="../../spi/NonBlockingStore.html#destroy()" title="destroy()">destroy</a>, <a href="../../spi/NonBlockingStore.html#ignoreCommandWithFlags(long)" title="ignoreCommandWithFlags(long)">ignoreCommandWithFlags</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>JdbcStringBasedStore</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">JdbcStringBasedStore</span>()</div>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="characteristics()">
<h3>characteristics</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../../spi/NonBlockingStore.Characteristic.html" title="enum class in org.infinispan.persistence.spi">NonBlockingStore.Characteristic</a>&gt;</span>&nbsp;<span class="element-name">characteristics</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#characteristics()">NonBlockingStore</a></code></span></div>
<div class="block">Returns a set of characteristics for this store and its elements. This method may be invoked multiple times
to determine which methods of the store can be used and how the data in the store can be handled.
<p>
Refer to <a href="../../spi/NonBlockingStore.Characteristic.html" title="enum class in org.infinispan.persistence.spi"><code>NonBlockingStore.Characteristic</code></a> and its values for descriptions of each characteristic for stores.
The default implementation returns an empty set.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../spi/NonBlockingStore.html#characteristics()">characteristics</a></code>&nbsp;in interface&nbsp;<code><a href="../../spi/NonBlockingStore.html" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</code></dd>
<dt>Overrides:</dt>
<dd><code><a href="../common/impl/BaseJdbcStore.html#characteristics()">characteristics</a></code>&nbsp;in class&nbsp;<code><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>, <a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>the set of characteristics that this store supports.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="createTableOperations(org.infinispan.persistence.spi.InitializationContext,org.infinispan.persistence.jdbc.configuration.JdbcStringBasedStoreConfiguration)">
<h3>createTableOperations</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../common/TableOperations.html" title="interface in org.infinispan.persistence.jdbc.common">TableOperations</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</span>&nbsp;<span class="element-name">createTableOperations</span><wbr><span class="parameters">(<a href="../../spi/InitializationContext.html" title="interface in org.infinispan.persistence.spi">InitializationContext</a>&nbsp;ctx,
 <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&nbsp;configuration)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../common/impl/BaseJdbcStore.html#createTableOperations(org.infinispan.persistence.spi.InitializationContext,C)">BaseJdbcStore</a></code></span></div>
<div class="block">Extension point to allow for initializing and creating a table operations object. All variables in the <a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl"><code>BaseJdbcStore</code></a> will be initialized except for <a href="../common/impl/BaseJdbcStore.html#tableOperations"><code>BaseJdbcStore.tableOperations</code></a> when this is invoked.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../common/impl/BaseJdbcStore.html#createTableOperations(org.infinispan.persistence.spi.InitializationContext,C)">createTableOperations</a></code>&nbsp;in class&nbsp;<code><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>, <a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>ctx</code> - store context</dd>
<dd><code>configuration</code> - configuration of the store</dd>
<dt>Returns:</dt>
<dd>the table operations to use for future calls</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getTableManager()">
<h3>getTableManager</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.infinispan.persistence.jdbc.impl.table.TableManager&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</span>&nbsp;<span class="element-name">getTableManager</span>()</div>
</div>
</section>
</li>
<li>
<section class="detail" id="extraStopSteps()">
<h3>extraStopSteps</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">extraStopSteps</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../common/impl/BaseJdbcStore.html#extraStopSteps()">BaseJdbcStore</a></code></span></div>
<div class="block">Method to extend to add additional steps when the store is shutting down. This is invoked before the <a href="../common/impl/BaseJdbcStore.html#connectionFactory"><code>BaseJdbcStore.connectionFactory</code></a> is shut down and should not do so.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../common/impl/BaseJdbcStore.html#extraStopSteps()">extraStopSteps</a></code>&nbsp;in class&nbsp;<code><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>, <a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="size(org.infinispan.commons.util.IntSet)">
<h3>size</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">size</span><wbr><span class="parameters">(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#size(org.infinispan.commons.util.IntSet)">NonBlockingStore</a></code></span></div>
<div class="block">Returns the amount of entries that map to the given segments in the store.
<h4 id="summary-of-characteristics-effects-heading">Summary of Characteristics Effects</h4>
<table border="1"><caption>Summary of Characteristics Effects</caption>
   <tr>
      <th>Characteristic</th>
      <th>Effect</th>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#BULK_READ"><code>NonBlockingStore.Characteristic.BULK_READ</code></a></td>
      <td>This method is only invoked if the store has this characteristic.</td>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SEGMENTABLE"><code>NonBlockingStore.Characteristic.SEGMENTABLE</code></a></td>
      <td>When this is not set or segmentation is disabled in the
      <a href="../../../configuration/cache/StoreConfiguration.html#segmented()"><code>configuration</code></a>,
      the <code>segments</code> parameter may be ignored.</td>
   </tr>
</table>
<p>
If a problem is encountered, it is recommended to wrap any created/caught Throwable in a
<a href="../../spi/PersistenceException.html" title="class in org.infinispan.persistence.spi"><code>PersistenceException</code></a> and the stage be completed exceptionally.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../spi/NonBlockingStore.html#size(org.infinispan.commons.util.IntSet)">size</a></code>&nbsp;in interface&nbsp;<code><a href="../../spi/NonBlockingStore.html" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</code></dd>
<dt>Overrides:</dt>
<dd><code><a href="../common/impl/BaseJdbcStore.html#size(org.infinispan.commons.util.IntSet)">size</a></code>&nbsp;in class&nbsp;<code><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>, <a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>segments</code> - the segments for which the entries are counted.</dd>
<dt>Returns:</dt>
<dd>a stage that, when complete, contains the count of how many entries are present for the given segments.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="approximateSize(org.infinispan.commons.util.IntSet)">
<h3>approximateSize</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">approximateSize</span><wbr><span class="parameters">(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#approximateSize(org.infinispan.commons.util.IntSet)">NonBlockingStore</a></code></span></div>
<div class="block">Returns an estimation of the amount of entries that map to the given segments in the store. This is similar to
<a href="../../spi/NonBlockingStore.html#size(org.infinispan.commons.util.IntSet)"><code>NonBlockingStore.size(IntSet)</code></a> except that it is not strict about the returned size. For instance, this method might ignore
if an entry is expired or if the store has some underlying optimizations to eventually have a consistent size.
<p>
The implementations should be O(1).
If a size approximation cannot be returned without iterating over all the entries in the store,
the implementation should return <code>-1L</code>.
</p>
<h4 id="summary-of-characteristics-effects-heading1">Summary of Characteristics Effects</h4>
<table border="1"><caption>Summary of Characteristics Effects</caption>
   <tr>
      <th>Characteristic</th>
      <th>Effect</th>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#BULK_READ"><code>NonBlockingStore.Characteristic.BULK_READ</code></a></td>
      <td>This method is only invoked if the store has this characteristic.</td>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SEGMENTABLE"><code>NonBlockingStore.Characteristic.SEGMENTABLE</code></a></td>
      <td>When the store does not have this characteristic or segmentation is disabled in the
      <a href="../../../configuration/cache/StoreConfiguration.html#segmented()"><code>configuration</code></a>,
      the <code>segment</code> parameter is always <code>IntSets.immutableRangeSet(numSegments)</code>.</td>
   </tr>
</table>
<p>
If a problem is encountered, it is recommended to wrap any created/caught Throwable in a
<a href="../../spi/PersistenceException.html" title="class in org.infinispan.persistence.spi"><code>PersistenceException</code></a> and the stage be completed exceptionally.
<p>
The default implementation always returns <code>-1</code>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../spi/NonBlockingStore.html#approximateSize(org.infinispan.commons.util.IntSet)">approximateSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../spi/NonBlockingStore.html" title="interface in org.infinispan.persistence.spi">NonBlockingStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;</code></dd>
<dt>Overrides:</dt>
<dd><code><a href="../common/impl/BaseJdbcStore.html#approximateSize(org.infinispan.commons.util.IntSet)">approximateSize</a></code>&nbsp;in class&nbsp;<code><a href="../common/impl/BaseJdbcStore.html" title="class in org.infinispan.persistence.jdbc.common.impl">BaseJdbcStore</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>, <a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>, <a href="../configuration/JdbcStringBasedStoreConfiguration.html" title="class in org.infinispan.persistence.jdbc.configuration">JdbcStringBasedStoreConfiguration</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>segments</code> - the segments for which the entries are counted.</dd>
<dt>Returns:</dt>
<dd>a stage that, when complete, contains the approximate count of the entries in the given segments,
or <code>-1L</code> if an approximate count cannot be provided.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="addSegments(org.infinispan.commons.util.IntSet)">
<h3>addSegments</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">addSegments</span><wbr><span class="parameters">(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#addSegments(org.infinispan.commons.util.IntSet)">NonBlockingStore</a></code></span></div>
<div class="block">Invoked when a node becomes an owner of the given segments. Some store implementations may require initializing
additional resources when a new segment is required. For example a store could store entries in a different file
per segment.
<h4 id="summary-of-characteristics-effects-heading2">Summary of Characteristics Effects</h4>
<table border="1"><caption>Summary of Characteristics Effects</caption>
   <tr>
      <th>Characteristic</th>
      <th>Effect</th>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SHAREABLE"><code>NonBlockingStore.Characteristic.SHAREABLE</code></a></td>
      <td>If the store has this characteristic and is configured to be <a href="../../../configuration/cache/StoreConfiguration.html#shared()"><code>StoreConfiguration.shared()</code></a>,
         this method will never be invoked.</td>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SEGMENTABLE"><code>NonBlockingStore.Characteristic.SEGMENTABLE</code></a></td>
      <td>This method is invoked only if the store has this characteristic and is configured to be
         <a href="../../../configuration/cache/StoreConfiguration.html#segmented()"><code>segmented</code></a>.</td>
   </tr>
</table>
<p>
If a problem is encountered, it is recommended to wrap any created/caught Throwable in a
<a href="../../spi/PersistenceException.html" title="class in org.infinispan.persistence.spi"><code>PersistenceException</code></a> and the stage be completed exceptionally.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segments</code> - the segments to add.</dd>
<dt>Returns:</dt>
<dd>a stage that, when complete, indicates that the segments have been added.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="removeSegments(org.infinispan.commons.util.IntSet)">
<h3>removeSegments</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link">CompletionStage</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">removeSegments</span><wbr><span class="parameters">(<a href="../../../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#removeSegments(org.infinispan.commons.util.IntSet)">NonBlockingStore</a></code></span></div>
<div class="block">Invoked when a node loses ownership of the given segments. A store must then remove any entries that map to the
given segments and can remove any resources related to the given segments. For example, a database store can
delete rows of the given segment or a file-based store can delete files related to the given segments.
<h4 id="summary-of-characteristics-effects-heading3">Summary of Characteristics Effects</h4>
<table border="1"><caption>Summary of Characteristics Effects</caption>
   <tr>
      <th>Characteristic</th>
      <th>Effect</th>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SHAREABLE"><code>NonBlockingStore.Characteristic.SHAREABLE</code></a></td>
      <td>If the store has this characteristic and is configured to be
      <a href="../../../configuration/cache/StoreConfiguration.html#shared()"><code>shared</code></a>, this method will never be invoked.</td>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#SEGMENTABLE"><code>NonBlockingStore.Characteristic.SEGMENTABLE</code></a></td>
      <td>This method is invoked only if the store has this characteristic and is configured to be
         <a href="../../../configuration/cache/StoreConfiguration.html#segmented()"><code>segmented</code></a>.</td>
   </tr>
</table>
<p>
If a problem is encountered, it is recommended to wrap any created/caught Throwable in a
<a href="../../spi/PersistenceException.html" title="class in org.infinispan.persistence.spi"><code>PersistenceException</code></a> and the stage be completed exceptionally.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segments</code> - the segments to remove.</dd>
<dt>Returns:</dt>
<dd>a stage that, when complete, indicates that the segments have been removed.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getConnectionFactory()">
<h3>getConnectionFactory</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../common/connectionfactory/ConnectionFactory.html" title="class in org.infinispan.persistence.jdbc.common.connectionfactory">ConnectionFactory</a></span>&nbsp;<span class="element-name">getConnectionFactory</span>()</div>
</div>
</section>
</li>
<li>
<section class="detail" id="purgeExpired()">
<h3>purgeExpired</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.reactivestreams.Publisher&lt;<a href="../../spi/MarshallableEntry.html" title="interface in org.infinispan.persistence.spi">MarshallableEntry</a>&lt;<a href="#type-param-K" title="type parameter in JdbcStringBasedStore">K</a>,<wbr><a href="#type-param-V" title="type parameter in JdbcStringBasedStore">V</a>&gt;&gt;</span>&nbsp;<span class="element-name">purgeExpired</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../spi/NonBlockingStore.html#purgeExpired()">NonBlockingStore</a></code></span></div>
<div class="block">Returns a Publisher that, after it is subscribed to, removes any expired entries from the store and publishes
them to the returned Publisher.
<p>
When the Publisher is subscribed to, it is expected to do point-in-time expiration and should
not return a Publisher that has infinite entries or never completes.
<p>
Subscribing to the returned <code>Publisher</code> should not block the invoking thread. It is the responsibility of
the store implementation to ensure this occurs. If however the store must block to perform an operation it
is recommended to wrap your Publisher before returning with the
<a href="../../../util/concurrent/BlockingManager.html#blockingPublisher(org.reactivestreams.Publisher)"><code>BlockingManager.blockingPublisher(Publisher)</code></a> method and it will handle
subscription and observation on the blocking and non-blocking executors respectively.
</p>
<h4 id="summary-of-characteristics-effects-heading4">Summary of Characteristics Effects</h4>
<table border="1"><caption>Summary of Characteristics Effects</caption>
   <tr>
      <th>Characteristic</th>
      <th>Effect</th>
   </tr>
   <tr>
      <td><a href="../../spi/NonBlockingStore.Characteristic.html#EXPIRATION"><code>NonBlockingStore.Characteristic.EXPIRATION</code></a></td>
      <td>This method is only invoked if the store has this characteristic.</td>
   </tr>
</table>
<p>
If a problem is encountered, it is recommended to wrap any created/caught Throwable in a
<a href="../../spi/PersistenceException.html" title="class in org.infinispan.persistence.spi"><code>PersistenceException</code></a> and the stage be completed exceptionally.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a Publisher that publishes the entries that are expired at the time of subscription.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright  20092026 <a href="https://infinispan.org">infinispan.org</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
