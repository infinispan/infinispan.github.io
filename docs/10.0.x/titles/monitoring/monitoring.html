<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="generator" content="Asciidoctor 1.5.8"> <title>Monitoring Infinispan 10.0</title> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"> <style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style> <link rel="canonical" href="http://infinispan.org/docs/stable/user_guide/user_guide.html"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/themes/default/style.min.css"> <link rel="stylesheet" href="../../css/css.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/jstree.min.js"></script> <script src="../../js/js.js"></script> </head> <body class="book toc2 toc-left"> <div id="header"> <h1>Monitoring Infinispan 10.0</h1> <div id="toc" class="toc2"> <div id="toctitle">Table of Contents</div> <ul class="sectlevel1"> <li><a href="#management">1. Management</a> <ul class="sectlevel2"> <li><a href="#cli">1.1. CLI</a></li> <li><a href="#console">1.2. Console</a></li> <li><a href="#jmx">1.3. JMX</a></li> <li><a href="#prometheus">1.4. Prometheus</a></li> <li><a href="#server_access_logs">1.5. Access Logs</a> <ul class="sectlevel3"> <li><a href="#server_access_logs_enable">1.5.1. Enabling Access Logs</a></li> <li><a href="#server_access_logs_properties">1.5.2. Access Log Properties</a></li> </ul> </li> </ul> </li> <li><a href="#jmx_mgmt_tooling">2. Management Tooling</a> <ul class="sectlevel2"> <li><a href="#jmx_2">2.1. JMX</a> <ul class="sectlevel3"> <li><a href="#understanding_the_exposed_mbeans">2.1.1. Understanding The Exposed MBeans</a></li> <li><a href="#enabling_jmx_statistics">2.1.2. Enabling JMX Statistics</a></li> <li><a href="#monitoring_cluster_health">2.1.3. Monitoring cluster health</a></li> <li><a href="#multiple_jmx_domains">2.1.4. Multiple JMX Domains</a></li> <li><a href="#registering_mbeans_in_non_default_mbean_servers">2.1.5. Registering MBeans In Non-Default MBean Servers</a></li> <li><a href="#available_mbeans">2.1.6. Available MBeans</a></li> </ul> </li> <li><a href="#command_line_interface">2.2. Command-Line Interface (CLI)</a> <ul class="sectlevel3"> <li><a href="#commands">2.2.1. Commands</a> <ul class="sectlevel4"> <li><a href="#abort">abort</a> <ul class="sectlevel5"> <li><a href="#begin">begin</a></li> <li><a href="#cache">cache</a></li> <li><a href="#clearcache">clearcache</a></li> <li><a href="#commit">commit</a></li> <li><a href="#container">container</a></li> <li><a href="#create">create</a></li> <li><a href="#deny">deny</a></li> <li><a href="#disconnect">disconnect</a></li> <li><a href="#encoding">encoding</a></li> <li><a href="#end">end</a></li> <li><a href="#evict">evict</a></li> <li><a href="#get">get</a></li> <li><a href="#grant">grant</a></li> <li><a href="#info">info</a></li> <li><a href="#locate">locate</a></li> <li><a href="#put">put</a></li> <li><a href="#replace">replace</a></li> <li><a href="#roles">roles</a></li> <li><a href="#rollback">rollback</a></li> <li><a href="#site">site</a></li> <li><a href="#start">start</a></li> <li><a href="#stats">stats</a></li> <li><a href="#upgrade">upgrade</a></li> <li><a href="#version">version</a></li> </ul> </li> <li><a href="#data_types">Data Types</a></li> <li><a href="#time_values">Time Values</a></li> </ul> </li> </ul> </li> <li><a href="#hawt_io">2.3. Hawt.io</a></li> <li><a href="#writing_plugins_for_other_management_tools">2.4. Writing plugins for other management tools</a></li> </ul> </li> </ul> </div> </div> <div id="content"> <div class="sect1"> <h2 id="management"><a class="anchor" href="#management"></a>1. Management</h2> <div class="sectionbody"> <div class="sect2"> <h3 id="cli"><a class="anchor" href="#cli"></a>1.1. CLI</h3> <div class="paragraph"> <p>You can use the CLI to perform management operations on a standalone node or a domain controller.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code>$ bin/cli.sh
[disconnected /] connect
[standalone@localhost:9990 /] cd subsystem=datagrid-infinispan
[standalone@localhost:9990 subsystem=datagrid-infinispan] cd cache-container=local
[standalone@localhost:9990 cache-container=local] cd local-cache=default
[standalone@localhost:9990 local-cache=default]</code></pre> </div> </div> <div class="paragraph"> <p>The CLI is extremely powerful and supports a number of useful features to navigate the management resource tree as well as inspecting single resources or entire subtrees. It is also possible to batch multiple commands together so that they are applied as a single operation.</p> </div> </div> <div class="sect2"> <h3 id="console"><a class="anchor" href="#console"></a>1.2. Console</h3> <div class="paragraph"> <p>You can use the web console to perform management operations on servers running in either standalone or domain mode. The console only supports a subset of the operations provided by the CLI, however you can perform the following actions:</p> </div> <div class="ulist"> <ul> <li> <p>View/Edit Cache Container Configuration</p> </li> <li> <p>Execute Tasks across Containers</p> </li> <li> <p>View/Edit Cache Configurations</p> </li> <li> <p>Create/Destroy Cache Instances</p> </li> <li> <p>View Cluster/Server/Cache Statistics</p> </li> <li> <p>View event logs</p> </li> <li> <p>Start/Stop servers/clusters (domain mode only)</p> </li> </ul> </div> <div class="paragraph"> <p>To access the console start your server(s) in the required mode, navigate to <code><a href="http://localhost:9990" class="bare">http://localhost:9990</a></code> and enter your user credentials. If you would like to contribute to the development of the console, the source code can be found <a href="https://github.com/infinispan/infinispan-management-console">here</a>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Before you can use the web console, you must first setup at least one user account via the <code>./bin/add-user.sh</code> script. Detailed instructions of this process are presented in your browser if you attempt to access the console before creating any user accounts. </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="jmx"><a class="anchor" href="#jmx"></a>1.3. JMX</h3> <div class="paragraph"> <p>You can monitor an Infinispan Server over JMX in two ways:</p> </div> <div class="ulist"> <ul> <li> <p>Use JConsole or VisualVM running locally as the same user. This will use a local <a href="http://www.oracle.com/technetwork/java/jvmstat-142257.html">jvmstat</a> connection and requires no additional setup</p> </li> <li> <p>Use JMX remoting (aka JSR-160) to connect from any host. This requires connecting through the management port (usually 9990) using a special protocol which respects the server security configuration</p> </li> </ul> </div> <div class="paragraph"> <p>To setup a client for JMX remoting you need to add the $ISPN_HOME/bin/client/jboss-client.jar to your client&#8217;s classpath and use one of the following service URLs:</p> </div> <div class="ulist"> <ul> <li> <p><code>service:jmx:remote-http-jmx://host:port</code> for plain connections through the management interface</p> </li> <li> <p><code>service:jmx:remote-https-jmx://host:port</code> for TLS connections through the management interface (although this requires having the appropriate keys available)</p> </li> <li> <p><code>service:jmx:remoting-jmx://localhost:port</code> for connections through the remoting interface (necessary for connecting to individual servers in a domain)</p> </li> </ul> </div> <div class="paragraph"> <p>The JMX subsystem registers a service with the Remoting endpoint so that remote access to JMX can be obtained over the exposed Remoting connector. This is switched on by default in standalone mode and accessible over port 9990 but in domain mode it is switched off so it needs to be enabled. In domain mode the port will be the port of the Remoting connector for the Server instance to be monitored.</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code data-lang="xml"><span class="tag">&lt;subsystem</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:jboss:domain:jmx:1.3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;expose-resolved-model</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;expose-expression-model</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;remoting-connector</span> <span class="attribute-name">use-management-endpoint</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/subsystem&gt;</span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="prometheus"><a class="anchor" href="#prometheus"></a>1.4. Prometheus</h3> <div class="paragraph"> <p>You can also expose JMX beans using <a href="https://prometheus.io/docs/prometheus/latest/querying/api/">Prometheus</a>. In order to do this, just run the server with additional parameter <code>--jmx</code>, for example: <code>./standalone.xml -c cloud.xml --jmx</code>. Prometheus configuration is stored in <code>prometheus_config.yaml</code> file. It is possible to override this file by specifying it after <code>--jmx</code> parameter. For example: <code>./standalone.sh -c cloud.xml --jmx my-config.yaml</code>.</p> </div> </div> <div class="sect2"> <h3 id="server_access_logs"><a class="anchor" href="#server_access_logs"></a>1.5. Access Logs</h3> <div class="paragraph"> <p>Hot Rod and REST endpoints can record all inbound client requests as log entries with the following categories:</p> </div> <div class="ulist"> <ul> <li> <p><code>org.infinispan.HOTROD_ACCESS_LOG</code> logging category for the Hot Rod endpoint.</p> </li> <li> <p><code>org.infinispan.REST_ACCESS_LOG</code> logging category for the REST endpoint.</p> </li> </ul> </div> <div class="sect3"> <h4 id="server_access_logs_enable"><a class="anchor" href="#server_access_logs_enable"></a>1.5.1. Enabling Access Logs</h4> <div class="paragraph"> <p>Access logs for Hot Rod and REST endpoints are disabled by default. To enable either logging category, set the level to <code>TRACE</code> in the server configuration file, as in the following example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code data-lang="xml"><span class="tag">&lt;logger</span> <span class="attribute-name">category</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.infinispan.HOTROD_ACCESS_LOG</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">use-parent-handlers</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;level</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TRACE</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;handlers&gt;</span>
       <span class="tag">&lt;handler</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HR-ACCESS-FILE</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/handlers&gt;</span>
<span class="tag">&lt;/logger&gt;</span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="server_access_logs_properties"><a class="anchor" href="#server_access_logs_properties"></a>1.5.2. Access Log Properties</h4> <div class="paragraph"> <p>The default format for access logs is as follows:</p> </div> <div class="paragraph"> <p><code>%X{address} %X{user} [%d{dd/MMM/yyyy:HH:mm:ss z}] &quot;%X{method} %m %X{protocol}&quot; %X{status} %X{requestSize} %X{responseSize} %X{duration}%n</code></p> </div> <div class="paragraph"> <p>The preceding format creates log entries such as the following:</p> </div> <div class="paragraph"> <p><code>127.0.0.1 - [30/Oct/2018:12:41:50 CET] "PUT /rest/default/key HTTP/1.1" 404 5 77 10</code></p> </div> <div class="paragraph"> <p>Logging properties use the <code>%X{name}</code> notation and let you modify the format of access logs. The following are the default logging properties:</p> </div> <table class="tableblock frame-all grid-all stretch"> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Property</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>address</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Either the <code>X-Forwarded-For</code> header or the client IP address.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Principal name, if using authentication.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>method</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Method used. <code>PUT</code>, <code>GET</code>, and so on.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>protocol</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Protocol used. <code>HTTP/1.1</code>, <code>HTTP/2</code>, <code>HOTROD/2.9</code>, and so on.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">An HTTP status code for the REST endpoint. <code>OK</code> or an exception for the Hot Rod endpoint.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestSize</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Size, in bytes, of the request.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>responseSize</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Size, in bytes, of the response.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>duration</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Number of milliseconds that the server took to handle the request.</p></td> </tr> </tbody> </table> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> <div class="paragraph"> <p>Use the header name prefixed with <code>h:</code> to log headers that were included in requests; for example, <code>%X{h:User-Agent}</code>.</p> </div> </td> </tr> </table> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="jmx_mgmt_tooling"><a class="anchor" href="#jmx_mgmt_tooling"></a>2. Management Tooling</h2> <div class="sectionbody"> <div class="paragraph"> <p>Management of Infinispan instances is all about exposing as much relevant statistical information that allows administrators to get a view of the state of each Infinispan instance. Taking in account that a single installation could be made up of several tens or hundreds Infinispan instances, providing clear and concise information in an efficient manner is imperative. The following sections dive into the range of management tooling that Infinispan provides.</p> </div> <div class="sect2"> <h3 id="jmx_2"><a class="anchor" href="#jmx_2"></a>2.1. JMX</h3> <div class="paragraph"> <p>Over the years, <a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html">JMX</a> has become the de facto standard for management and administration of middleware and as a result, the Infinispan team has decided to standardize on this technology for the exposure of management and statistical information.</p> </div> <div class="sect3"> <h4 id="understanding_the_exposed_mbeans"><a class="anchor" href="#understanding_the_exposed_mbeans"></a>2.1.1. Understanding The Exposed MBeans</h4> <div class="paragraph"> <p>By connecting to the VM(s) where Infinispan is running with a standard JMX GUI such as <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/management/jconsole.html">JConsole</a> or <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/">VisualVM</a> you should find the following MBeans:</p> </div> <div class="ulist"> <ul> <li> <p>For CacheManager level JMX statistics, without further configuration, you should see an MBean called <em>org.infinispan:type=CacheManager,name="DefaultCacheManager"</em> with <a href="https://docs.jboss.org/infinispan/10.0/apidocs/jmxComponents.html#CacheManager">properties specified by the CacheManager MBean</a> .</p> </li> <li> <p>Using the cacheManagerName attribute in globalJmxStatistics XML element, or using the corresponding GlobalJmxStatisticsConfigurationBuilder.cacheManagerName(String cacheManagerName) call, you can name the cache manager in such way that the name is used as part of the JMX object name. So, if the name had been "Hibernate2LC", the JMX name for the cache manager would have been: <em>org.infinispan:type=CacheManager,name="Hibernate2LC"</em> . This offers a nice and clean way to manage environments where multiple cache managers are deployed, which follows <a href="http://www.oracle.com/technetwork/java/javase/tech/best-practices-jsp-136021.html">JMX best practices</a> .</p> </li> <li> <p>For Cache level JMX statistics, you should see several different MBeans depending on which configuration options have been enabled. For example, if you have configured a write behind cache store, you should see an MBean exposing properties belonging to the cache store component. All Cache level MBeans follow the same format though which is the following: <code>org.infinispan:type=Cache,name="${name-of-cache}(${cache-mode})",manager="${name-of-cache-manager}",component=${component-name}</code> where:</p> </li> <li> <p>${name-of-cache} has been substituted by the actual cache name. If this cache represents the default cache, its name will be <code>___defaultCache</code>.</p> </li> <li> <p>${cache-mode} has been substituted by the cache mode of the cache. The cache mode is represented by the lower case version of the possible enumeration values shown <a href="https://docs.jboss.org/infinispan/10.0/apidocs/org/infinispan/configuration/cache/CacheMode">here</a>.</p> </li> <li> <p>${name-of-cache-manager} has been substituted by the name of the cache manager to which this cache belongs. The name is derived from the <em>cacheManagerName</em> attribute value in <code>globalJmxStatistics</code> element.</p> </li> <li> <p>${component-name} has been substituted by one of the JMX component names in the <a href="https://docs.jboss.org/infinispan/10.0/apidocs/jmxComponents.html">JMX reference documentation</a> .</p> </li> </ul> </div> <div class="paragraph"> <p>For example, the cache store JMX component MBean for a default cache configured with synchronous distribution would have the following name: <code>org.infinispan:type=Cache,name="___defaultcache(dist_sync)",manager="DefaultCacheManager",component=CacheStore</code></p> </div> <div class="paragraph"> <p>Please note that cache and cache manager names are quoted to protect against illegal characters being used in these user-defined names.</p> </div> </div> <div class="sect3"> <h4 id="enabling_jmx_statistics"><a class="anchor" href="#enabling_jmx_statistics"></a>2.1.2. Enabling JMX Statistics</h4> <div class="paragraph"> <p>The MBeans mentioned in the previous section are always created and registered in the MBeanServer allowing you to manage your caches but some of their attributes do not expose meaningful values unless you take the extra step of enabling collection of statistics. Gathering and reporting statistics via JMX can be enabled at 2 different levels:</p> </div> <div class="paragraph"> <div class="title">CacheManager level</div> <p>The CacheManager is the entity that governs all the cache instances that have been created from it. Enabling CacheManager statistics collections differs depending on the configuration style:</p> </div> <div class="ulist"> <ul> <li> <p>If configuring the CacheManager via XML, make sure you add the following XML under the <code>&lt;cache-container /&gt;</code> element:</p> <div class="literalblock"> <div class="content"> <pre>&lt;cache-container statistics="true"/&gt;</pre> </div> </div> </li> <li> <p>If configuring the CacheManager programmatically, simply add the following code:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java">GlobalConfigurationBuilder globalConfigurationBuilder = ...
globalConfigurationBuilder.globalJmxStatistics().enable();</code></pre> </div> </div> <div class="paragraph"> <div class="title">Cache level</div> <p>At this level, you will receive management information generated by individual cache instances. Enabling Cache statistics collections differs depending on the configuration style:</p> </div> <div class="ulist"> <ul> <li> <p>If configuring the Cache via XML, make sure you add the following XML under the one of the top level cache elements, such as <code>&lt;local-cache /&gt;</code>:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code data-lang="xml"><span class="tag">&lt;local-cache</span> <span class="attribute-name">statistics</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>If configuring the Cache programmatically, simply add the following code:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java">ConfigurationBuilder configurationBuilder = ...
configurationBuilder.jmxStatistics().enable();</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="monitoring_cluster_health"><a class="anchor" href="#monitoring_cluster_health"></a>2.1.3. Monitoring cluster health</h4> <div class="paragraph"> <p>It is also possible to monitor Infinispan cluster health using JMX. On CacheManager there&#8217;s an additional object called <code>CacheContainerHealth</code>. It contains the following attributes:</p> </div> <div class="ulist"> <ul> <li> <p>cacheHealth - a list of caches and corresponding statuses (HEALTHY, DEGRADED or HEALTHY_REBALANCING)</p> </li> <li> <p>clusterHealth - overall cluster health</p> </li> <li> <p>clusterName - cluster name</p> </li> <li> <p>freeMemoryKb - Free memory obtained from JVM runtime measured in KB</p> </li> <li> <p>numberOfCpus - The number of CPUs obtained from JVM runtime</p> </li> <li> <p>numberOfNodes - The number of nodes in the cluster</p> </li> <li> <p>totalMemoryKb - Total memory obtained from JVM runtime measured in KB</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="multiple_jmx_domains"><a class="anchor" href="#multiple_jmx_domains"></a>2.1.4. Multiple JMX Domains</h4> <div class="paragraph"> <p>There can be situations where several CacheManager instances are created in a single VM, or Cache names belonging to different CacheManagers under the same VM clash.</p> </div> <div class="paragraph"> <p>Using different JMX domains for multi cache manager environments should be last resort. Instead, it&#8217;s possible to name a cache manager in such way that it can easily be identified and used by monitoring tools. For example:</p> </div> <div class="ulist"> <ul> <li> <p>Via XML:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code data-lang="xml"><span class="tag">&lt;cache-container</span> <span class="attribute-name">statistics</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hibernate2LC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>Programmatically:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java">GlobalConfigurationBuilder globalConfigurationBuilder = ...
globalConfigurationBuilder.globalJmxStatistics()
    .enable()
    .cacheManagerName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hibernate2LC</span><span class="delimiter">&quot;</span></span>);</code></pre> </div> </div> <div class="paragraph"> <p>Using either of these options should result on the CacheManager MBean name being: <code>org.infinispan:type=CacheManager,name="Hibernate2LC"</code></p> </div> <div class="paragraph"> <p>For the time being, you can still set your own jmxDomain if you need to and we also allow duplicate domains, or rather duplicate JMX names, but these should be limited to very special cases where different cache managers within the same JVM are named equally.</p> </div> </div> <div class="sect3"> <h4 id="registering_mbeans_in_non_default_mbean_servers"><a class="anchor" href="#registering_mbeans_in_non_default_mbean_servers"></a>2.1.5. Registering MBeans In Non-Default MBean Servers</h4> <div class="paragraph"> <p>Let&#8217;s discuss where Infinispan registers all these MBeans. By default, Infinispan registers them in the <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/management/ManagementFactory.html#getPlatformMBeanServer--">standard JVM MBeanServer platform</a> . However, users might want to register these MBeans in a different MBeanServer instance. For example, an application server might work with a different MBeanServer instance to the default platform one. In such cases, users should implement the <a href="https://docs.jboss.org/infinispan/10.0/apidocs/org/infinispan/jmx/MBeanServerLookup.html">MBeanServerLookup interface</a> provided by Infinispan so that the <a href="https://docs.jboss.org/infinispan/10.0/apidocs/org/infinispan/jmx/MBeanServerLookup.html#getMBeanServer--">getMBeanServer() method</a> returns the MBeanServer under which Infinispan should register the management MBeans. Once you have your implementation ready, simply configure Infinispan with the fully qualified name of this class. For example:</p> </div> <div class="ulist"> <ul> <li> <p>Via XML:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight nowrap"><code data-lang="xml"><span class="tag">&lt;cache-container</span> <span class="attribute-name">statistics</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;jmx</span> <span class="attribute-name">mbean-server-lookup</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.acme.MyMBeanServerLookup</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/cache-container&gt;</span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>Programmatically:</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="CodeRay highlight"><code data-lang="java">GlobalConfigurationBuilder globalConfigurationBuilder = ...
globalConfigurationBuilder.globalJmxStatistics()
    .enable()
    .mBeanServerLookup(<span class="keyword">new</span> com.acme.MyMBeanServerLookup());</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="available_mbeans"><a class="anchor" href="#available_mbeans"></a>2.1.6. Available MBeans</h4> <div class="paragraph"> <p>For a complete list of available MBeans, refer to the <a href="https://docs.jboss.org/infinispan/10.0/apidocs/jmxComponents.html">JMX reference documentation</a></p> </div> </div> </div> <div class="sect2"> <h3 id="command_line_interface"><a class="anchor" href="#command_line_interface"></a>2.2. Command-Line Interface (CLI)</h3> <div class="paragraph"> <p>Infinispan offers a simple Command-Line Interface (CLI) with which it is possible to interact with the data within the caches and with most of the internal components (e.g. transactions, cross-site backups, rolling upgrades).</p> </div> <div class="paragraph"> <p>The CLI is built out of two elements: a server-side module and the client command tool. The server-side module (<code>infinispan-cli-server-$VERSION.jar</code>) provides the actual interpreter for the commands and needs to be included alongside your application. Infinispan Server includes CLI support out of the box.</p> </div> <div class="paragraph"> <p>Currently the server (and the client) use the JMX protocol to communicate, but in a future release we plan to support other communication protocols (in particular our own Hot Rod).</p> </div> <div class="paragraph"> <p>The CLI offers both an interactive and a batch mode. To invoke the client, run the <em>bin/ispn-cli.[sh|bat]</em> script.</p> </div> <div class="paragraph"> <p>The following is a list of command-line switches which affect how the CLI can be started:</p> </div> <div class="listingblock"> <div class="content"> <pre>-c, --connect=URL       connects to a running instance of Infinispan.
                        JMX over RMI jmx://[username[:password]]@host:port[/container[/cache]]
                        JMX over JBoss remoting remoting://[username[:password]]@host:port[/container[/cache]]
-f, --file=FILE         reads input from the specified file instead of using                          
                        interactive mode. If FILE is '-', then commands will be read
                        from stdin
-h, --help              shows this help page 
-v, --version           shows version information</pre> </div> </div> <div class="ulist"> <ul> <li> <p>JMX over RMI is the traditional way in which JMX clients connect to MBeanServers. Please refer to the <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html">JDK Monitoring and Management</a> documentation for details on how to configure the process to be monitored</p> </li> <li> <p>JMX over JBoss Remoting is the protocol of choice when your Infinispan application is running within WildFly or EAP.</p> </li> </ul> </div> <div class="paragraph"> <p>The connection to the application can also be initiated from within the CLI using the connect command.</p> </div> <div class="listingblock"> <div class="content"> <pre>[disconnected//]&gt; connect jmx://localhost:12000
[jmx://localhost:12000/MyCacheManager/&gt;</pre> </div> </div> <div class="paragraph"> <p>The CLI prompt will show the active connection information, including the currently selected CacheManager. Initially no cache is selected so, before performing any cache operations, one must be selected. For this the <em>cache</em> command is used. The CLI supports tab-completion for all commands and options and for most parameters where it makes sense to do so. Therefore typing <em>cache</em> and pressing TAB will show a list of active caches:</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/&gt; cache
___defaultcache  namedCache
[jmx://localhost:12000/MyCacheManager/]&gt; cache ___defaultcache
[jmx://localhost:12000/MyCacheManager/___defaultcache]&gt;</pre> </div> </div> <div class="paragraph"> <p>Pressing TAB at an empty prompt will show the list of all available commands:</p> </div> <div class="listingblock"> <div class="content"> <pre>alias       cache       container   encoding    get         locate      remove      site        upgrade     
abort       clearcache  create      end         help        put         replace     start       version     
begin       commit      disconnect  evict       info        quit        rollback    stats     </pre> </div> </div> <div class="paragraph"> <p>The CLI is based on <a href="https://github.com/aeshell/aesh">Æsh</a> and therefore offers many keyboard shortcuts to navigate and search the history of commands, to manipulate the cursor at the prompt, including both Emacs and VI modes of operation.</p> </div> <div class="sect3"> <h4 id="commands"><a class="anchor" href="#commands"></a>2.2.1. Commands</h4> <div class="sect4"> <h5 id="abort"><a class="anchor" href="#abort"></a>abort</h5> <div class="paragraph"> <p>The <em>abort</em> command is used to abort a running batch initiated by the <em>start</em> command</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; start
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; abort
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
null</pre> </div> </div> <div class="sect5"> <h6 id="begin"><a class="anchor" href="#begin"></a>begin</h6> <div class="paragraph"> <p>The <em>begin</em> command starts a transaction. In order for this command to work, the cache(s) on which the subsequent operations are invoked must have transactions enabled.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; begin
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put b b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; commit</pre> </div> </div> </div> <div class="sect5"> <h6 id="cache"><a class="anchor" href="#cache"></a>cache</h6> <div class="paragraph"> <p>The <em>cache</em> command selects the cache to use as default for all subsequent operations. If it is invoked without parameters it shows the currently selected cache.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; cache ___defaultcache
[jmx://localhost:12000/MyCacheManager/___defaultcache]&gt; cache
___defaultcache
[jmx://localhost:12000/MyCacheManager/___defaultcache]&gt;</pre> </div> </div> </div> <div class="sect5"> <h6 id="clearcache"><a class="anchor" href="#clearcache"></a>clearcache</h6> <div class="paragraph"> <p>The <em>clearcache</em> command clears a cache from all content.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; clearcache
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
null</pre> </div> </div> </div> <div class="sect5"> <h6 id="commit"><a class="anchor" href="#commit"></a>commit</h6> <div class="paragraph"> <p>The <em>commit</em> command commits an ongoing transaction</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; begin
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put b b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; commit</pre> </div> </div> </div> <div class="sect5"> <h6 id="container"><a class="anchor" href="#container"></a>container</h6> <div class="paragraph"> <p>The <em>container</em> command selects the default container (cache manager). Invoked without parameters it lists all available containers</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; container
MyCacheManager OtherCacheManager
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; container OtherCacheManager
[jmx://localhost:12000/OtherCacheManager/]&gt;</pre> </div> </div> </div> <div class="sect5"> <h6 id="create"><a class="anchor" href="#create"></a>create</h6> <div class="paragraph"> <p>The <em>create</em> command creates a new cache based on the configuration of an existing cache definition</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; create newCache like namedCache
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; cache newCache
[jmx://localhost:12000/MyCacheManager/newCache]&gt;</pre> </div> </div> </div> <div class="sect5"> <h6 id="deny"><a class="anchor" href="#deny"></a>deny</h6> <div class="paragraph"> <p>When authorization is enabled and the role mapper has been configured to be the ClusterRoleMapper, principal to role mappings are stored within the cluster registry (a replicated cache available to all nodes). The <em>deny</em> command can be used to deny roles previously assigned to a principal:</p> </div> <div class="listingblock"> <div class="content"> <pre>[remoting://localhost:9999]&gt; deny supervisor to user1</pre> </div> </div> </div> <div class="sect5"> <h6 id="disconnect"><a class="anchor" href="#disconnect"></a>disconnect</h6> <div class="paragraph"> <p>The <em>disconnect</em> command disconnects the currently active connection allowing the CLI to connect to another instance.</p> </div> <div class="listingblock"> <div class="content"> <pre>[remoting://localhost:9999]&gt; deny supervisor to user1</pre> </div> </div> </div> <div class="sect5"> <h6 id="encoding"><a class="anchor" href="#encoding"></a>encoding</h6> <div class="paragraph"> <p>The <em>encoding</em> command is used to set a default codec to use when reading/writing entries from/to a cache. When invoked without arguments it shows the currently selected codec. This command is useful since currently remote protocols such as HotRod and Memcached wrap keys and values in specialized structures.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; encoding
none
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; encoding --list
memcached
hotrod
none
rest
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; encoding hotrod</pre> </div> </div> </div> <div class="sect5"> <h6 id="end"><a class="anchor" href="#end"></a>end</h6> <div class="paragraph"> <p>The <em>end</em> command is used to successfully end a running batch initiated by the <em>start</em> command</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; start
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; end
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
a</pre> </div> </div> </div> <div class="sect5"> <h6 id="evict"><a class="anchor" href="#evict"></a>evict</h6> <div class="paragraph"> <p>The <em>evict</em> command is used to evict from the cache the entry associated with a specific key.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; evict a</pre> </div> </div> </div> <div class="sect5"> <h6 id="get"><a class="anchor" href="#get"></a>get</h6> <div class="paragraph"> <p>The <em>get</em> command is used to show the value associated to a specified key. For primitive types and Strings, the <em>get</em> command will simply print the default representation. For other objects, a JSON representation of the object will be printed.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
a</pre> </div> </div> </div> <div class="sect5"> <h6 id="grant"><a class="anchor" href="#grant"></a>grant</h6> <div class="paragraph"> <p>When authorization is enabled and the role mapper has been configured to be the ClusterRoleMapper, principal to role mappings are stored within the cluster registry (a replicated cache available to all nodes). The <em>grant</em> command can be used to grant new roles to a principal:</p> </div> <div class="listingblock"> <div class="content"> <pre>[remoting://localhost:9999]&gt; grant supervisor to user1</pre> </div> </div> </div> <div class="sect5"> <h6 id="info"><a class="anchor" href="#info"></a>info</h6> <div class="paragraph"> <p>The <em>info</em> command is used to show the configuration of the currently selected cache or container.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; info
GlobalConfiguration{asyncListenerExecutor=ExecutorFactoryConfiguration{factory=org.infinispan.executors.DefaultExecutorFactory@98add58}, asyncTransportExecutor=ExecutorFactoryConfiguration{factory=org.infinispan.executors.DefaultExecutorFactory@7bc9c14c}, evictionScheduledExecutor=ScheduledExecutorFactoryConfiguration{factory=org.infinispan.executors.DefaultScheduledExecutorFactory@7ab1a411}, replicationQueueScheduledExecutor=ScheduledExecutorFactoryConfiguration{factory=org.infinispan.executors.DefaultScheduledExecutorFactory@248a9705}, globalJmxStatistics=GlobalJmxStatisticsConfiguration{allowDuplicateDomains=true, enabled=true, jmxDomain='jboss.infinispan', mBeanServerLookup=org.jboss.as.clustering.infinispan.MBeanServerProvider@6c0dc01, cacheManagerName='local', properties={}}, transport=TransportConfiguration{clusterName='ISPN', machineId='null', rackId='null', siteId='null', strictPeerToPeer=false, distributedSyncTimeout=240000, transport=null, nodeName='null', properties={}}, serialization=SerializationConfiguration{advancedExternalizers={1100=org.infinispan.server.core.CacheValue$Externalizer@5fabc91d, 1101=org.infinispan.server.memcached.MemcachedValue$Externalizer@720bffd, 1104=org.infinispan.server.hotrod.ServerAddress$Externalizer@771c7eb2}, marshaller=org.infinispan.marshall.VersionAwareMarshaller@6fc21535, version=52, classResolver=org.jboss.marshalling.ModularClassResolver@2efe83e5}, shutdown=ShutdownConfiguration{hookBehavior=DONT_REGISTER}, modules={}, site=SiteConfiguration{localSite='null'}}</pre> </div> </div> </div> <div class="sect5"> <h6 id="locate"><a class="anchor" href="#locate"></a>locate</h6> <div class="paragraph"> <p>The <em>locate</em> command shows the physical location of a specified entry in a distributed cluster.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; locate a
[host/node1,host/node2]</pre> </div> </div> </div> <div class="sect5"> <h6 id="put"><a class="anchor" href="#put"></a>put</h6> <div class="paragraph"> <p>The <em>put</em> command inserts an entry in the cache. If the cache previously contained a mapping for the key, the old value is replaced by the specified value. The user can control the type of data that the CLI will use to store the key and value.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put b 100
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put c 4139l
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put d true
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put e { "package.MyClass": {"i": 5, "x": null, "b": true } }</pre> </div> </div> <div class="paragraph"> <p>The put command can optionally specify a lifespan and a maximum idle time.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a expires 10s
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a expires 10m maxidle 1m</pre> </div> </div> </div> <div class="sect5"> <h6 id="replace"><a class="anchor" href="#replace"></a>replace</h6> <div class="paragraph"> <p>The <em>replace</em> command replaces an existing entry in the cache. If an old value is specified, then the replacement happens only if the value in the cache coincides.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; replace a b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; replace a b c
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
c
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; replace a b d
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; get a
c</pre> </div> </div> </div> <div class="sect5"> <h6 id="roles"><a class="anchor" href="#roles"></a>roles</h6> <div class="paragraph"> <p>When authorization is enabled and the role mapper has been configured to be the ClusterRoleMapper, principal to role mappings are stored within the cluster registry (a replicated cache available to all nodes). The <em>roles</em> command can be used to list the roles associated to a specific user, or to all users if one is not given:</p> </div> <div class="listingblock"> <div class="content"> <pre>[remoting://localhost:9999]&gt; roles user1
[supervisor, reader]</pre> </div> </div> </div> <div class="sect5"> <h6 id="rollback"><a class="anchor" href="#rollback"></a>rollback</h6> <div class="paragraph"> <p>The <em>rollback</em> command rolls back an ongoing transaction</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; begin
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put b b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; rollback</pre> </div> </div> </div> <div class="sect5"> <h6 id="site"><a class="anchor" href="#site"></a>site</h6> <div class="paragraph"> <p>The <em>site</em> command performs operations related to the administration of cross-site replication. It can be used to obtain information related to the status of a site and to change the status (online/offline)</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; site --status NYC
online
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; site --offline NYC
ok
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; site --status NYC
offline
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; site --online NYC</pre> </div> </div> </div> <div class="sect5"> <h6 id="start"><a class="anchor" href="#start"></a>start</h6> <div class="paragraph"> <p>The <em>start</em> command initiates a batch of operations.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; start
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put a a
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; put b b
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; end</pre> </div> </div> </div> <div class="sect5"> <h6 id="stats"><a class="anchor" href="#stats"></a>stats</h6> <div class="paragraph"> <p>The <em>stats</em> command displays statistics about a cache</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; stats
Statistics: {
  averageWriteTime: 143
  evictions: 10
  misses: 5
  hitRatio: 1.0
  readWriteRatio: 10.0
  removeMisses: 0
  timeSinceReset: 2123
  statisticsEnabled: true
  stores: 100
  elapsedTime: 93
  averageReadTime: 14
  removeHits: 0
  numberOfEntries: 100
  hits: 1000
}
LockManager: {
  concurrencyLevel: 1000
  numberOfLocksAvailable: 0
  numberOfLocksHeld: 0
}</pre> </div> </div> </div> <div class="sect5"> <h6 id="upgrade"><a class="anchor" href="#upgrade"></a>upgrade</h6> <div class="paragraph"> <p>The <em>upgrade</em> command performs operations used during the rolling upgrade procedure.</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; upgrade --synchronize=hotrod --all
[jmx://localhost:12000/MyCacheManager/namedCache]&gt; upgrade --disconnectsource=hotrod --all</pre> </div> </div> </div> <div class="sect5"> <h6 id="version"><a class="anchor" href="#version"></a>version</h6> <div class="paragraph"> <p>The <em>version</em> command displays version information about both the CLI client and the server</p> </div> <div class="listingblock"> <div class="content"> <pre>[jmx://localhost:12000/MyCacheManager/namedCache]&gt; version
Client Version x.x.x.Final
Server Version x.x.x.Final</pre> </div> </div> </div> </div> <div class="sect4"> <h5 id="data_types"><a class="anchor" href="#data_types"></a>Data Types</h5> <div class="paragraph"> <p>The CLI understands the following types:</p> </div> <div class="ulist"> <ul> <li> <p>string strings can either be quoted between single (') or double (") quotes, or left unquoted. In this case it must not contain spaces, punctuation and cannot begin with a number e.g. 'a string', key001</p> </li> <li> <p>int an integer is identified by a sequence of decimal digits, e.g. 256</p> </li> <li> <p>long a long is identified by a sequence of decimal digits suffixed by 'l', e.g. 1000l</p> </li> <li> <p>double</p> <div class="ulist"> <ul> <li> <p>a double precision number is identified by a floating point number(with optional exponent part) and an optional 'd' suffix, e.g.3.14</p> </li> </ul> </div> </li> <li> <p>float</p> <div class="ulist"> <ul> <li> <p>a single precision number is identified by a floating point number(with optional exponent part) and an 'f' suffix, e.g. 10.3f</p> </li> </ul> </div> </li> <li> <p>boolean a boolean is represented either by the keywords true and false</p> </li> <li> <p>UUID a UUID is represented by its canonical form XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</p> </li> <li> <p>JSON serialized Java classes can be represented using JSON notation, e.g. {"package.MyClass":{"i":5,"x":null,"b":true}}. Please note that the specified class must be available to the CacheManager&#8217;s class loader.</p> </li> </ul> </div> </div> <div class="sect4"> <h5 id="time_values"><a class="anchor" href="#time_values"></a>Time Values</h5> <div class="paragraph"> <p>A time value is an integer number followed by time unit suffix: days (d), hours (h), minutes (m), seconds (s), milliseconds (ms).</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="hawt_io"><a class="anchor" href="#hawt_io"></a>2.3. Hawt.io</h3> <div class="paragraph"> <p><a href="http://hawt.io">Hawt.io</a>, a slick, fast, HTML5-based open source management console, also has support for Infinispan. Refer to <a href="http://hawt.io/plugins/infinispan/">Hawt.io&#8217;s documentation</a> for information regarding this plugin.</p> </div> </div> <div class="sect2"> <h3 id="writing_plugins_for_other_management_tools"><a class="anchor" href="#writing_plugins_for_other_management_tools"></a>2.4. Writing plugins for other management tools</h3> <div class="paragraph"> <p>Any management tool that supports JMX already has basic support for Infinispan. However, custom plugins could be written to adapt the JMX information for easier consumption.</p> </div> </div> </div> </div> </div> <div id="footer"> <div id="footer-text"> Last updated 2019-09-15 07:35:22 UTC </div> </div> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-8601422-1', 'auto');
  ga('send', 'pageview');

</script> <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script> </body> </html>