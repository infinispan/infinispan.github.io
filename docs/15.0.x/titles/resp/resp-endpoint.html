<!DOCTYPE html>
<html lang="en">
<head><meta name="robots" content="noindex">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Using the RESP protocol with Infinispan</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-GPD7V946LB');
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/themes/default/style.min.css">
<link rel="stylesheet" href="../../css/css.css">
<link rel="stylesheet" href="/assets/css/clipboard.css">
<link rel="stylesheet" href="/assets/css/cookieconsent.css">
<link rel="shortcut icon" type="image/png" href="/favicon.ico" >
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/jstree.min.js"></script>
<script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
<script src="/assets/javascript/copy.js" type="text/javascript"></script>
<script src="/assets/javascript/cookieconsent.umd.js" type="text/javascript"></script>
<script src="/assets/javascript/cookieconsent.config.js" type="module"></script>
<script src="../../js/js.js"></script>
<link rel="canonical" href="https://infinispan.org/docs/stable/titles/resp/resp-endpoint.html">
<style>
.hidden {
    display: none;
}

.switch {
    border-width: 1px 1px 0 1px;
    border-style: solid;
    border-color: #7a2518;
    display: inline-block;
}

.switch--item {
    padding: 10px;
    background-color: #ffffff;
    color: #7a2518;
    display: inline-block;
    cursor: pointer;
}

.switch--item.selected {
    background-color: #7a2519;
    color: #ffffff;
}

</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
<script type="text/javascript">
function addBlockSwitches() {
    $('.primary').each(function() {
        primary = $(this);
        createSwitchItem(primary, createBlockSwitch(primary)).item.addClass("selected");
        primary.children('.title').remove();
    });
    $('.secondary').each(function(idx, node) {
        secondary = $(node);
        primary = findPrimary(secondary);
        switchItem = createSwitchItem(secondary, primary.children('.switch'));
        switchItem.content.addClass('hidden');
        findPrimary(secondary).append(switchItem.content);
        secondary.remove();
    });
}

function createBlockSwitch(primary) {
    blockSwitch = $('<div class="switch"></div>');
    primary.prepend(blockSwitch);
    return blockSwitch;
}

function findPrimary(secondary) {
    candidate = secondary.prev();
    while (!candidate.is('.primary')) {
        candidate = candidate.prev();
    }
    return candidate;
}

function createSwitchItem(block, blockSwitch) {
    blockName = block.children('.title').text();
    content = block.children('.content').first().append(block.next('.colist'));
    item = $('<div class="switch--item">' + blockName + '</div>');
    item.on('click', '', content, function(e) {
        $(this).addClass('selected');
        $(this).siblings().removeClass('selected');
        e.data.siblings('.content').addClass('hidden');
        e.data.removeClass('hidden');
    });
    blockSwitch.append(item);
    return {'item': item, 'content': content};
}

$(addBlockSwitches);

</script>

</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Using the RESP protocol with Infinispan</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#enabling-resp-endpoint_resp-endpoint">1. Infinispan RESP endpoint</a>
<ul class="sectlevel3">
<li><a href="#configuring_caches_for_the_resp_endpoint">1.1. Configuring caches for the RESP endpoint</a></li>
</ul>
</li>
<li><a href="#resp-logical-databases_resp-endpoint">2. Mapping caches to Redis logical databases</a></li>
<li><a href="#resp-differences_resp-endpoint">3. Differences between Infinispan and Redis implementation</a>
<ul class="sectlevel3">
<li><a href="#isolation">3.1. Isolation</a></li>
<li><a href="#transactions">3.2. Transactions</a></li>
</ul>
</li>
<li><a href="#redis-commands_resp-endpoint">4. Redis commands</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Infinispan Server includes an endpoint that implements the <a href="https://github.com/redis/redis-specifications/blob/master/protocol/RESP3.md">RESP3 protocol</a> and allows you to interact with remote caches using Redis clients.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabling-resp-endpoint_resp-endpoint"><a class="anchor" href="#enabling-resp-endpoint_resp-endpoint"></a>1. Infinispan RESP endpoint</h3>
<div class="paragraph">
<p>The RESP endpoint is enabled by default on the single-port endpoint. Redis client connections will automatically be detected and routed to the internal connector.
The RESP endpoint works with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standalone Infinispan Server deployments, exactly like standalone Redis, where each server instance runs independently of each other.</p>
</li>
<li>
<p>Clustered Infinispan Server deployments, where server instances replicate or distribute data between each other. Clustered deployments provides clients with failover capabilities.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Install Infinispan Server.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p><a href="../server/server.html#creating-users_server-getting-started">Create a user</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>When you start Infinispan Server check for the following log message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>[org.infinispan.SERVER] ISPN080018: Started connector Resp (internal)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now connect to the RESP endpoint with a Redis client.
For example, with the Redis CLI you can do the following to add an entry to the cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>redis-cli -p 11222 --user username --pass password</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code>127.0.0.1:11222&gt; SET k v
OK
127.0.0.1:11222&gt; GET k
"v"
127.0.0.1:11222&gt; quit</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="configuring_caches_for_the_resp_endpoint"><a class="anchor" href="#configuring_caches_for_the_resp_endpoint"></a>1.1. Configuring caches for the RESP endpoint</h4>
<div class="paragraph">
<p>The RESP endpoint automatically configures and starts a <code>respCache</code> cache. This cache has the following configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>local-cache</code> or <code>distributed-cache</code> depending on the Infinispan Server clustering mode.</p>
</li>
<li>
<p><code>application/octet-stream</code> encoding for both keys and values.</p>
</li>
<li>
<p><code>RESPHashFunctionPartitioner</code> hash partitioner, which supports the CRC16 hashing used by Redis clients</p>
</li>
</ul>
</div>
<h5 id="explicit_configuration_for_cache" class="discrete">Explicit configuration for cache</h5>
<div class="paragraph">
<p>It is possible to supply a custom configuration for the cache, as long as it does not violate the requirements of the RESP connector, in which case the server will raise an exception and will not start.
Main constraints are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hash partitioning function must be <code>org.infinispan.distribution.ch.impl.RESPHashFunctionPartitioner</code>.</p>
</li>
<li>
<p>key encoding must be <code>application/octet-stream</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of explicit cache configuration follows.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;distributed-cache name="respCache" aliases="0" owners="2"
                   key-partitioner="org.infinispan.distribution.ch.impl.RESPHashFunctionPartitioner"
                   mode="SYNC" remote-timeout="17500" statistics="true"&gt;
	&lt;encoding media-type="application/octet-stream"/&gt;
&lt;/distributed-cache&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">JSON</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-json" data-lang="json">{
   "respCache": {
     "distributed-cache": {
       "aliases": ["0"],
       "owners": "2",
       "key-partitioner": "org.infinispan.distribution.ch.impl.RESPHashFunctionPartitioner",
       "mode": "SYNC",
       "statistics": true,
       "encoding": {
         "media-type": "application/octet-stream"
       }
     }
   }
 }</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">respCache:
  distributedCache:
    aliases:
      - "0"
    owners: "2"
    keyPartitioner: "org.infinispan.distribution.ch.impl.RESPHashFunctionPartitioner"
    mode: "SYNC"
    statistics: "true"
    encoding:
      mediaType: "application/octet-stream"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Configure your cache value encoding with Protobuf encoding if you want to view cache entries in the Infinispan Console (<code>value media-type="application/x-protostream"</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<h5 id="explicit_resp_endpoint_configuration" class="discrete">Explicit RESP endpoint configuration</h5>
<div class="paragraph">
<p>If the implicit configuration used by the single-port endpoint does not fit your needs, explicit configuration is available.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;endpoints&gt;
  &lt;endpoint socket-binding="default" security-realm="default"&gt;
    &lt;resp-connector cache="mycache" /&gt;
    &lt;hotrod-connector /&gt;
    &lt;rest-connector/&gt;
  &lt;/endpoint&gt;
&lt;/endpoints&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">JSON</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-json" data-lang="json">{
  "server": {
    "endpoints": {
      "endpoint": {
        "socket-binding": "default",
        "security-realm": "default",
        "resp-connector": {
          "cache": "mycache"
        },
        "hotrod-connector": {},
        "rest-connector": {}
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlight nowrap"><code class="language-yaml" data-lang="yaml">server:
  endpoints:
    endpoint:
      socketBinding: "default"
      securityRealm: "default"
      respConnector:
        cache: "mycache"
      hotrodConnector: ~
      restConnector: ~</code></pre>
</div>
</div>
<h5 id="clustered_configuration" class="discrete">Clustered configuration</h5>
<div class="paragraph">
<p>Infinispan is a horizontally scalable Resp-compatible server with high availability capabilities.
Infinispan provides clustering mechanisms with automatic failover detection and membership discovery by default.
Topology changes are handled automatically, and adding or removing nodes to the cluster is a streamlined process that automatically redistributes entries between nodes without downtime.
The cluster is homogeneous, where nodes are the primary and the backup owners of entries, guaranteeing that entries are available even in case of server failures.</p>
</div>
<div class="paragraph">
<p>Backed by a consistent hash, compatible with the hash-slot algorithm in Resp clients, entries are distributed across cluster members.
Infinispan automatically redirects requests to the proper entry owner.
As a result, hash tags in keys and the <code>-MOVED</code> error response for requests are not required even for multi-key operations accessing keys with different owners.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Infinispan allows multiple logical databases with the SELECT command in clustering mode.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resp-logical-databases_resp-endpoint"><a class="anchor" href="#resp-logical-databases_resp-endpoint"></a>2. Mapping caches to Redis logical databases</h3>
<div class="paragraph">
<p>Use the cache <code>aliases</code> configuration attributes to map caches to Redis logical databases.
The default <code>respCache</code> is mapped to logical database <code>0</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Infinispan can use multiple logical databases even in clustered mode, as opposed to Redis which only supports database
<code>0</code> when using Redis Cluster.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="resp-differences_resp-endpoint"><a class="anchor" href="#resp-differences_resp-endpoint"></a>3. Differences between Infinispan and Redis implementation</h3>
<div class="paragraph">
<p>Infinispan provides different guarantees compared to Redis for some functionalities.
This chapter summarizes the differences and, when possible, alternative configurations for a similar behavior.</p>
</div>
<div class="sect3">
<h4 id="isolation"><a class="anchor" href="#isolation"></a>3.1. Isolation</h4>
<div class="paragraph">
<p>Redis utilizes a single thread to handle user requests, which provides serializable isolation and atomic behavior for multi-key requests.
Infinispan provides a relaxed isolation level, which is configurable.
Concurrent requests might perceive a partial result for commands that access multiple keys, such as <code>MSET</code>, where only a subset of the keys were inserted in the cache before the operation finishes.</p>
</div>
<div class="paragraph">
<p>The only alternative in Infinispan for an atomic behavior is to submit multi-keys operations within a <code>MULTI…EXEC</code> block.
However, this requires configuring the default cache with transactional capabilities.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Infinispan does not provide serializable transactions.
See the <a href="../configuring/configuring.html#transaction_manager">cache configuration guide</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="transactions"><a class="anchor" href="#transactions"></a>3.2. Transactions</h4>
<div class="paragraph">
<p>Applications utilizing the <code>MULTI…EXEC</code> commands should update the default cache configuration to enable transactional capabilities.
Transactions in Redis do not have the concept of rollback to revert in case of failures.
Infinispan provides ACID transactions and rollback in case of failures.
Additionally, the transactions are distributed in cluster mode and can operate across many slots.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The recommended configuration utilizes <code>PESSIMISTIC</code> locking and transaction mode different from <code>NONE</code>.
See the <a href="../configuring/configuring.html#transaction_manager">cache configuration guide</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis-commands_resp-endpoint"><a class="anchor" href="#redis-commands_resp-endpoint"></a>4. Redis commands</h3>
<div class="paragraph">
<p>The Infinispan RESP endpoint implements the following Redis commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://redis.io/commands/append">APPEND</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/auth">AUTH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/blpop">BLPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/blmpop">BLMPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/brpop">BRPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-getname">CLIENT GETNAME</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-id">CLIENT ID</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-info">CLIENT INFO</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-list">CLIENT LIST</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-setinfo">CLIENT SETINFO</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/client-setname">CLIENT SETNAME</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/command">COMMAND</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/config">CONFIG</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/cluster-keyslot/">CLUSTER KEYSLOT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/cluster-nodes/">CLUSTER NODES</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This commands includes all required fields, but some fields are set to <code>0</code> as they do not apply to Infinispan.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/cluster-shards/">CLUSTER SHARDS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/cluster-slots/">CLUSTER SLOTS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/dbsize">DBSIZE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/decr">DECR</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/decrby">DECRBY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/del">DEL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/discard">DISCARD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/echo">ECHO</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/exec">EXEC</a></p>
<div class="paragraph">
<p>See the <a href="#multi_command">MULTI</a> command.</p>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/exists">EXISTS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/expire">EXPIRE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/expireat">EXPIREAT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/expiretime">EXPIRETIME</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/flushall">FLUSHALL</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command behaves like <code>FLUSHDB</code> and flushes only the current database.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/flushdb">FLUSHDB</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/get">GET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/getdel">GETDEL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/getex">GETEX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/getrange">GETRANGE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/getset">GETSET</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command is deprecated. Use the <code>SET</code> command with the appropriate flags instead.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/hdel">HDEL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hello">HELLO</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hexists">HEXISTS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hget">HGET</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/hgetall">HGETALL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hincrby">HINCRBY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hincrbyfloat">HINCRBYFLOAT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hkeys">HKEYS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hlen">HLEN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hmget">HMGET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hmset">HMSET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hrandfield">HRANDFIELD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hscan">HSCAN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hset">HSET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hsetnx">HSETNX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hstrlen">HSTRLEN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/hvals">HVALS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/incr">INCR</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/incrby">INCRBY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/incrbyfloat">INCRBYFLOAT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/info">INFO</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This implementation attempts to return all attributes that a real Redis server returns. However, in most cases, the values are set to <code>0</code> because they cannot be retrieved, or don&#8217;t apply to Infinispan.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/keys">KEYS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lindex">LINDEX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/linsert">LINSERT</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current implementation has a time complexity of O(N), where N is the size of the list.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/llen">LLEN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lcs">LCS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lmove">LMOVE</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current implementation is atomic for rotation when the source and destination are the same list. For different lists, there is relaxed consistency for concurrent operations or failures unless the resp cache is configured to use transactions.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/lmpop">LMPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lpop">LPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lpos">LPOS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lpush">LPUSH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lpushx">LPUSHX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lrange">LRANGE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lrem">LREM</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lset">LSET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/ltrim">LTRIM</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/memory-info">MEMORY USAGE</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command will return the memory used by the key and the value. It doesn&#8217;t include the memory used by additional metadata associated with the entry.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/memory-stats">MEMORY STATS</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command will return the same fields as a real Redis server, but all values will be set to <code>0</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/mget">MGET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/module-list">MODULE LIST</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command always returns an empty list of modules.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/mset">MSET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/msetnx">MSETNX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/multi">MULTI</a> <a id="multi_command"></a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current implementation has a relaxed isolation level. Redis offers serializable transactions.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/persist">PERSIST</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/pfadd">PFADD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/pexpire">PEXPIRE</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/pexpireat">PEXPIREAT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/pexpiretime">PEXPIRETIME</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/ping">PING</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/psetex">PSETEX</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command is deprecated. Use the <code>SET</code> command with the appropriate flags.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/psubscribe">PSUBSCRIBE</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/pubsub-channels">PUBSUB CHANNELS</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/pubsub-numpat">PUBSUB NUMPAT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/pttl">PTTL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/publish">PUBLISH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/punsubscribe">PUNSUBSCRIBE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/quit">QUIT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/randomkey">RANDOMKEY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/rpop">RPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/rpoplpush">RPOPLPUSH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/rpush">RPUSH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/rpushx">RPUSHX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/readonly">READONLY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/readwrite">READWRITE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/rename">RENAME</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/renamenx">RENAMENX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/reset">RESET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sadd">SADD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/scard">SCARD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/scan">SCAN</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cursors are reaped in case they have not been used within a timeout. The timeout is 5 minutes.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/sdiff">SDIFF</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sdiffstore">SDIFFSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/select">SELECT</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Infinispan allows the SELECT command both in local and clustered mode, unlike Redis Cluster which forbids use of this command and only supports database zero.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/set">SET</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/setex">SETEX</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command is deprecated. Use the <code>SET</code> command with the appropriate flags instead.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/setnx">SETNX</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command is deprecated. Use the <code>SET</code> command with the appropriate flags instead.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/set">SETRANGE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sinter">SINTER</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sintercard">SINTERCARD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sinterstore">SINTERSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sismember">SISMEMBER</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sort">SORT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sort_ro">SORT_RO</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/members">SMEMBERS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/smismember">SMISMEMBER</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/smove">SMOVE</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current implementation has a relaxed isolation level. A client can see the source and destination set without
the element. The operation is not atomic, it could remove the element from source and fails to insert to the target set.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/spop">SPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/srandmember">SRANDMEMBER</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/srem">SREM</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sscan">SSCAN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/lcs">STRALGO LCS</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/strlen">STRLEN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/substr">SUBSTR</a></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This command is deprecated. Use the <code>GETRANGE</code> command instead.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a href="https://redis.io/commands/subscribe">SUBSCRIBE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sunion">SUNION</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/sunionstore">SUNIONSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/time">TIME</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/touch">TOUCH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/ttl">TTL</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/type">TYPE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/unsubscribe">UNSUBSCRIBE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/unwatch">UNWATCH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/watch">WATCH</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zadd">ZADD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zcard">ZCARD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zcount">ZCOUNT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zdiff">ZDIFF</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zdiffstore">ZDIFFSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zincrby">ZINCRBY</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zinter">ZINTER</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zintercard">ZINTERCARD</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zinterstore">ZINTERSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zlexcount">ZLEXCOUNT</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zmpop">ZMPOP</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/zmscore">ZMSCORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zpopmax">ZPOPMAX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zpopmin">ZPOPMIN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zunion">ZUNION</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zunionstore">ZUNIONSTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrandmember">ZRANDMEMBER</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrange">ZRANGE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrangebylex">ZRANGEBYLEX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrangebyscore">ZRANGEBYSCORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrevrange">ZREVRANGE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrevrangebylex">ZREVRANGEBYLEX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrevrangebyscore">ZREVRANGEBYSCORE</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrangestore">ZRANGESTORE</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/zrank">ZRANK</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zrem">ZREM</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zremrangebylex">ZREMRANGEBYLEX</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zremrangebyrank">ZREMRANGEBYRANK</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zremrangebyscore">ZREMRANGEBYSCORE</a></p>
</li>
<li>
<p><a href="https://redis.io/docs/latest/commands/zrevrank">ZREVRANK</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zscore">ZSCAN</a></p>
</li>
<li>
<p><a href="https://redis.io/commands/zscore">ZSCORE</a></p>
</li>
</ul>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-24 11:16:17 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>