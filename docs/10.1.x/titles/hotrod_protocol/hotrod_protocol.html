<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Infinispan Hot Rod Protocol Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="canonical" href="http://infinispan.org/docs/stable/hotrod_protocol/hotrod_protocol.html">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/themes/default/style.min.css">
<link rel="stylesheet" href="../../css/css.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.1/jstree.min.js"></script>
<script src="../../js/js.js"></script>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Infinispan Hot Rod Protocol Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#hot_rod_protocol">1. Hot Rod Protocol</a>
<ul class="sectlevel2">
<li><a href="#hot_rod_protocol_1_0">1.1. Hot Rod Protocol 1.0</a>
<ul class="sectlevel3">
<li><a href="#request_header">1.1.1. Request Header</a></li>
<li><a href="#hot_rod_response_header">1.1.2. Response Header</a></li>
<li><a href="#topology_change_headers">1.1.3. Topology Change Headers</a></li>
<li><a href="#topology_aware_client_topology_change_header">1.1.4. Topology-Aware Client Topology Change Header</a></li>
<li><a href="#distribution_aware_client_topology_change_header">1.1.5. Distribution-Aware Client Topology Change Header</a></li>
<li><a href="#operations">1.1.6. Operations</a></li>
<li><a href="#example_put_request">1.1.7. Example - Put request</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_1_1">1.2. Hot Rod Protocol 1.1</a>
<ul class="sectlevel3">
<li><a href="#request_header_2">1.2.1. Request Header</a></li>
<li><a href="#distribution_aware_client_topology_change_header_2">1.2.2. Distribution-Aware Client Topology Change Header</a></li>
<li><a href="#server_node_hash_code_calculation">1.2.3. Server node hash code calculation</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_1_2">1.3. Hot Rod Protocol 1.2</a>
<ul class="sectlevel3">
<li><a href="#request_header_3">1.3.1. Request Header</a></li>
<li><a href="#response_header">1.3.2. Response Header</a></li>
<li><a href="#operations_2">1.3.3. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_1_3">1.4. Hot Rod Protocol 1.3</a>
<ul class="sectlevel3">
<li><a href="#request_header_4">1.4.1. Request Header</a></li>
<li><a href="#response_header_2">1.4.2. Response Header</a></li>
<li><a href="#operations_3">1.4.3. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_0">1.5. Hot Rod Protocol 2.0</a>
<ul class="sectlevel3">
<li><a href="#request_header_5">1.5.1. Request Header</a></li>
<li><a href="#response_header_3">1.5.2. Response Header</a></li>
<li><a href="#distribution_aware_client_topology_change_header_3">1.5.3. Distribution-Aware Client Topology Change Header</a></li>
<li><a href="#operations_4">1.5.4. Operations</a></li>
<li><a href="#remote_events">1.5.5. Remote Events</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_1">1.6. Hot Rod Protocol 2.1</a>
<ul class="sectlevel3">
<li><a href="#request_header_6">1.6.1. Request Header</a></li>
<li><a href="#operations_5">1.6.2. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_2">1.7. Hot Rod Protocol 2.2</a>
<ul class="sectlevel3">
<li><a href="#operations_6">1.7.1. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_3">1.8. Hot Rod Protocol 2.3</a>
<ul class="sectlevel3">
<li><a href="#operations_7">1.8.1. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_4">1.9. Hot Rod Protocol 2.4</a>
<ul class="sectlevel3">
<li><a href="#operations_8">1.9.1. Operations</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_5">1.10. Hot Rod Protocol 2.5</a></li>
<li><a href="#hot_rod_protocol_2_6">1.11. Hot Rod Protocol 2.6</a></li>
<li><a href="#hot_rod_protocol_2_7">1.12. Hot Rod Protocol 2.7</a></li>
<li><a href="#hot_rod_protocol_2_8">1.13. Hot Rod Protocol 2.8</a>
<ul class="sectlevel3">
<li><a href="#request_header_7">1.13.1. Request Header</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_2_9">1.14. Hot Rod Protocol 2.9</a></li>
<li><a href="#hot_rod_hash_functions">1.15. Hot Rod Hash Functions</a></li>
<li><a href="#hot_rod_admin_tasks">1.16. Hot Rod Admin Tasks</a>
<ul class="sectlevel3">
<li><a href="#admin_tasks">1.16.1. Admin tasks</a></li>
</ul>
</li>
<li><a href="#hot_rod_protocol_3_0">1.17. Hot Rod Protocol 3.0</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="hot_rod_protocol"><a class="anchor" href="#hot_rod_protocol"></a>1. Hot Rod Protocol</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following articles provides detailed information about each version of
the custom TCP client/server Hot Rod protocol.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#hot_rod_protocol_1_0">Hot Rod Protocol 1.0 (Infinispan 4.1)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_1_1">Hot Rod Protocol 1.1 (Infinispan 5.1)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_1_2">Hot Rod Protocol 1.2 (Infinispan 5.2)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_1_3">Hot Rod Protocol 1.3 (Infinispan 6.0)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_0">Hot Rod Protocol 2.0 (Infinispan 7.0)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_1">Hot Rod Protocol 2.1 (Infinispan 7.1)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_2">Hot Rod Protocol 2.2 (Infinispan 8.0)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_3">Hot Rod Protocol 2.3 (Infinispan 8.0)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_4">Hot Rod Protocol 2.4 (Infinispan 8.1)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_5">Hot Rod Protocol 2.5 (Infinispan 8.2)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_6">Hot Rod Protocol 2.6 (Infinispan 9.0)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_7">Hot Rod Protocol 2.7 (Infinispan 9.2)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_8">Hot Rod Protocol 2.8 (Infinispan 9.3)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_2_9">Hot Rod Protocol 2.9 (Infinispan 9.4)</a></p>
</li>
<li>
<p><a href="#hot_rod_protocol_3_0">Hot Rod Protocol 3.0 (Infinispan 10.0)</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_1_0"><a class="anchor" href="#hot_rod_protocol_1_0"></a>1.1. Hot Rod Protocol 1.0</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol was implemented since Infinispan 4.1.0.Final and is no longer supported since
Infinispan 10.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All key and values are sent and stored as byte arrays. Hot Rod
makes no assumptions about their types.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some clarifications about the other types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vInt : Variable-length integers are defined defined as compressed,
positive integers  where the high-order bit of each byte indicates whether
more bytes need to be  read. The low-order seven bits are appended as
increasingly more significant bits in the resulting integer value making it
efficient to decode. Hence, values from zero to 127 are  stored in a single
byte, values from 128 to 16,383 are stored in two bytes, and so on:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>Value</code></th>
<th class="tableblock halign-left valign-top"><code>First byte</code></th>
<th class="tableblock halign-left valign-top"><code>Second byte</code></th>
<th class="tableblock halign-left valign-top"><code>Third byte</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000000</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000010</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>127</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>01111111</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>128</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>129</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000001</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>130</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000010</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16,383</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>11111111</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>01111111</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16,384</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16,385</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000001</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00000001</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>signed vInt: The vInt above is also able to encode negative values, but will
always use the maximum size (5 bytes) no matter how small the endoded value is.
In order to have a small payload for negative values too, signed vInts uses ZigZag
encoding on top of the vInt encoding.
More details <a href="http://developers.google.com/protocol-buffers/docs/encoding#types">here</a></p>
</li>
<li>
<p>vLong : Refers to unsigned variable length long values similar to vInt but
applied to longer values. They&#8217;re between 1 and 9 bytes long.</p>
</li>
<li>
<p>String : Strings are always represented using UTF-8 encoding.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="request_header"><a class="anchor" href="#request_header"></a>1.1.1. Request Header</h4>
<div class="paragraph">
<p>The header for a request is composed of:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Request header</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magic</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA0 = request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the message that will be copied
back in the response. This allows for Hot Rod clients to implement the
protocol in an asynchronous way.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot Rod server version.
In this particular case, this is 10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request operation code:<br>
0x01 = put (since 1.0)<br>
0x03 = get (since 1.0)<br>
0x05 = putIfAbsent (since 1.0)<br>
0x07 = replace (since 1.0)<br>
0x09 = replaceIfUnmodified (since 1.0)<br>
0x0B = remove (since 1.0)<br>
0x0D = removeIfUnmodified (since 1.0)<br>
0x0F = containsKey (since 1.0)<br>
0x11 = getWithVersion (since 1.0)<br>
0x13 = clear (since 1.0)<br>
0x15 = stats (since 1.0)<br>
0x17 = ping (since 1.0)<br>
0x19 = bulkGet (since 1.2)<br>
0x1B = getWithMetadata (since 1.2)<br>
0x1D = bulkGetKeys (since 1.2)<br>
0x1F = query (since 1.3)<br>
0x21 = authMechList (since 2.0)<br>
0x23 = auth (since 2.0)<br>
0x25 = addClientListener (since 2.0)<br>
0x27 = removeClientListener (since 2.0)<br>
0x29 = size (since 2.0)<br>
0x2B = exec (since 2.1)<br>
0x2D = putAll (since 2.1)<br>
0x2F = getAll (since 2.1)<br>
0x31 = iterationStart (since 2.3)<br>
0x33 = iterationNext (since 2.3)<br>
0x35 = iterationEnd (since 2.3)<br>
0x37 = getStream (since 2.6)<br>
0x39 = putStream (since 2.6)<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache Name Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of cache name. If the passed
length is 0 (followed by no cache name), the operation will interact with
the default cache.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of cache on which to operate.
This name must match the name of predefined cache in the Infinispan
configuration file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flags</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A variable length number representing
flags passed to the system. Each flags is represented by a bit. Note that
since this field is sent as variable length, the most significant bit in a
byte is used to determine whether more bytes need to be read, hence this bit
does not represent any flag. Using this model allows for flags to be combined
in a short space. Here are the current values for each flag:<br>
0x0001 = force return previous value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client Intelligence</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This byte hints the server on the client capabilities:<br>
0x01 = basic client, interested in neither cluster nor hash information<br>
0x02 = topology-aware client, interested in cluster information<br>
0x03 = hash-distribution-aware client, that is interested in both cluster and hash information<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This field represents the last known
view in the client. Basic clients will only send 0 in this field.
When topology-aware or hash-distribution-aware clients will send 0 until they
have received a reply from the server with the current view id.
Afterwards, they should send that view id until they receive a new view id
in a response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction Type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a 1 byte field, containing one
of the following well-known supported transaction types (For this version of
the protocol, the only supported transaction type is 0):<br>
0 = Non-transactional call, or client does not support transactions.
The subsequent TX_ID field will be omitted.<br>
1 = X/Open XA transaction ID (XID). This is a well-known, fixed-size format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The byte array uniquely identifying the
transaction associated to this call. Its length is determined by the
transaction type. If transaction type is 0, no transaction id will be present.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="hot_rod_response_header"><a class="anchor" href="#hot_rod_response_header"></a>1.1.2. Response Header</h4>
<div class="paragraph">
<p>The header for a response is composed of:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Response header</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magic</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA1 = response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the message, matching the request
for which the response is sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response operation code:<br>
0x02 = put (since 1.0)<br>
0x04 = get (since 1.0)<br>
0x06 = putIfAbsent (since 1.0)<br>
0x08 = replace (since 1.0)<br>
0x0A = replaceIfUnmodified (since 1.0)<br>
0x0C = remove (since 1.0)<br>
0x0E = removeIfUnmodified (since 1.0)<br>
0x10 = containsKey (since 1.0)<br>
0x12 = getWithVersion (since 1.0)<br>
0x14 = clear (since 1.0)<br>
0x16 = stats (since 1.0)<br>
0x18 = ping (since 1.0)<br>
0x1A = bulkGet (since 1.0)<br>
0x1C = getWithMetadata (since 1.2)<br>
0x1E = bulkGetKeys (since 1.2)<br>
0x20 = query (since 1.3)<br>
0x22 = authMechList (since 2.0)<br>
0x24 = auth (since 2.0)<br>
0x26 = addClientListener (since 2.0)<br>
0x28 = removeClientListener (since 2.0)<br>
0x2A = size (since 2.0)<br>
0x2C = exec (since 2.1)<br>
0x2E = putAll (since 2.1)<br>
0x30 = getAll (since 2.1)<br>
0x32 = iterationStart (since 2.3)<br>
0x34 = iterationNext (since 2.3)<br>
0x36 = iterationEnd (since 2.3)<br>
0x38 = getStream (since 2.6)<br>
0x3A = putStream (since 2.6)<br>
0x50 = error (since 1.0)<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the response, possible values:<br>
0x00 = No error<br>
0x01 = Not put/removed/replaced<br>
0x02 = Key does not exist<br>
0x81 = Invalid magic or message id<br>
0x82 = Unknown command<br>
0x83 = Unknown version<br>
0x84 = Request parsing error<br>
0x85 = Server Error<br>
0x86 = Command timed out<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Change Marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a marker byte that indicates
whether the response is prepended with topology change information.
When no topology change follows, the content of this byte is 0.
If a topology change follows, its contents are 1.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Exceptional error status responses, those that start with 0x8 &#8230;&#8203;,
are followed by the length of the error message (as a vInt ) and
error message itself as String.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="topology_change_headers"><a class="anchor" href="#topology_change_headers"></a>1.1.3. Topology Change Headers</h4>
<div class="paragraph">
<p>The following section discusses how the response headers look for
topology-aware or hash-distribution-aware clients when there&#8217;s been a cluster
or view formation change. Note that it&#8217;s the server that makes the decision on
whether it sends back the new topology based on the current topology id and
the one the client sent. If they&#8217;re different, it will send back the new topology.</p>
</div>
</div>
<div class="sect3">
<h4 id="topology_aware_client_topology_change_header"><a class="anchor" href="#topology_aware_client_topology_change_header"></a>1.1.4. Topology-Aware Client Topology Change Header</h4>
<div class="paragraph">
<p>This is what topology-aware clients receive as response header when a
topology change is sent back:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header with topology change marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See previous section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num servers in topology</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Hot Rod servers running within the cluster.
This could be a subset of the entire cluster if only a fraction of those
nodes are running Hot Rod servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of hostname or IP address of individual cluster member that Hot Rod
client can use to access it. Using variable length here allows for covering
for hostnames, IPv4 and IPv6 addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing hostname or IP address of individual cluster member
that Hot Rod client can use to access it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that Hot Rod clients can use to communicate with this cluster member.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="distribution_aware_client_topology_change_header"><a class="anchor" href="#distribution_aware_client_topology_change_header"></a>1.1.5. Distribution-Aware Client Topology Change Header</h4>
<div class="paragraph">
<p>This is what hash-distribution-aware clients receive as response header
when a topology change is sent back:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header with topology change marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See previous section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num Key Owners</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Globally configured number of copies for each Infinispan distributed key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash Function Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash function version, pointing to a specific hash function in use.
See <a href="#hot_rod_hash_functions">Hot Rod hash functions</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash space size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulus used by Infinispan for for all module arithmetic related to hash
code generation. Clients will likely require this information in order to
apply the correct hash calculation to the keys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num servers in topology</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Infinispan Hot Rod servers running within the cluster.
This could be a subset of the entire cluster if only a fraction of those
nodes are running Hot Rod servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of hostname or IP address of individual cluster member that Hot Rod
client can use to access it. Using variable length here allows for covering
for hostnames, IPv4 and IPv6 addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing hostname or IP address of individual cluster member
that Hot Rod client can use to access it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that Hot Rod clients can use to communicat with this cluster member.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Hashcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 bit integer representing the hashcode of a cluster member that a Hot Rod
client can use indentify in which cluster member a key is located having
applied the CSA to it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Hashcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 bytes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It&#8217;s important to note that since hash headers rely on the consistent hash
algorithm used by the server and this is a factor of the cache interacted with,
hash-distribution-aware headers can only be returned to operations that target
a particular cache. Currently ping command does not target any cache
(this is to change as per <a href="https://jira.jboss.org/jira/browse/ISPN-424">ISPN-424</a>)
, hence calls to ping command with hash-topology-aware client settings will
return a hash-distribution-aware header with "Num Key Owners",
"Hash Function Version", "Hash space size" and each individual host&#8217;s hash
code all set to 0. This type of header will also be returned as response to
operations with hash-topology-aware client settings that are targeting caches
that are not configured with distribution.</p>
</div>
</div>
<div class="sect3">
<h4 id="operations"><a class="anchor" href="#operations"></a>1.1.6. Operations</h4>
<div class="paragraph">
<div class="title">Get (0x03)/Remove (0x0B)/ContainsKey (0x0F)/GetWithVersion (0x11)</div>
<p>Common request format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Get response (0x04):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key retrieved<br>
0x02 = if key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, the requested value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Remove response (0x0C):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key removed<br>
0x02 = if key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was removed, the length of the previous value
will be returned. If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was removed, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>ContainsKey response (0x10):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key exists<br>
0x02 = if key does not exist<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>GetWithVersion response (0x12):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key retrieved<br>
0x02 = if key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique value of an existing entry&#8217;s modification.
The protocol does not mandate that entry_version values are sequential.
They just need to be unique per update at the key level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, the requested value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">BulkGet</div>
<p>Request (0x19):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of Infinispan entries to
be returned by the server (entry == key + associated value).
Needed to support CacheLoader.load(int). If 0 then all entries are returned
(needed for CacheLoader.loadAll()).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x20):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, data follows<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">More</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One byte representing whether more
entries need to be read from the stream. So, when it&#8217;s set to 1, it means
that an entry follows, whereas when it&#8217;s set to 0, it&#8217;s the end of stream and
no more entries are left to read. For more information on BulkGet look
<a href="http://community.jboss.org/docs/DOC-15592">here</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">More</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Put (0x01)/PutIfAbsent (0x05)/Replace (0x07)</div>
<p>Common request format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that a entry during
which the entry is allowed to life. If number of seconds is bigger than 30 days,
this number of seconds is treated as UNIX time and so, represents the number
of seconds since 1/1/1970. If set to 0, lifespan is unlimited.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that a entry can be
idle before it&#8217;s evicted from the cache. If 0, no max idle time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte-array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to be stored</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Put response (0x02):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if stored<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was put, the length of the previous value
will be returned. If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was put, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Replace response (0x08):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if stored<br>
0x01 = if store did not happen because key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request, the length of the previous value will be returned.
If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was replaced, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>PutIfAbsent response (0x06):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if stored<br>
0x01 = if store did not happen because key was present<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request, the length of the previous value will be returned.
If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was replaced, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">ReplaceIfUnmodified</div>
<p>Request (0x09):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that a entry during
which the entry is allowed to life. If number of seconds is bigger than 30 days,
this number of seconds is treated as UNIX time and so, represents the number
of seconds since 1/1/1970. If set to 0, lifespan is unlimited.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that a entry can be
idle before it&#8217;s evicted from the cache. If 0, no max idle time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the value returned by GetWithVersion operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte-array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to be stored</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x0A):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if replaced<br>
0x01 = if replace did not happen because key had been modified<br>
0x02 = if not replaced because if key does not exist</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request, the length of the previous value will be returned.
If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was replaced, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">RemoveIfUnmodified</div>
<p>Request (0x0D):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the value returned by GetWithMetadata operation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x0E):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if removed<br>
0x01 = if remove did not happen because key had been modified<br>
0x02 = if not removed because key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request, the length of the previous value will be returned.
If the key does not exist, value length would be 0.
If no flag was sent, no value length would be present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Previous value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If force return previous value flag was
sent in the request and the key was removed, previous value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Clear</div>
<p>Request (0x13):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x14):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if cleared<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">PutAll</div>
<p>Bulk operation to put all key value entries into the cache at the same time.</p>
</div>
<div class="paragraph">
<p>Request (0x2D):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that provided entries
are allowed to live. If number of seconds is bigger than 30 days,
this number of seconds is treated as UNIX time and so, represents the number
of seconds since 1/1/1970. If set to 0, lifespan is unlimited.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds that each entry can be
idle before it&#8217;s evicted from the cache. If 0, no max idle time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many entries are being inserted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until entry count is reached</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x2E):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if all put<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">GetAll</div>
<p>Bulk operation to get all entries that map to a given set of keys.</p>
</div>
<div class="paragraph">
<p>Request (0x2F):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many keys to find entries for</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until key count is reached</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x30):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many entries are being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until entry count is reached</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if the get returned sucessfully<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Stats</div>
<p>Returns a summary of all available statistics. For each statistic returned,
a name and a value is returned both in String UTF-8 format.
The supported stats are the following:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeSinceStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of seconds since Hot Rod started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currentNumberOfEntries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of entries currently in the Hot Rod server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">totalNumberOfEntries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of entries stored in Hot Rod server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of put operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrievals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of get operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of get hits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">misses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of get misses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">removeHits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of removal hits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">removeMisses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of removal misses.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Request (0x15):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x16):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if stats retrieved<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of stats</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of individual stats returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name 1 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of named statistic.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing statistic name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing statistic value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name 2 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Ping</div>
<p>Application level request to see if the server is available.</p>
</div>
<div class="paragraph">
<p>Request (0x17):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x18):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if no errors<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Error Handling</div>
<p>Error response (0x50)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x8x = error response code<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Message Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of error message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error Message</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Error message. In the case of 0x84 ,
this error field contains the latest version supported by the Hot Rod server.
Length is defined by total body length.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Multi-Get Operations</div>
<p>A multi-get operation is a form of get operation that instead of requesting a
single key, requests a set of keys. The Hot Rod protocol does not include such
operation but remote Hot Rod clients could easily implement this type of
operations by either parallelizing/pipelining individual get requests.
Another possibility would be for remote clients to use async or non-blocking
get requests. For example, if a client wants N keys, it could send send N
async get requests and then wait for all the replies. Finally, multi-get is
not to be confused with bulk-get operations. In bulk-gets, either all or a
number of keys are retrieved, but the client does not know which keys to
retrieve, whereas in multi-get, the client defines which keys to retrieve.</p>
</div>
</div>
<div class="sect3">
<h4 id="example_put_request"><a class="anchor" href="#example_put_request"></a>1.1.7. Example - Put request</h4>
<div class="ulist">
<ul>
<li>
<p>Coded request</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Byte</th>
<th class="tableblock halign-left valign-top">0</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">2</th>
<th class="tableblock halign-left valign-top">3</th>
<th class="tableblock halign-left valign-top">4</th>
<th class="tableblock halign-left valign-top">5</th>
<th class="tableblock halign-left valign-top">6</th>
<th class="tableblock halign-left valign-top">7</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x4D ('M')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x79 ('y')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x43 ('C')</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x61 ('a')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x63 ('c')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x68 ('h')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x65 ('e')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x03</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x48 ('H')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x65 ('e')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6C ('l')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6C ('l')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6F ('o')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x57 ('W')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6F ('o')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x72 ('r')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x6C ('l')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x64 ('d')</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Field explanation</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magic (0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Id (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version (2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opcode (3)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache name length (4)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x07</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache name(5-11)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'MyCache'</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag (12)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client Intelligence (13)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x03</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id (14)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction Type (15)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction Id (16)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key field length (17)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key (18 - 22)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Hello'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan (23)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max idle (24)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value field length (25)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x05</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value (26-30)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'World'</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Coded response</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Byte</th>
<th class="tableblock halign-left valign-top">0</th>
<th class="tableblock halign-left valign-top">1</th>
<th class="tableblock halign-left valign-top">2</th>
<th class="tableblock halign-left valign-top">3</th>
<th class="tableblock halign-left valign-top">4</th>
<th class="tableblock halign-left valign-top">5</th>
<th class="tableblock halign-left valign-top">6</th>
<th class="tableblock halign-left valign-top">7</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Field Explanation</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magic (0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Id (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x09</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opcode (2)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status (3)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology change marker (4)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_1_1"><a class="anchor" href="#hot_rod_protocol_1_1"></a>1.2. Hot Rod Protocol 1.1</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol was implemented since Infinispan 5.1.0.FINAL
and is no longer supported since Infinispan 10.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="request_header_2"><a class="anchor" href="#request_header_2"></a>1.2.1. Request Header</h4>
<div class="paragraph">
<p>The <code>version</code> field in the header is updated to <code>11</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="distribution_aware_client_topology_change_header_2"><a class="anchor" href="#distribution_aware_client_topology_change_header_2"></a>1.2.2. Distribution-Aware Client Topology Change Header</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Updated for 1.1</div>
This section has been modified to be more efficient when talking
to distributed caches with virtual nodes enabled.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is what hash-distribution-aware clients receive as response header when
a topology change is sent back:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header with topology change marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See previous section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num Key Owners</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Globally configured number of copies for each Infinispan distributed key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash Function Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash function version, pointing to a specific hash function in use.
See <a href="#hot_rod_hash_functions">Hot Rod hash functions</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash space size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulus used by Infinispan for for all module arithmetic related to hash
code generation. Clients will likely require this information in order to
apply the correct hash calculation to the keys.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num servers in topology</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Hot Rod servers running within the cluster.
This could be a subset of the entire cluster if only a fraction of those
nodes are running Hot Rod servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num Virtual Nodes Owners</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field added in version 1.1 of the protocol that represents the number of
configured virtual nodes. If no virtual nodes are configured or the cache
is not configured with distribution, this field will contain 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of hostname or IP address of individual cluster member that Hot Rod
client can use to access it. Using variable length here allows for covering
for hostnames, IPv4 and IPv6 addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing hostname or IP address of individual cluster member
that Hot Rod client can use to access it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that Hot Rod clients can use to communicat with this cluster member.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Hashcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 bit integer representing the hashcode of a cluster member that a Hot Rod
client can use indentify in which cluster member a key is located having
applied the CSA to it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Hashcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 bytes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="server_node_hash_code_calculation"><a class="anchor" href="#server_node_hash_code_calculation"></a>1.2.3. Server node hash code calculation</h4>
<div class="paragraph">
<p>Adding support for virtual nodes has made version 1.0 of the Hot Rod protocol
impractical due to bandwidth it would have taken to return hash codes for all
virtual nodes in the clusters (this number could easily be in the millions).
So, as of version 1.1 of the Hot Rod protocol, clients are given the base
hash id or hash code of each server, and then they have to calculate the real
hash position of each server both with and without virtual nodes configured.
Here are the rules clients should follow when trying to calculate a node&#8217;s
hash code:</p>
</div>
<div class="paragraph">
<p>1\.  With <em>virtual nodes disabled</em> : Once clients have received the base
hash code of the server, they need to normalize it in order to find the exact
position of the hash wheel. The process of normalization involves passing the
base hash code to the hash function, and then do a small calculation to avoid
negative values. The resulting number is the node&#8217;s position in the hash wheel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">int</span> getNormalizedHash(<span class="type">int</span> nodeBaseHashCode, Hash hashFct) {
   <span class="keyword">return</span> hashFct.hash(nodeBaseHashCode) &amp; <span class="predefined-type">Integer</span>.MAX_VALUE; <span class="comment">// make sure no negative numbers are involved.</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>2\.  With <em>virtual nodes enabled</em> : In this case, each node represents N
different virtual nodes, and to calculate each virtual node&#8217;s hash code, we
need to take the the range of numbers between 0 and N-1 and apply the
following logic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For virtual node with 0 as id, use the technique used to retrieve a node&#8217;s
hash code, as shown in the previous section.</p>
</li>
<li>
<p>For virtual nodes from 1 to N-1 ids, execute the following logic:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">int</span> virtualNodeHashCode(<span class="type">int</span> nodeBaseHashCode, <span class="type">int</span> id, Hash hashFct) {
   <span class="type">int</span> virtualNodeBaseHashCode = id;
   virtualNodeBaseHashCode = <span class="integer">31</span> * virtualNodeBaseHashCode + nodeBaseHashCode;
   <span class="keyword">return</span> getNormalizedHash(virtualNodeBaseHashCode, hashFct);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_1_2"><a class="anchor" href="#hot_rod_protocol_1_2"></a>1.3. Hot Rod Protocol 1.2</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol was implemented since Infinispan 5.2.0.Final
and is no longer supported since Infinispan 10.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since Infinispan 5.3.0, HotRod supports encryption via SSL. However, since this only affects the transport, the version number of the protocol has not been incremented.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="request_header_3"><a class="anchor" href="#request_header_3"></a>1.3.1. Request Header</h4>
<div class="paragraph">
<p>The <code>version</code> field in the header is updated to <code>12</code>.</p>
</div>
<div class="paragraph">
<p>Two new request operation codes have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x1B = getWithMetadata request</p>
</li>
<li>
<p>0x1D = bulkKeysGet request</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Two new flags have been added too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x0002	= use cache-level configured default lifespan</p>
</li>
<li>
<p>0x0004	= use cache-level configured default max idle</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="response_header"><a class="anchor" href="#response_header"></a>1.3.2. Response Header</h4>
<div class="paragraph">
<p>Two new response operation codes have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x1C = getWithMetadata response</p>
</li>
<li>
<p>0x1E = bulkKeysGet response</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="operations_2"><a class="anchor" href="#operations_2"></a>1.3.3. Operations</h4>
<div class="paragraph">
<div class="title">GetWithMetadata</div>
<p>Request (0x1B):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x1C):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key retrieved<br>
0x02 = if key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag indicating whether the response
contains expiration information. The value of the flag is obtained as a
bitwise OR operation between INFINITE_LIFESPAN (0x01) and
<code>INFINITE_MAXIDLE (0x02)</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was created on the server. This value is returned
only if the flag&#8217;s INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
lifespan of the entry in seconds. This value is returned only if the flag&#8217;s
INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastUsed</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was last accessed on the server. This value is
returned only if the flag&#8217;s <code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxIdle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
maxIdle of the entry in seconds. This value is returned only if the flag&#8217;s
<code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique value of an existing entry&#8217;s modification.
The protocol does not mandate that entry_version values are sequential.
They just need to be unique per update at the key level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, the requested value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">BulkKeysGet</div>
<p>Request (0x1D):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scope</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 = Default Scope - This scope is used by RemoteCache.keySet() method.
If the remote cache is a distributed cache, the server launch a stream
operation to retrieve all keys from all of the nodes. (Remember, a
topology-aware Hot Rod Client could be load balancing the request to any
one node in the cluster). Otherwise, it&#8217;ll get keys from the cache instance
local to the server receiving the request (that is because the keys should
be the same across all nodes in a replicated cache).<br>
1 = Global Scope - This scope behaves the same to Default Scope.<br>
2 = Local Scope - In case when remote cache is a distributed cache,
the server will not launch a stream operation to retrieve keys from
all nodes. Instead, it&#8217;ll only get keys local from the cache instance local
to the server receiving the request.<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x1E):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, data follows<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">More</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One byte representing whether more
keys need to be read from the stream. So, when it&#8217;s set to 1, it means
that an entry follows, whereas when it&#8217;s set to 0, it&#8217;s the end of stream and
no more entries are left to read. For more information on BulkGet look
<a href="http://community.jboss.org/docs/DOC-15592">here</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">More</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_1_3"><a class="anchor" href="#hot_rod_protocol_1_3"></a>1.4. Hot Rod Protocol 1.3</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol was implemented since Infinispan 6.0.0.Final
and is no longer supported since Infinispan 10.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="request_header_4"><a class="anchor" href="#request_header_4"></a>1.4.1. Request Header</h4>
<div class="paragraph">
<p>The <code>version</code> field in the header is updated to <code>13</code>.</p>
</div>
<div class="paragraph">
<p>A new request operation code has been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x1F = query request</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="response_header_2"><a class="anchor" href="#response_header_2"></a>1.4.2. Response Header</h4>
<div class="paragraph">
<p>A new response operation code has been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x20 = query response</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="operations_3"><a class="anchor" href="#operations_3"></a>1.4.3. Operations</h4>
<div class="paragraph">
<div class="title">Query</div>
<p>Request (0x1F):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of the protobuf encoded query object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the protobuf encoded query object, having a length specified by previous field.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x20):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response payload Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of the protobuf encoded response object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response payload</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the protobuf encoded response object, having a length specified by previous field.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As of Infinispan 6.0, the query and response objects are specified by the protobuf message types 'org.infinispan.client.hotrod.impl.query.QueryRequest' and 'org.infinispan.client.hotrod.impl.query.QueryResponse'
defined in <a href="https://github.com/infinispan/infinispan/blob/master/remote-query/remote-query-client/src/main/resources/org/infinispan/query/remote/client/query.proto">remote-query/remote-query-client/src/main/resources/org/infinispan/query/remote/client/query.proto</a>.
These definitions could change in future Infinispan versions, but as long as these evolutions will be kept backward
compatible (according to the rules defined <a href="https://developers.google.com/protocol-buffers/docs/proto#updating">here</a>) no new Hot Rod
protocol version will be introduced to accommodate this.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_0"><a class="anchor" href="#hot_rod_protocol_2_0"></a>1.5. Hot Rod Protocol 2.0</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 7.0.0.Final.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="request_header_5"><a class="anchor" href="#request_header_5"></a>1.5.1. Request Header</h4>
<div class="paragraph">
<p>The request header no longer contains <code>Transaction Type</code> and <code>Transaction ID</code>
elements since they&#8217;re not in use, and even if they were in use, there are
several operations for which they would not make sense, such as <code>ping</code> or
<code>stats</code> commands. Once transactions are implemented, the protocol version will
be upped, with the necessary changes in the request header.</p>
</div>
<div class="paragraph">
<p>The <code>version</code> field in the header is updated to <code>20</code>.</p>
</div>
<div class="paragraph">
<p>Two new flags have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x0008  = operation skips loading from configured cache loader.</p>
</li>
<li>
<p>0x0010  = operation skips indexing. Only relevant when the query module is enabled for the cache</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following new request operation codes have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x21 = auth mech list request</p>
</li>
<li>
<p>0x23 = auth request</p>
</li>
<li>
<p>0x25 = add client remote event listener request</p>
</li>
<li>
<p>0x27 = remove client remote event listener request</p>
</li>
<li>
<p>0x29 = size request</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="response_header_3"><a class="anchor" href="#response_header_3"></a>1.5.2. Response Header</h4>
<div class="paragraph">
<p>The following new response operation codes have been added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x22 = auth mech list response</p>
</li>
<li>
<p>0x24 = auth mech response</p>
</li>
<li>
<p>0x26 = add client remote event listener response</p>
</li>
<li>
<p>0x28 = remove client remote event listener response</p>
</li>
<li>
<p>0x2A = size response</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Two new error codes have also been added to enable clients more intelligent
decisions, particularly when it comes to fail-over logic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0x87 = Node suspected. When a client receives this error as response,
it means that the node that responded had an issue sending an operation to a
third node, which was suspected. Generally, requests that return this error
should be failed-over to other nodes.</p>
</li>
<li>
<p>0x88 = Illegal lifecycle state. When a client receives this error as response,
it means that the server-side cache or cache manager are not available
for requests because either stopped, they&#8217;re stopping or similar situation.
Generally, requests that return this error should be failed-over to other nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some adjustments have been made to the responses for the following commands in
order to better handle response decoding without the need to keep track of the
information sent. More precisely, the way previous values are parsed has changed
so that the status of the command response provides clues on whether the previous
value follows or not. More precisely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Put response returns <code>0x03</code> status code when put was successful
and previous value follows.</p>
</li>
<li>
<p>PutIfAbsent response returns <code>0x04</code> status code only when the putIfAbsent
operation failed because the key was present and its value follows in the
response. If the putIfAbsent worked, there would have not been a previous value,
and hence it does not make sense returning anything extra.</p>
</li>
<li>
<p>Replace response returns <code>0x03</code> status code only when replace happened and the
previous or replaced value follows in the response. If the replace did not happen,
it means that the cache entry was not present, and hence there&#8217;s no previous value
that can be returned.</p>
</li>
<li>
<p>ReplaceIfUnmodified returns <code>0x03</code> status code only when replace happened and
the previous or replaced value follows in the response.</p>
</li>
<li>
<p>ReplaceIfUnmodified returns <code>0x04</code> status code only when replace did not happen
as a result of the key being modified, and the modified value follows in the response.</p>
</li>
<li>
<p>Remove returns <code>0x03</code> status code when the remove happened and the previous or
removed value follows in the response. If the remove did not occur as a result
of the key not being present, it does not make sense sending any previous value
information.</p>
</li>
<li>
<p>RemoveIfUnmodified returns <code>0x03</code> status code only when remove happened and
the previous or replaced value follows in the response.</p>
</li>
<li>
<p>RemoveIfUnmodified returns <code>0x04</code> status code only when remove did not happen
as a result of the key being modified, and the modified value follows in the response.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="distribution_aware_client_topology_change_header_3"><a class="anchor" href="#distribution_aware_client_topology_change_header_3"></a>1.5.3. Distribution-Aware Client Topology Change Header</h4>
<div class="paragraph">
<p>In Infinispan 5.2, virtual nodes based consistent hashing was abandoned and
instead segment based consistent hash was implemented. In order to satisfy
the ability for Hot Rod clients to find data as reliably as possible,
Infinispan has been transforming the segment based consistent hash to fit
Hot Rod 1.x protocol.  Starting with version 2.0, a brand new
distribution-aware topology change header has been implemented which suppors
 segment based consistent hashing suitably and provides 100% data location
 guarantees.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header with topology change marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num servers in topology</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Infinispan Hot Rod servers running within the cluster.
This could be a subset of the entire cluster if only a fraction of those
nodes are running Hot Rod servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of hostname or IP address of individual cluster member that Hot Rod
client can use to access it. Using variable length here allows for covering
for hostnames, IPv4 and IPv6 addresses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing hostname or IP address of individual cluster member
that Hot Rod client can use to access it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m1: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that Hot Rod clients can use to communicat with this cluster member.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Host/IP address</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m2: Port</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">2 bytes (Unsigned Short)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash Function Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash function version, pointing to a specific hash function in use.
See <a href="#hot_rod_hash_functions">Hot Rod hash functions</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Num segments in topology</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of segments in the topology</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of owners in segment</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This can be either 0, 1 or 2 owners.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">First owner&#8217;s index</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Given the list of all nodes, the position of this owner in this list.
This is only present if number of owners for this segment is 1 or 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second owner&#8217;s index</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Given the list of all nodes, the position of this owner in this list.
This is only present if number of owners for this segment is 2.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Given this information, Hot Rod clients should be able to recalculate all
the hash segments and be able to find out which nodes are owners for each
segment. Even though there could be more than 2 owners per segment, Hot Rod
protocol limits the number of owners to send for efficiency reasons.</p>
</div>
</div>
<div class="sect3">
<h4 id="operations_4"><a class="anchor" href="#operations_4"></a>1.5.4. Operations</h4>
<div class="paragraph">
<div class="title">Auth Mech List</div>
<p>Request (0x21):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x22):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mech count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of mechs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mech 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing the name of the SASL mech in its IANA-registered form (e.g. GSSAPI, CRAM-MD5, etc)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mech 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;etc</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The purpose of this operation is to obtain the list of valid SASL authentication mechs supported by the server. The client
will then need to issue an Authenticate request with the preferred mech.</p>
</div>
<div class="paragraph">
<div class="title">Authenticate</div>
<p>Request (0x23):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mech</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String containing the name of the mech chosen by the client for authentication. Empty on the successive invocations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of the SASL client response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SASL client response</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x24):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Completed</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 if further processing is needed, 1 if authentication is complete</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Challenge length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of the SASL server challenge</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Challenge data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The SASL server challenge</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The purpose of this operation is to authenticate a client against a server using SASL. The authentication process, depending
on the chosen mech, might be a multi-step operation. Once complete the connection becomes authenticated</p>
</div>
<div class="paragraph">
<div class="title">Add client listener for remote events</div>
<p>Request (0x25):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include state</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When this byte is set to <code>1</code>, cached state is
sent back to remote clients when either adding a cache listener for the first
time, or when the node where a remote listener is registered changes in a clustered
environment. When enabled, state is sent back as cache entry created events to
the clients. If set to <code>0</code>, no state is sent back to the client when adding a listener,
nor it gets state when the node where the listener is registered changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional name of the key/value filter
factory to be used with this listener. The factory is used to create key/value
filter instances which allow events to be filtered directly in the Hot Rod
server, avoiding sending events that the client is not interested in. If no
factory is to be used, the length of the string is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key/value filter
factory, when creating a filter instance, can take an arbitrary number of
parameters, enabling the factory to be used to create different filter
instances dynamically. This count field indicates how many parameters will be
passed to the factory. If no factory name was provided, this field is not
present in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First key/value filter
factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second key/value filter
factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional name of the converter
factory to be used with this listener. The factory is used to transform the
contents of the events sent to clients. By default, when no converter is in use,
events are well defined, according to the type of event generated. However,
there might be situations where users want to add extra information to the event,
or they want to reduce the size of the events. In these cases, a converter can
be used to transform the event contents. The given converter factory name
produces converter instances to do this job. If no factory is to be used, the
length of the string is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The converter
factory, when creating a converter instance, can take an arbitrary number of
parameters, enabling the factory to be used to create different converter
instances dynamically. This count field indicates how many parameters will be
passed to the factory. If no factory name was provided, this field is not
present in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First converter factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second converter factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x26):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Remove client listener for remote events</div>
<p>Request (0x27):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener identifier</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x28):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Size</div>
<p>Request (0x29):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x2A):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the remote cache, which is calculated globally in the
clustered set ups, and if present, takes cache store contents into account as
well.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Exec</div>
<p>Request (0x2B):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the task to execute</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter Count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of parameters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter 1 Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the first parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of the first parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter 1 Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of the first parameter</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x2C):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if execution completed successfully<br>
0x85 = server error<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, length of return value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, the result of the execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="remote_events"><a class="anchor" href="#remote_events"></a>1.5.5. Remote Events</h4>
<div class="paragraph">
<p>Starting with Hot Rod 2.0, clients can register listeners for remote events
happening in the server. Sending these events commences the moment a client
adds a client listener for remote events.</p>
</div>
<div class="paragraph">
<p>Event Header:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Magic</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0xA1 = response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of event</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opcode</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event type:<br>
0x60 = cache entry created event<br>
0x61 = cache entry modified event<br>
0x62 = cache entry removed event<br>
0x66 = counter event<br>
0x50 = error<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status of the response, possible values:<br>
0x00 = No error<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology Change Marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since events are not associated with a
particular incoming topology ID to be able to decide whether a new topology is
required to be sent or not, new topologies will never be sent with events. Hence,
this marker will always have <code>0</code> value for events.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Cache entry created event</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with <code>0x60</code> operation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener for which this event is directed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event marker. For created events, this is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command retried</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marker for events that are result of retried commands.
If command is retried, it returns <code>1</code>, otherwise <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the created entry. This version information can
be used to make conditional operations on this cache entry.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Cache entry modified event</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with <code>0x61</code> operation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener for which this event is directed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event marker. For created events, this is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command retried</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marker for events that are result of retried commands.
If command is retried, it returns <code>1</code>, otherwise <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modified key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the modified entry. This version information can
be used to make conditional operations on this cache entry.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Cache entry removed event</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with <code>0x62</code> operation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener for which this event is directed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event marker. For created events, this is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command retried</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marker for events that are result of retried commands.
If command is retried, it returns <code>1</code>, otherwise <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Removed key</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Custom event</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with event specific operation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener for which this event is directed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event marker. For custom  events, this is <code>1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event data, formatted according to the
converter implementation logic.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_1"><a class="anchor" href="#hot_rod_protocol_2_1"></a>1.6. Hot Rod Protocol 2.1</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 7.1.0.Final.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="request_header_6"><a class="anchor" href="#request_header_6"></a>1.6.1. Request Header</h4>
<div class="paragraph">
<p>The <code>version</code> field in the header is updated to <code>21</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="operations_5"><a class="anchor" href="#operations_5"></a>1.6.2. Operations</h4>
<div class="paragraph">
<div class="title">Add client listener for remote events</div>
<p>An extra byte parameter is added at the end which indicates whether the client
prefers client listener to work with raw binary data for filter/converter
callbacks. If using raw data, its value is <code>1</code> otherwise <code>0</code>.</p>
</div>
<div class="paragraph">
<p>Request format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include state</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use raw data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If filter/converter parameters should be raw binary,
then <code>1</code>, otherwise <code>0</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Custom event</div>
<p>Starting with Hot Rod 2.1, custom events can return raw data that the Hot Rod
client should not try to unmarshall before passing it on to the user. The way
this is transmitted to the Hot Rod client is by sending <code>2</code> as the custom
event marker. So, the format of the custom event remains like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with event specific operation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener for which this event is directed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom marker</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event marker. For custom events whose event
data needs to be unmarshalled before returning to user the value is <code>1</code>. For
custom events that need to return the event data as-is to the user, the value
is <code>2</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event data</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom event data. If the custom marker is <code>1</code>,
the bytes represent the marshalled version of the instance returned by the
converter. If custom marker is <code>2</code>, it represents the byte array, as returned
by the converter.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_2"><a class="anchor" href="#hot_rod_protocol_2_2"></a>1.7. Hot Rod Protocol 2.2</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 8.0
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Added support for different time units.</p>
</div>
<div class="sect3">
<h4 id="operations_6"><a class="anchor" href="#operations_6"></a>1.7.1. Operations</h4>
<div class="paragraph">
<div class="title">Put/PutAll/PutIfAbsent/Replace/ReplaceIfUnmodified</div>
<p>Common request format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnits</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time units of lifespan (first 4 bits) and maxIdle (last 4 bits). Special units
DEFAULT and INFINITE can be used for default server expiration and no expiration respectively. Possible values:<br>
0x00 = SECONDS<br>
0x01 = MILLISECONDS<br>
0x02 = NANOSECONDS<br>
0x03 = MICROSECONDS<br>
0x04 = MINUTES<br>
0x05 = HOURS<br>
0x06 = DAYS<br>
0x07 = DEFAULT<br>
0x08 = INFINITE<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration which the entry is allowed to life. Only sent when time unit is not DEFAULT or INFINITE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration that each entry can be idle before it&#8217;s evicted from the cache. Only sent when time unit is not DEFAULT or INFINITE</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_3"><a class="anchor" href="#hot_rod_protocol_2_3"></a>1.8. Hot Rod Protocol 2.3</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 8.0
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="operations_7"><a class="anchor" href="#operations_7"></a>1.8.1. Operations</h4>
<div class="paragraph">
<div class="title">Iteration Start</div>
<p>Request (0x31):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the bitset encoding of the segments ids to iterate on. The size is the maximum segment id rounded to nearest multiple of 8.<br>
A value -1 indicates no segment filtering is to be done</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) Contains the segments ids bitset encoded, where each bit with value 1 represents a segment in the set. Byte order is little-endian.<br>
Example: segments [1,3,12,13] would result in the following encoding:<br>
00001010 00110000<br>
size: 16 bits<br>
first byte: represents segments from 0 to 7, from which 1 and 3 are set<br>
second byte: represents segments from 8 to 15, from which 12 and 13 are set<br>
More details in the java.util.BitSet implementation. Segments will be sent if the previous field is not negative</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the String representing a KeyValueFilterConverter factory name deployed on the server, or -1 if no filter will be used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">UTF-8 byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) KeyValueFilterConverter factory name deployed on the server. Present if previous field is not negative</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BatchSize</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of entries to transfers from the server at one go</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x32):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IterationId</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique id of the iteration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Iteration Next</div>
<p>Request (0x33):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IterationId</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique id of the iteration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x34):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">size of the bitset representing segments that were finished iterating</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitset encoding of the segments that were finished iterating</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many entries are being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieved value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until entry count is reached</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Iteration End</div>
<p>Request (0x35):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IterationId</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique id of the iteration</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x36):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Header</th>
<th class="tableblock halign-center valign-top">variable</th>
<th class="tableblock halign-left valign-top">Response header</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if execution completed successfully<br>
0x05 = for non existent IterationId <br></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_4"><a class="anchor" href="#hot_rod_protocol_2_4"></a>1.9. Hot Rod Protocol 2.4</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 8.1
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This Hot Rod protocol version adds three new status code that gives the client
hints on whether the server has compatibility mode enabled or not:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x06</code>: Success status and compatibility mode is enabled.</p>
</li>
<li>
<p><code>0x07</code>: Success status and return previous value, with compatibility mode is enabled.</p>
</li>
<li>
<p><code>0x08</code>: Not executed and return previous value, with compatibility mode is enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Iteration Start operation can optionally send parameters if a custom filter is provided and
it&#8217;s parametrised:</p>
</div>
<div class="sect3">
<h4 id="operations_8"><a class="anchor" href="#operations_8"></a>1.9.1. Operations</h4>
<div class="paragraph">
<div class="title">Iteration Start</div>
<p>Request (0x31):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">UTF-8 byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the number of params of the filter. Only present when FilterConverter is provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte[][]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an array of parameters, each parameter is a byte array. Only present if Parameters size is greater than 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BatchSize</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The Iteration Next operation can optionally return projections in the value,
meaning more than one value is contained in the same entry.</p>
</div>
<div class="paragraph">
<div class="title">Iteration Next</div>
<p>Response (0x34):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of value projections</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of projections for the values. If 1, behaves like version protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value1 projection1 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">length of value1 first projection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value1 projection1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieved value1 first projection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value1 projection2 length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">length of value2 second projection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value1 projection2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieved value2 second projection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until all projections for the value retrieved</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Key2 Length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vInt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Key2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.3.</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Value2 projection1 length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vInt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length of value 2 first projection</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Value2 projection1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieved value 2 first projection</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Value2 projection2 length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vInt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length of value 2 second projection</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Value2 projection2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieved value 2 second projection</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203; continues until entry count is reached</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stats:</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Statistics returned by previous Hot Rod protocol versions were local to the node
where the Hot Rod operation had been called. Starting with 2.4, new statistics
have been added which provide global counts for the statistics returned
previously. If the Hot Rod is running in local mode, these statistics are not
returned:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalCurrentNumberOfEntries</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of entries currently across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalStores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of put operations across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalRetrievals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of get operations across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalHits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of get hits across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalMisses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of get misses across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalRemoveHits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of removal hits across the Hot Rod cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">globalRemoveMisses</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of removal misses across the Hot Rod cluster.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_5"><a class="anchor" href="#hot_rod_protocol_2_5"></a>1.10. Hot Rod Protocol 2.5</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 8.2
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This Hot Rod protocol version adds support for metadata retrieval along with entries in the iterator.
It includes two changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Iteration Start request includes an optional flag</p>
</li>
<li>
<p>IterationNext operation may include metadata info for each entry if the flag above is set</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Iteration Start</div>
<p>Request (0x31):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FilterConverter</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">UTF-8 byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameters</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte[][]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BatchSize</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 if metadata is to be returned for each entry, 0 otherwise</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Iteration Next</div>
<p>Response (0x34):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments size</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finished segments</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of value projections</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata  (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set, entry has metadata associated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expiration (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag indicating whether the response
contains expiration information. The value of the flag is obtained as a
bitwise OR operation between INFINITE_LIFESPAN (0x01) and
<code>INFINITE_MAXIDLE (0x02)</code>. Only present if the metadata flag above is set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was created on the server. This value is returned
only if the flag&#8217;s INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
lifespan of the entry in seconds. This value is returned only if the flag&#8217;s
INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastUsed (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was last accessed on the server. This value is
returned only if the flag&#8217;s <code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxIdle (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
maxIdle of the entry in seconds. This value is returned only if the flag&#8217;s
<code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version (entry 1)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique value of an existing entry&#8217;s modification. Only present if Metadata flag is set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as protocol version 2.4.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expiration (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastUsed (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxIdle (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version (entry 2)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as for entry 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203; continues until entry count is reached</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_6"><a class="anchor" href="#hot_rod_protocol_2_6"></a>1.11. Hot Rod Protocol 2.6</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 9.0
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This Hot Rod protocol version adds support for streaming get and put operations.
It includes two new operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GetStream for retrieving data as a stream, with an optional initial offset</p>
</li>
<li>
<p>PutStream for writing data as a stream, optionally by specifying a version</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">GetStream</div>
<p>Request (0x37):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The offset in bytes from which to start retrieving. Set to 0 to retrieve from the
beginning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">GetStream</div>
<p>Response (0x38):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if key retrieved<br>
0x02 = if key does not exist<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag indicating whether the response
contains expiration information. The value of the flag is obtained as a
bitwise OR operation between INFINITE_LIFESPAN (0x01) and
<code>INFINITE_MAXIDLE (0x02)</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was created on the server. This value is returned
only if the flag&#8217;s INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
lifespan of the entry in seconds. This value is returned only if the flag&#8217;s
INFINITE_LIFESPAN bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastUsed</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a Long representing the
timestamp when the entry was last accessed on the server. This value is
returned only if the flag&#8217;s <code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MaxIdle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(optional) a vInt representing the
maxIdle of the entry in seconds. This value is returned only if the flag&#8217;s
<code>INFINITE_MAXIDLE</code> bit is not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique value of an existing entry&#8217;s modification.
The protocol does not mandate that entry_version values are sequential.
They just need to be unique per update at the key level.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, length of value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If success, the requested value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">PutStream</div>
<p>Request (0x39)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">8 bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Possible values<br>
0 = Unconditional put<br>
-1 = Put If Absent<br>
Other values =  pass a version obtained by <code>GetWithMetadata</code> operation to perform a conditional replace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key. Note that the size of a
vint can be up to 5 bytes which in theory can produce bigger numbers than
Integer.MAX_VALUE. However, Java cannot create a single array thats bigger
than Integer.MAX_VALUE, hence the protocol is limiting vint array lengths to
Integer.MAX_VALUE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key whose value is being requested.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Chunk 1 Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the first chunk of data. If this value is 0 it means the client has
 completed transferring the value and the operation should be performed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Chunk 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of bytes forming the fist chunk of data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;continues until the value is complete</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x3A):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On top of these additions, this Hot Rod protocol version improves remote listener registration by adding a byte that indicates at a global level, which type of events the client is interested in.
For example, a client can indicate that only created events, or only expiration and removal events&#8230;&#8203;etc.
More fine grained event interests, e.g. per key, can be defined using the key/value filter parameter.</p>
</div>
<div class="paragraph">
<p>So, the new add listener request looks like this:</p>
</div>
<div class="paragraph">
<div class="title">Add client listener for remote events</div>
<p>Request (0x25):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include state</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When this byte is set to <code>1</code>, cached state is
sent back to remote clients when either adding a cache listener for the first
time, or when the node where a remote listener is registered changes in a clustered
environment. When enabled, state is sent back as cache entry created events to
the clients. If set to <code>0</code>, no state is sent back to the client when adding a listener,
nor it gets state when the node where the listener is registered changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional name of the key/value filter
factory to be used with this listener. The factory is used to create key/value
filter instances which allow events to be filtered directly in the Hot Rod
server, avoiding sending events that the client is not interested in. If no
factory is to be used, the length of the string is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key/value filter
factory, when creating a filter instance, can take an arbitrary number of
parameters, enabling the factory to be used to create different filter
instances dynamically. This count field indicates how many parameters will be
passed to the factory. If no factory name was provided, this field is not
present in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First key/value filter
factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key/value filter factory parameter 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second key/value filter
factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional name of the converter
factory to be used with this listener. The factory is used to transform the
contents of the events sent to clients. By default, when no converter is in use,
events are well defined, according to the type of event generated. However,
there might be situations where users want to add extra information to the event,
or they want to reduce the size of the events. In these cases, a converter can
be used to transform the event contents. The given converter factory name
produces converter instances to do this job. If no factory is to be used, the
length of the string is <code>0</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter count</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The converter
factory, when creating a converter instance, can take an arbitrary number of
parameters, enabling the factory to be used to create different converter
instances dynamically. This count field indicates how many parameters will be
passed to the factory. If no factory name was provided, this field is not
present in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter 1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First converter factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converter factory parameter 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second converter factory parameter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener even type interests</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A variable length number representing listener event type interests.
Each event type is represented by a bit.
Each flags is represented by a bit.
Note that since this field is sent as variable length, the most significant bit in a byte is used to determine whether more bytes need to be read, hence this bit does not represent any flag.
Using this model allows for flags to be combined in a short space.
Here are the current values for each flag:<br>
0x01 = cache entry created events
0x02 = cache entry modified events
0x04 = cache entry removed events
0x08 = cache entry expired events</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_7"><a class="anchor" href="#hot_rod_protocol_2_7"></a>1.12. Hot Rod Protocol 2.7</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 9.2
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This Hot Rod protocol version adds support for transaction operations.
It includes 3 new operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prepare, with the transaction write set (i.e. modified keys), it tries to prepare and validate the transaction in the server.</p>
</li>
<li>
<p>Commit, commits a prepared transaction.</p>
</li>
<li>
<p>Rollback, rollbacks a prepared transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Prepare Request</div>
<p>Request (0x3B):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">XID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction ID (XID)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OnePhaseCommit</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When it is set to <code>1</code>, the server will use one-phase-commit if available (XA only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of keys</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of keys</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">For each key (keys must be distinct)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key.
Note that the size of a vInt can be up to 5 bytes which in theory can produce bigger numbers than <code>Integer.MAX_VALUE</code>.
However, Java cannot create a single array thats bigger than <code>Integer.MAX_VALUE</code>, hence the protocol is limiting vInt array lengths to <code>Integer.MAX_VALUE</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control Byte</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A bit set with the following meaning:<br>
0x01 = <code>NOT_READ</code><br>
0x02 = <code>NON_EXISTING</code><br>
0x04 = <code>REMOVE_OPERATION</code><br>
Note that <code>NOT_READ</code> and <code>NON_EXISTING</code> can&#8217;t be set at the same time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version Read</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version read. Only sent when <code>NOT_READ</code> and <code>NON_EXISTING</code> aren&#8217;t present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnits</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time units of lifespan (first 4 bits) and maxIdle (last 4 bits).
Special units <code>DEFAULT</code> and <code>INFINITE</code> can be used for default server expiration and no expiration respectively.
Possible values:<br>
0x00 = <code>SECONDS</code><br>
0x01 = <code>MILLISECONDS</code><br>
0x02 = <code>NANOSECONDS</code><br>
0x03 = <code>MICROSECONDS</code><br>
0x04 = <code>MINUTES</code><br>
0x05 = <code>HOURS</code><br>
0x06 = <code>DAYS</code><br>
0x07 = <code>DEFAULT</code><br>
0x08 = <code>INFINITE</code><br>
Only sent when <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration which the entry is allowed to life.
Only sent when time unit is not <code>DEFAULT</code> or <code>INFINITE</code> and <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration that each entry can be idle before it&#8217;s evicted from the cache.
Only sent when time unit is not <code>DEFAULT</code> or <code>INFINITE</code> and <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value.
Only sent if <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte-array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to be stored.
Only sent if <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Commit and Rollback Request</div>
<p>Request. Commit (0x3D) and Rollback (0x3F):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">XID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction ID (XID)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Response from prepare, commit and rollback request.</div>
<p>Response. Prepare (0x3C), Commit (0x3E) and Rollback (0x40)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XA return code</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The XA code representing the prepare response.<br>
Can be <code>XA_OK(0)</code>, <code>XA_RDONLY(3)</code> or any of the error codes (see <code>XaException</code>).<br>
This field isn&#8217;t present if the response state is different from <code>Successful</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">XID Format</div>
<p>The XID in the requests has the following format:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">signed vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The XID format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of Global Transaction id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of global transaction id byte array. It max value is <code>64</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Transaction Id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The global transaction id.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of Branch Qualifier</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of branch qualifier byte array. It max value is <code>64</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Branch Qualifier</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The branch qualifier.</p></td>
</tr>
</tbody>
</table>
<div id="counter_config_encode" class="paragraph">
<div class="title">Counter Configuration encoding format</div>
<p>The <code>CounterConfiguration</code> class encoding format is the following:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In counter related operation, the <code>Cache Name</code> field in Request Header can be empty.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Summary of <code>Status</code> value in the Response Header:<br>
* <code>0x00</code>: Operation successful.<br>
* <code>0x01</code>: Operation failed.<br>
* <code>0x02</code>: The counter isn&#8217;t defined.<br>
* <code>0x04</code>: The counter reached a boundary. Only possible for <code>STRONG</code> counters.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flags</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>CounterType</code> and <code>Storage</code> encoded. Only the less significant bits are used as following:<br>
1st bit: <code>1</code> for <code>WEAK</code> counter and <code>0</code> for <code>STRONG</code> counter.<br>
2nd bit: <code>1</code> for <code>BOUNDED</code> counter and <code>0</code> for <code>UNBOUNDED</code> counter<br>
3rd bit: <code>1</code> for <code>PERSISTENT</code> storage and <code>0</code> for <code>VOLATILE</code> storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Concurrency Level</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the counter&#8217;s concurrency-level.
Only present if the counter is <code>WEAK</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lower bound</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the lower bound of a bounded counter.
Only present if the counter is <code>BOUNDED</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upper bound</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the upper bound of a bounded counter.
Only present if the counter is <code>BOUNDED</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s initial value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Counter create operation</div>
<p>Creates a counter if it doesn&#8217;t exist.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Request (0x4B)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter Configuration</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s configuration.
See <a href="#counter_config_encode">CounterConfiguration encode</a>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Response (0x4C)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x01</code>: Operation failed. Counter is already defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter get configuration operation</div>
<p>Returns the counter&#8217;s configuration.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Request (0x4D)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Response (0x4E)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter Configuration</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) The counter&#8217;s configuration.
Only present if <code>Status==0x00</code>.
See <a href="#counter_config_encode">CounterConfiguration encode</a>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: Counter doesn&#8217;t exist.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter is defined operation</div>
<p>Checks if the counter is defined.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Request (0x4F)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Response (0x51)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Counter is defined.</p>
</li>
<li>
<p><code>0x01</code>: Counter isn&#8217;t defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter add-and-get operation</div>
<p>Adds a value to the counter and returns the new value.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Request (0x52)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value to add</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Response (0x53)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the counter&#8217;s new value.
Only present if <code>Status==0x00</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since the <code>WeakCounter</code> doesn&#8217;t have access to the new value, the <code>value</code> is zero.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: The counter isn&#8217;t defined.</p>
</li>
<li>
<p><code>0x04</code>: The counter reached its boundary. Only possible for <code>STRONG</code> counters.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter reset operation</div>
<p>Resets the counter&#8217;s value.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Request (0x54)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Response (0x55)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: Counter isn&#8217;t defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter get operation</div>
<p>Returns the counter&#8217;s value.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Request (0x56)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Response (0x57)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the counter&#8217;s value.
Only present if <code>Status==0x00</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: Counter isn&#8217;t defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter compare-and-swap operation</div>
<p>Compares and only updates the counter value if the current value is the expected.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Request (0x58)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expect</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s expected value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s value to set.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Response (0x59)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) the counter&#8217;s value.
Only present if <code>Status==0x00</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: The counter isn&#8217;t defined.</p>
</li>
<li>
<p><code>0x04</code>: The counter reached its boundary. Only possible for <code>STRONG</code> counters.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Counter add and remove listener</div>
<p>Adds/Removes a listener for a counter</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Request ADD (0x5A) / REMOVE (0x5C)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener-id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener&#8217;s id</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Response: ADD (0x5B) / REMOVE (0x5D)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful and the connection used in the request will be used to send event (add) or the connection can be removed (remove).</p>
</li>
<li>
<p><code>0x01</code>: Operation successful and the current connection is still in use.</p>
</li>
<li>
<p><code>0x02</code>: The counter isn&#8217;t defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Counter Event (0x66)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event header with operation code <code>0x66</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Listener-id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The listener&#8217;s id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoded Counter State</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encoded old and new counter state. Bit set:<br>
<code>------00</code>: Valid old state<br>
<code>------01</code>: Lower bound reached old state<br>
<code>------10</code>: Upper bound reached old state<br>
<code>----00--</code>: Valid new state<br>
<code>----01--</code>: Lower bound reached new state<br>
<code>----10--</code>: Upper bound reached new state<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Old value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter&#8217;s old value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">New value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter&#8217;s new value</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All counters under a <code>CounterManager</code> implementation can use the same <code>listener-id</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A connection is dedicated to a single <code>listener-id</code> and can receive events from different counters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Counter remove operation</div>
<p>Removes the counter from the cluster.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The counter is re-created if it is accessed again.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Request (0x5E)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The counter&#8217;s name</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Response (0x5F)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response Header <code>Status</code> possible values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x00</code>: Operation successful.</p>
</li>
<li>
<p><code>0x02</code>: The counter isn&#8217;t defined.</p>
</li>
<li>
<p>See the <a href="#hot_rod_response_header">Reponse Header</a> for error codes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_8"><a class="anchor" href="#hot_rod_protocol_2_8"></a>1.13. Hot Rod Protocol 2.8</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 9.3
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Events</div>
<p>The protocol allows clients to send requests on the same connection that was previously used for Add Client Listener
operation, and in protocol &lt; 2.8 is reserved for sending events to the client. This includes registering additional
listeners, therefore receiving events for multiple listeners.</p>
</div>
<div class="paragraph">
<p>The binary format of requests/responses/events does not change but the previously meaningless <code>messageId</code> in events
must be set to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>messageId</code> of the Add Client Listener operation for the include-current-state events</p>
</li>
<li>
<p><code>0</code> for the events sent after the Add Client Listener operation has been finished (response sent).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The same holds for counter events: client can send further requests after Counter Add Listener.
Previously meaningless <code>messageId</code> in counter event is always set to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>These modifications of the protocol do not require any changes on the client side (as the client simply
won&#8217;t send additional operations if it does not support that; the changes are more permissive to the clients)
but the server has to handle load on the connection correctly.</p>
</div>
<div class="paragraph">
<div class="title">MediaType</div>
<p>This Hot Rod protocol version also adds support for specifying the MediaType of Keys and Values, allowing data
to be read (and written) in different formats. This information is part of the Header.</p>
</div>
<div class="paragraph">
<p>The data formats are described using a <em>MediaType</em> object, that is represented as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = No MediaType supplied<br>
0x01 = Pre-defined MediaType supplied<br>
0x02 = Custom MediaType supplied<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) For a pre-defined MediaType (type=0x01), the Id of the MediaType. The currently supported Ids can be found at <a href="https://github.com/infinispan/infinispan/blob/master/commons/src/main/java/org/infinispan/commons/dataconversion/MediaTypeIds.java">MediaTypeIds</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">customString</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) If a custom MediaType is supplied (type=0x02), the custom MediaType of the key, including type and subtype. E.g.: <em>text/plain</em>, <em>application/json</em>, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paramSize</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the parameters for the MediaType</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paramKey1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) The first parameter&#8217;s key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paramValue1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) The first parameter&#8217;s value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paramKeyN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) The nth parameter&#8217;s key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paramValueN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) The nth parameter&#8217;s value</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="request_header_7"><a class="anchor" href="#request_header_7"></a>1.13.1. Request Header</h4>
<div class="paragraph">
<p>The request header has the following extra fields:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Type</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Format</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The MediaType to be used for keys during the operation. It applies to both the keys sent and received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Format</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analogous to Key Format, but applied for the values.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_2_9"><a class="anchor" href="#hot_rod_protocol_2_9"></a>1.14. Hot Rod Protocol 2.9</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 9.4
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Compatibility Mode removal</div>
<p>The compatibility mode hint from the <em>Response status</em> fields from the operations is not sent anymore. Consequently, the following statuses are removed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0x06</code>: Success status with compatibility mode.</p>
</li>
<li>
<p><code>0x07</code>: Success status with return previous value and compatibility mode.</p>
</li>
<li>
<p><code>0x08</code>: Not executed with return previous value and compatibility mode.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To figure out what is the server&#8217;s storage, the configured MediaType of keys and values are returned on the ping operation:</p>
</div>
<div class="paragraph">
<p>Ping Response (0x18):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as before</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">same as before</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media Type of the key stored in the server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media Type of the value stored in the server</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">New query format</div>
<p>This version supports query requests and responses in JSON format. The format of the operations <strong>0x1F</strong> (Query Request) and <strong>0x20</strong> (Query Response) are not changed.</p>
</div>
<div class="paragraph">
<p>To send JSON payloads, the "Value Format" field in the header should be <em>application/json</em>.</p>
</div>
<div class="paragraph">
<p>Query Request (0x1F):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Request header</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length of the UTF-8 encoded query object.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Byte array containing the JSON (UTF-8) encoded query object, having a length specified by the previous field. Example of payload:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
 "query":"From Entity where field1:'value1'",
 "offset": 12,
 "max-results": 1000,
 "query-mode": "FETCH"
}</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>query: the Ickle query String.
offset: the index of the first result to return.
max_results: the maximum number of results to return.
query_mode: the indexed query mode. Either FETCH or BROADCAST. FECTH is the default.</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Query Response (0x20):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Response header</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response payload Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The length of the UTF-8 encoded response object</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response payload</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Byte array containing the JSON encoded response object, having a length specified by previous field. Example payload:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  "total_results":801,
  "hits":[
     {
        "hit":{
           "field1":565,
           "field2":"value2"
        }
     },
     {
        "hit":{
           "field1":34,
           "field2":"value22"
        }
     }
  ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>total_results: the total number of results of the query.
hits: an ARRAY of OBJECT representing the results.
hit: each OBJECT above contain another OBJECT in the "hit" field, containing the result of the query, in JSON format.</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Also, this version introduces 3 new operations for Hot Rod transactions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prepare Request V2:
It adds new parameters to the request.
The response stays the same.</p>
</li>
<li>
<p>Forget Transaction Request:
Removes transaction information in the server.</p>
</li>
<li>
<p>Fetch In-Doubt Transactions Request:
Fetches all in-doubt transactions&#8217;s Xid.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Prepare Request V2</div>
<p>Request (0x7D):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">XID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction ID (XID)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OnePhaseCommit</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When it is set to <code>1</code>, the server will use one-phase-commit if available (XA only)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recoverable</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>1</code> to allow recovery in this transactions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The idle timeout in milliseconds.
If the transaction isn&#8217;t recoverable (<code>Recoverable=0</code>), the server rollbacks the transaction if it has
been idle for this amount of time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of keys</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of keys</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">For each key (keys must be distinct)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of key.
Note that the size of a vInt can be up to 5 bytes which in theory can produce bigger numbers than <code>Integer.MAX_VALUE</code>.
However, Java cannot create a single array thats bigger than <code>Integer.MAX_VALUE</code>, hence the protocol is limiting vInt array lengths to <code>Integer.MAX_VALUE</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte array containing the key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control Byte</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A bit set with the following meaning:<br>
0x01 = <code>NOT_READ</code><br>
0x02 = <code>NON_EXISTING</code><br>
0x04 = <code>REMOVE_OPERATION</code><br>
Note that <code>NOT_READ</code> and <code>NON_EXISTING</code> can&#8217;t be set at the same time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version Read</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version read. Only sent when <code>NOT_READ</code> and <code>NON_EXISTING</code> aren&#8217;t present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnits</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time units of lifespan (first 4 bits) and maxIdle (last 4 bits).
Special units <code>DEFAULT</code> and <code>INFINITE</code> can be used for default server expiration and no expiration respectively.
Possible values:<br>
0x00 = <code>SECONDS</code><br>
0x01 = <code>MILLISECONDS</code><br>
0x02 = <code>NANOSECONDS</code><br>
0x03 = <code>MICROSECONDS</code><br>
0x04 = <code>MINUTES</code><br>
0x05 = <code>HOURS</code><br>
0x06 = <code>DAYS</code><br>
0x07 = <code>DEFAULT</code><br>
0x08 = <code>INFINITE</code><br>
Only sent when <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lifespan</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration which the entry is allowed to life.
Only sent when time unit is not <code>DEFAULT</code> or <code>INFINITE</code> and <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Idle</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vLong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration that each entry can be idle before it&#8217;s evicted from the cache.
Only sent when time unit is not <code>DEFAULT</code> or <code>INFINITE</code> and <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Length</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of value.
Only sent if <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">byte-array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to be stored.
Only sent if <code>REMOVE_OPERATION</code> isn&#8217;t set.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x7E)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XA return code</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The XA code representing the prepare response.<br>
Can be <code>XA_OK(0)</code>, <code>XA_RDONLY(3)</code> or any of the error codes (see <code>XaException</code>).<br>
This field isn&#8217;t present if the response state is different from <code>Successful</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Forget Transaction</div>
<p>Request (0x79)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">XID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction ID (XID)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x7A)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">Fetch in-doubt transactions</div>
<p>Request (0x7B)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Response (0x7C)</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of Xid in response</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">For each entry:</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xid</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">XID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The transaction ID (XID)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="hot_rod_hash_functions"><a class="anchor" href="#hot_rod_hash_functions"></a>1.15. Hot Rod Hash Functions</h3>
<div class="paragraph">
<p>Infinispan makes use of a consistent hash function to place nodes on a hash
wheel, and to place keys of entries on the same wheel to determine where
entries live.</p>
</div>
<div class="paragraph">
<p>In Infinispan 4.2 and earlier, the hash space was hardcoded to 10240, but
since 5.0, the hash space is
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#MAX_VALUE">Integer.MAX_INT</a> .
Please note that since Hot Rod clients should not assume a particular hash
space by default, every time a hash-topology change is detected, this value is
sent back to the client via the Hot Rod protocol.</p>
</div>
<div class="paragraph">
<p>When interacting with Infinispan via the Hot Rod protocol, it is mandated
that keys (and values) are byte arrays, to ensure platform neutral behavior.
As such, smart-clients which are aware of hash distribution on the backend
would need to be able to calculate the hash codes of such byte array keys,
again in a platform-neutral manner. To this end, the hash functions used by
Infinispan are versioned and documented, so that it can be re-implemented by
non-Java clients if needed.</p>
</div>
<div class="paragraph">
<p>The version of the hash function in use is provided in the Hot Rod protocol,
as the hash function version parameter.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Version 1 (single byte, 0x01) The initial version of the hash function in
use is based on
<a href="https://github.com/infinispan/infinispan/blob/master/commons/src/main/java/org/infinispan/commons/hash/MurmurHash2.java">Austin Appleby&#8217;s MurmurHash 2.0 algorithm</a> , a fast, non-cryptographic hash that exhibits excellent distribution, collision resistance and avalanche behavior.  The specific version of the algorithm used is the slightly slower, endian-neutral version that allows consistent behavior across both big- and little-endian CPU architectures.  Infinispan&#8217;s version also hard-codes the hash seed as -1. For details of the algorithm, please visit <a href="http://sites.google.com/site/murmurhash/">Austin Appleby&#8217;s MurmurHash 2.0 page</a>.
Other implementations are detailed on
<a href="http://en.wikipedia.org/wiki/MurmurHash">Wikipedia</a> .
This hash function was the default one used by the Hot Rod server until Infinispan 4.2.1.
Since Infinispan 5.0, the server never uses hash version 1.
Since Infinispan 9.0, the client ignores hash version 1.</p>
</li>
<li>
<p>Version 2 (single byte, 0x02) Since Infinispan 5.0, a new hash function is
used by default which is based on
<a href="https://github.com/infinispan/infinispan/blob/master/commons/src/main/java/org/infinispan/commons/hash/MurmurHash3.java">Austin Appleby&#8217;s MurmurHash 3.0 algorithm</a>.
Detailed information about the hash function can be found in this
<a href="http://code.google.com/p/smhasher/wiki/MurmurHash3">wiki</a>.
Compared to 2.0, it provides better performance and spread.
Since Infinispan 7.0, the server only uses version 2 for HotRod 1.x clients.</p>
</li>
<li>
<p>Version 3 (single byte, 0x03) Since Infinispan 7.0, a new hash function is used by default.
The function is still based on
<a href="http://code.google.com/p/smhasher/wiki/MurmurHash3">wiki</a>,
but is also aware of the hash segments used in the server&#8217;s
<a href="https://github.com/infinispan/infinispan/blob/master/core/src/main/java/org/infinispan/distribution/ch/ConsistentHash.java">ConsistentHash</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_admin_tasks"><a class="anchor" href="#hot_rod_admin_tasks"></a>1.16. Hot Rod Admin Tasks</h3>
<div class="paragraph">
<p>Admin operations are handled by the Exec operation with a set of well known tasks. Admin tasks are named according to the following rules:</p>
</div>
<div class="paragraph">
<p><code>@@context@name</code></p>
</div>
<div class="paragraph">
<p>All parameters are UTF-8 encoded strings.
Parameters are specific to each task, with the exception of the <strong>flags</strong> parameter which is common to all commands.
The <strong>flags</strong> parameter contains zero or more space-separated values which may affect the behaviour of the command.
The following table lists all currently available flags.</p>
</div>
<div class="paragraph">
<p>Admin tasks return the result of the operation represented as a JSON string.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. FLAGS</caption>
<colgroup>
<col style="width: 23.0769%;">
<col style="width: 76.9231%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Flag</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">permanent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requests that the command&#8217;s effect be made permanent into the server&#8217;s configuration. If the server cannot comply with the request, the entire operation will fail with an error</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="admin_tasks"><a class="anchor" href="#admin_tasks"></a>1.16.1. Admin tasks</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. @@cache@create</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 66.6666%;">
<col style="width: 13.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the cache to create.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the cache configuration template to use for the new cache.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the XML declaration of a cache configuration to use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the flags table above.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. @@cache@remove</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 66.6666%;">
<col style="width: 13.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the cache to remove.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the flags table above.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">@@cache@names</div>
<p>Returns the cache names as a JSON array of strings, e.g. ["cache1", "cache2"]</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 29. @@cache@reindex</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 66.6666%;">
<col style="width: 13.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the cache to reindex.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">flags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See the flags table above.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No, all flags will be ignored</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="hot_rod_protocol_3_0"><a class="anchor" href="#hot_rod_protocol_3_0"></a>1.17. Hot Rod Protocol 3.0</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Infinispan versions</div>
This version of the protocol is implemented since Infinispan 10.0
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Automatic protocol selection</div>
<p>This version introduces changes to the <code>ping</code> operation which returns some additional information when called with
a protocol version of 30 or higher. This allows the server to tell the client the highest supported protocol version as
well as a list of supported operations. After obtaining the response from the server, the client should use the highest
possible version understood by the server for all subsequent requests.</p>
</div>
<div class="paragraph">
<div class="title">Expiration</div>
<p>Expiration values larger than the number of milliseconds in 30 days are no longer treated as Unix time and are interpreted literally.</p>
</div>
<div class="paragraph">
<div class="title">ping</div>
<p>Request (0x17):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request header</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">ping</div>
<p>Response (0x18):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field Name</th>
<th class="tableblock halign-center valign-top">Size</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">variable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response header</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response status</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00 = success, if no errors<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key Type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media Type of the key stored in the server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value Type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">MediaType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Media Type of the value stored in the server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot Rod server version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">opCount</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">vInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of supported operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">opRequestCode1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request opcode of the first operation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">opRequestCodeN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request opcode of the nth operation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A new flag has been added:</p>
</div>
<div class="paragraph">
<p>0x0020  = used when an operation wants to skip notifications to the registered listeners</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-05-03 12:31:45 -0400
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains('stemblock')) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-8601422-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>