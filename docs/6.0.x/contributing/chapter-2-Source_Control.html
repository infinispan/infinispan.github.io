<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="generator" content="Asciidoctor 0.1.4"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Source Control</title> <style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style> <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css"> <style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style> </head> <body class="book"> <div id="header"> </div> <div id="content"> <div class="sect1"> <h2 id="_source_control"><a class="anchor" href="#_source_control"></a>1. Source Control</h2> <div class="sectionbody"> <div class="paragraph"> <p>In this chapter we discuss how to interact with Infinispan&#8217;s source control repository.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> As a convention, <em>upstream</em> is used as the name of the <a href="http://github.com/infinispan/infinispan">http://github.com/infinispan/infinispan</a> repository. This repository is the canonical repository for Infinispan. We usually name <em>origin</em> the fork on <a href="https://github.com">GitHub</a> of each contributor. So the exact meaning of <em>origin</em> is relative to the developer: you could think of <em>origin</em> as your own fork. </td> </tr> </table> </div> <div class="sect2"> <h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>1.1. Prerequisites</h3> <div class="paragraph"> <p>This document assumes some working knowledge of git. We recommend Scott Chacon&#8217;s excellent <a href="http://progit.org/">Pro Git</a> as a valuable piece of background reading. The book is released under the Creative Commons license and can be downloaded in electronic form for free. At very least, we recommend that you read <a href="http://progit.org/book/ch2-0.html">Chapter 2</a>, <a href="http://progit.org/book/ch3-0.html">Chapter 3</a> and <a href="http://progit.org/book/ch5-0.html">Chapter 5</a> of <em>Pro Git</em> before proceeding.</p> </div> </div> <div class="sect2"> <h3 id="_repositories"><a class="anchor" href="#_repositories"></a>1.2. Repositories</h3> <div class="paragraph"> <p>Infinispan uses <a href="http://github.com/infinispan/infinispan">http://github.com/infinispan/infinispan</a> as its canonical repository, and this repository contains the stable code on master as well as the maintenance branches for previous minor versions (e.g., 5.0.x, 4.2.x, 4.1.x, etc)</p> </div> <div class="paragraph"> <p>Typically, only <em>Project Admins</em> would be able to push to this repository while all else may clone or fork the repository.</p> </div> </div> <div class="sect2"> <h3 id="_roles"><a class="anchor" href="#_roles"></a>1.3. Roles</h3> <div class="paragraph"> <p>The project assumes one of 2 <em>roles</em> an individual may assume when interacting with the Infinispan codebase. The 2 roles here are:</p> </div> <div class="ulist"> <div class="title">Roles</div> <ul> <li> <p><em>Contributor</em></p> </li> <li> <p><em>Project Admin</em> (typically, no more than a small handful of people)</p> </li> </ul> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> None of the roles assume that you are a Red Hat employee. All it assumes is how much responsibility over the project has been granted to you. Typically, someone may be in more than one role at any given time, and puts on a different "hats" based on the task at hand. </td> </tr> </table> </div> <div class="sect3"> <h4 id="_contributor"><a class="anchor" href="#_contributor"></a>1.3.1. Contributor</h4> <div class="paragraph"> <p>A contributor will only ever submit patches via GitHub&#8217;s <em>pull request</em> mechanism.</p> </div> <div class="paragraph"> <p>Contributors should <em>always</em> fork the upstream project on GitHub and work off a clone of this fork.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> All Infinispan core developers are considered contributors and work off personal forks of the upstream repository. This allows for complex features to be developed in parallel without tripping up over one another. This process is certainly not restricted to just Infinispan core developers; any contributor should also participate in this manner. </td> </tr> </table> </div> <div class="sect4"> <h5 id="_creating_a_pull_request_on_github"><a class="anchor" href="#_creating_a_pull_request_on_github"></a>Creating a pull request on GitHub</h5> <div class="imageblock"> <div class="content"> <img src="images/git_wf_2.png" alt="git wf 2"> </div> </div> <div class="paragraph"> <p>In this workflow, the contributor forks the Infinispan upstream repository on GitHub, clones their fork, and makes changes to this private fork. When changes have been tested and are ready to be contributed back to the project, a <em>pull request</em> is issued via GitHub so that one of the <em>Project Administrators</em> can pull in the change.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> <div class="title">Topic Branches</div> It is desirable to work off a <em>topic branch</em>, even when using your own, forked repository. A topic branch is created for every feature or bug fix you do. Typically you would create one topic branch per issue, but if several patches are related it&#8217;s acceptable to have several commits in the same branch; however different changes should always be identified by different commits.  </td> </tr> </table> </div> <div class="paragraph"> <p>Before you push your work onto your fork of the repository on GitHub (your <em>origin</em>), it is often a good idea to review your commits. Consolidating them (squashing) or breaking them up as necessary and cleaning up commit messages should all be done while still working off your local clone. Also, prior to issuing a pull request, you should make sure you rebase your branch against the upstream branch you expect it to be merged into.  Also, only submit pull requests for your topic branch - not for your master!</p> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> The section on <em>Public Small Project</em> in <a href="http://progit.org/book/ch5-2.html">Chapter 5, Section 2</a> of Pro Git has more information on this style of workflow. </td> </tr> </table> </div> <div class="sect5"> <h6 id="_a_worked_example"><a class="anchor" href="#_a_worked_example"></a>A worked example</h6> <div class="olist arabic"> <ol class="arabic"> <li> <p>Make sure your master is synced up with upstream. See <a href="#link_ifyouhaveforkedupstream">this section</a> for how to do this</p> </li> <li> <p>Create new branch for your topic and switch to it. For the example issue, ISPN-1234:</p> <div class="literalblock"> <div class="content"> <pre>git checkout -b t_ISPN-12345 master</pre> </div> </div> </li> <li> <p>Do your work. Test. Repeat</p> </li> <li> <p>Commit your work on your topic branch</p> </li> <li> <p>Push your topic branch to GitHub. For example:</p> <div class="literalblock"> <div class="content"> <pre>git push origin t_ISPN-12345</pre> </div> </div> </li> <li> <p>Issue a pull request using the <a href="http://help.github.com/send-pull-requests/">GitHub pull request system</a></p> </li> <li> <p>Once your pull request has been applied upstream, delete the topic branch both locally and on your fork. For example:</p> <div class="literalblock"> <div class="content"> <pre>git branch -d t_ISPN-12345 &amp;&amp; git push origin :t_ISPN-12345</pre> </div> </div> </li> <li> <p>Sync with upstream again so that your changes now appear in your master branch</p> </li> </ol> </div> <div class="paragraph"> <p>If your topic branch has been open for a while and you are afraid changes upstream may clash with your changes, it makes sense to rebase your topic branch before you issue a pull request. To do this:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Sync your master branch with upstream</p> <div class="literalblock"> <div class="content"> <pre>git checkout master
git pull upstream master</pre> </div> </div> </li> <li> <p>Switch to your topic branch. For example:</p> <div class="literalblock"> <div class="content"> <pre>git checkout t_ISPN-12345</pre> </div> </div> </li> <li> <p>Rebase your topic branch against master:</p> <div class="literalblock"> <div class="content"> <pre>git rebase master</pre> </div> </div> </li> <li> <p>During the rebase process you might need to fix conflicts</p> </li> <li> <p>When you&#8217;re done test your code again.</p> </li> <li> <p>Push your rebased topic branch to your repo on GitHub (you will likely need to force this with the -f option).</p> <div class="literalblock"> <div class="content"> <pre>git push -f origin ISPN-12345</pre> </div> </div> </li> <li> <p>Continue your work on your topic branch.</p> </li> </ol> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> If you are sharing your forked Infinispan repo with others, then do not rebase! Use a merge instead. </td> </tr> </table> </div> </div> </div> <div class="sect4"> <h5 id="_multi_step_coordination_between_developers_using_forked_repositories"><a class="anchor" href="#_multi_step_coordination_between_developers_using_forked_repositories"></a>Multi-step coordination between developers using forked repositories</h5> <div class="paragraph"> <p>Sometimes a feature/task is rather complex to implement and requires competence from multiple areas of the projects. In such occasions it is not uncommon for developers to coordinate feature implementation using personal forks of Infinispan prior to finally issuing request to integrate into Infinispan main repository on GitHub.</p> </div> <div class="paragraph"> <p>For example, developer A using his personal Infinispan fork creates a topic branch T and completes as much work as he/she can before requesting for assistance from developer B. Developer A pushes topic T to his personal Infinispan fork where developer B picks it up and brings it down to his local repo. Developer B then in turn completes necessary work, commits his/her changes on branch T, and finally pushes back T to his own personal fork. After issuing request for pull to developer A, developer B waits for notification that developer A integrated his changes. This exchange can be repeated as much as it is necessary and can involve multiple developers.</p> </div> <div class="sect5"> <h6 id="_a_worked_example_2"><a class="anchor" href="#_a_worked_example_2"></a>A worked example</h6> <div class="paragraph"> <p>This example assumes that developer A and B have added each others Infinispan forked repositories with the <code>git add remote</code> command. For example, developer B would add developer A&#8217;s personal Infinispan fork repository with the command</p> </div> <div class="literalblock"> <div class="content"> <pre>git remote add devA https://github.com/developerA/infinispan.git</pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Developer A starts implementing feature ISPN-244 and works on a local topic branch <code>t_ISPN244</code>. Developer A pushes <code>t_ISPN244</code> to personal Infinispan fork. For example:</p> <div class="literalblock"> <div class="content"> <pre>git push origin t_ISPN244</pre> </div> </div> </li> <li> <p>Developer B fetches branch <code>t_ISPN244</code> to local repository. For example:</p> <div class="literalblock"> <div class="content"> <pre>git fetch devA t_ispn244:my_t_ispn244</pre> </div> </div> </li> <li> <p>Developer B works on local branch <code>my_t_ispn244</code></p> </li> <li> <p>Developer B commits changes, pushes <code>my_t_ispn244</code> to own fork.</p> <div class="literalblock"> <div class="content"> <pre>git push origin my_t_ispn244</pre> </div> </div> </li> <li> <p>Developer B sends pull request to developer A to integrate changes from <code>my_t_ispn244</code> to <code>t_ispn244</code></p> </li> </ol> </div> </div> </div> </div> <div class="sect3"> <h4 id="_project_admin"><a class="anchor" href="#_project_admin"></a>1.3.2. Project Admin</h4> <div class="paragraph"> <p>Project Admins have a very limited role. Only Project Admins are allowed to push to upstream, and Project Admins <em>never</em> write any code directly on the upstream repository. All Project Admins do is pull in and merge changes from contributors (even if the "contributor" happens to be themselves) into upstream, perform code reviews and either commit or reject such changes.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="icon-note" title="Note"></i> </td> <td class="content"> All Contributors who are also Project Admins are encouraged to not merge their own changes, to ensure that all changes are reviewed by someone else. </td> </tr> </table> </div> <div class="paragraph"> <p>This approach ensures Infinispan maintains quality on the main code source tree, and allows for important code reviews to take place again ensuring quality. Further, it ensures clean and easily traceable code history and makes sure that more than one person knows about the changes being performed.</p> </div> <div class="sect4"> <h5 id="_handling_pull_requests"><a class="anchor" href="#_handling_pull_requests"></a>Handling pull requests</h5> <div class="imageblock"> <div class="content"> <img src="images/git_wf_3.png" alt="git wf 3"> </div> </div> <div class="paragraph"> <p>Project Admins are also responsible for responding to pull requests. When pulling in changes from a forked repository, more than a single commit may be pulled in. Again, this should be done on a newly created working branch, code reviewed, tested and cleaned up as necessary.</p> </div> <div class="paragraph"> <p>If commits need to be altered - e.g., rebasing to squash or split commits, or to alter commit messages - it is often better to contact the Contributor and ask the Contributor to do so and re-issue the pull request, since doing so on the upstream repo could cause update issues for other contributors later on. If commits were altered or three-way merge was performed during a merge instead of fast-forward, it&#8217;s also a good idea to check the log to make sure that the resulting repository history looks OK:</p> </div> <div class="listingblock"> <div class="content"> <pre>
$ git log --pretty=oneline --graph --abbrev-commit  # History messed up due to a bad merge
*   3005020 Merge branch 'ISPN-786' of git://github.com/Sanne/infinispan
|\ 
| * e757265 ISPN-786 Make dependency to log4j optional  &lt;-- Same with cb4e5d6 - unnecessary
* | cb4e5d6 ISPN-786 Make dependency to log4j optional  &lt;-- Cherry-picked commit by other admin
|/
* ...

$ git reset cb4e5d6  # revert the bad merge
</pre> </div> </div> <div class="paragraph"> <p>It is therefore <em>strongly recommended</em> that you use the <a href="https://github.com/maniksurtani/githelpers/blob/master/project_admins/handle_pull_request"><code>handle_pull_request</code></a> script that ensures a clean merge. If you <em>still</em> wish to do this manually, please consider reading through the script first to get an idea of what needs to happen.</p> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> More information on pulling changes from remote, forked repos can be found in <a href="http://progit.org/book/ch5-3.html">Chapter 5, Section 3</a> of Pro Git, under <em>Checking Out Remote Branches</em> . </td> </tr> </table> </div> <div class="sect5"> <h6 id="_possible_trouble_handling_pull_requests"><a class="anchor" href="#_possible_trouble_handling_pull_requests"></a>Possible trouble handling pull requests</h6> <div class="olist arabic"> <ol class="arabic"> <li> <p>If you have warnings about "Merge made by recursive" you have to fix it rebasing.</p> </li> <li> <p>If you have warnings about "non-fast-forward" you have to rebase.</p> </li> <li> <p>If you see "non-fast-forward updates were rejected" you <strong>must never</strong> use <code>--force</code> on upstream! It means that another patch was merged before you and you have to update your master again, and rebase again.</p> </li> <li> <p><code>--force</code> is allowed only in special maintenance circumstances. If you find you&#8217;re needing it to handle a pull request, then you&#8217;re doing it wrong, and the mistake might be a dangerous one! It&#8217;s like the good rule of never commit when you&#8217;re drunk (drunk coding, however, is allowed).</p> </li> </ol> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="icon-warning" title="Warning"></i> </td> <td class="content"> <div class="title">Never use <code>--force</code> on <code>git push</code></div> Using <code>--force</code> while pushing on a shared repository such as <em>upstream</em> you could effectively erase other committed patches. No one should ever use this option unless unanimously approved on the public mailing list: the most dangerous aspect of it is that nobody gets any notification if this happens, and we might think issues are solved but you silently removed the fix and it&#8217;s history from the repository. </td> </tr> </table> </div> </div> </div> <div class="sect4"> <h5 id="_cutting_releases"><a class="anchor" href="#_cutting_releases"></a>Cutting releases</h5> <div class="paragraph"> <p>Releases can only be cut by Project Admins, and must be done off a recently updated (<code>git fetch</code> and <code>git pull origin</code>) clone of the upstream repo. Infinispan&#8217;s <code>bin/release.py</code> script takes care of the rest.</p> </div> </div> </div> <div class="sect3"> <h4 id="_release_branches"><a class="anchor" href="#_release_branches"></a>1.3.3. Release branches</h4> <div class="paragraph"> <p>Infinispan has several main release branches. These are master (ongoing work on the current unstable release), and maintenance branches for previous minor releases (e.g., <code>5.0.x</code>, <code>4.2.x</code>, <code>4.1.x</code>). Work should never be committed directly to any of these release branches directly; topic branches should always be used for work, and these topic branches should be merged in using the process outlined above.</p> </div> </div> <div class="sect3"> <h4 id="_topic_branches"><a class="anchor" href="#_topic_branches"></a>1.3.4. Topic branches</h4> <div class="paragraph"> <p>Some of the biggest features of git are speed and efficiency of branching, and accuracy of merging. As a result, best practices involve making frequent use of branches. Creating several topic branches a day, even, should not be considered excessive, and working on several topic branches simultaneously again should be commonplace.</p> </div> <div class="paragraph"> <p><a href="http://progit.org/book/ch3-4.html">Chapter 3, Section 4</a> of Pro Git has a detailed discussion of topic branches. For Infinispan, it makes sense to create a topic branch and name it after the JIRA it corresponds to. (if it doesn&#8217;t correspond to a JIRA, a simple but descriptive name should be used).</p> </div> <div class="sect4"> <h5 id="_topic_branches_affecting_more_than_one_release_branch"><a class="anchor" href="#_topic_branches_affecting_more_than_one_release_branch"></a>Topic Branches Affecting More Than One Release Branch</h5> <div class="paragraph"> <p>Most topic branches will only affect a single release branch, e.g. features targeted at the current unstable release will only affect the master release branch. So a topic branch should be created based off master. However, occasionally, fixes may apply to both release branches 4.2.x as well as master. In this case, the following workflow should apply:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Create topic branch off 4.2.x. For example:</p> <div class="literalblock"> <div class="content"> <pre>git checkout -b &lt;topic&gt;_4.2.x 4.2.x</pre> </div> </div> </li> <li> <p>Create topic branch off master. For example:</p> <div class="literalblock"> <div class="content"> <pre>git checkout -b &lt;topic&gt;_master master</pre> </div> </div> </li> <li> <p>Do your work on <code>&lt;topic&gt;_master</code>, test and commit your fixes</p> </li> <li> <p>Switch to <code>&lt;topic&gt;_4.2.x</code>. For example:</p> <div class="literalblock"> <div class="content"> <pre>git checkout &lt;topic&gt;_4.2.x</pre> </div> </div> </li> <li> <p>Cherry-pick your commit from <code>&lt;topic&gt;_master</code> onto <code>&lt;topic&gt;_4.2.x</code>. For example:</p> <div class="literalblock"> <div class="content"> <pre>git cherry-pick &lt;commit_id&gt;</pre> </div> </div> </li> <li> <p>Test <code>&lt;topic&gt;_4.2.x</code> for correctness, modify as necessary</p> </li> <li> <p>Issue two separate pull requests for both branches</p> </li> </ol> </div> </div> </div> <div class="sect3"> <h4 id="_comments"><a class="anchor" href="#_comments"></a>1.3.5. Comments</h4> <div class="paragraph"> <p>It is <em>extremely important</em> that comments for each commit are clear and follow certain conventions. This allows for proper parsing of logs by git tools. Read <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">this article</a> on how to format comments for git and adhere to them. Further to the recommendations in the article, the short summary of the commit message should be in the following format:</p> </div> <div class="literalblock"> <div class="content"> <pre>ISPN-XXX Subject line of the JIRA in question</pre> </div> </div> <div class="paragraph"> <p>This can optionally be followed by a detailed explanation of the commit. Why it was done, how much of it was completed, etc. You may wish to express this as a list, for example:</p> </div> <div class="ulist"> <ul> <li> <p>Add a unit test</p> </li> <li> <p>Add more unit tests</p> </li> <li> <p>Fix regressions</p> </li> <li> <p>Solve major NP-Complete problems</p> </li> </ul> </div> <div class="paragraph"> <p>Make sure however to split separate concerns - especially if they are unrelated - in separate commits.</p> </div> </div> <div class="sect3"> <h4 id="_commits"><a class="anchor" href="#_commits"></a>1.3.6. Commits</h4> <div class="paragraph"> <p>Sometimes work on your topic branch may include several commits. For example, committing a test. Then committing another test. Then perhaps committing a fix. And perhaps fixing your own fix in the next commit&#8230; Before issuing a pull request for this topic branch, consider cleaning up these commits. Interactive rebasing helps you squash several commits into a single commit, which is often more coherent to deal with for others merging in your work. <a href="http://progit.org/book/ch6-4.html">Chapter 6, Section 4</a> of Pro Git has details on how to squash commits and generally, clean up a series of commits before sharing this work with others. Note that you can also easily reorder them, just change the order of lines during the interactive rebase process.</p> </div> <div class="paragraph"> <p>Also, it is important to make sure you don&#8217;t accidentally commit files for which no real changes have happened, but rather, whitespace has been modified. This often happens with some IDEs. <code>git diff --check</code> should be run before you issue such a pull request, which will check for such "noise" commits and warn you accordingly. Such files should be reverted and not be committed to the branch.</p> </div> <div class="paragraph"> <p>Adhering to <a href="chapter-1-The_Basics.html#_style_requirements">Infinispan&#8217;s code style</a> guidelines will help minimise "noise" commits. Project Admins are going to ask contributors to reformat their code if necessary.</p> </div> </div> </div> <div class="sect2"> <h3 id="_keeping_your_repo_in_sync_with_upstream"><a class="anchor" href="#_keeping_your_repo_in_sync_with_upstream"></a>1.4. Keeping your repo in sync with upstream</h3> <div class="sect3"> <h4 id="_if_you_have_cloned_upstream"><a class="anchor" href="#_if_you_have_cloned_upstream"></a>1.4.1. If you have cloned upstream</h4> <div class="paragraph"> <p>If you have a clone of the upstream, you may want to update it from time to time. Running:</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git fetch origin
$ git fetch origin --tags</pre> </div> </div> <div class="paragraph"> <p>will often do the trick. You could then pull the specific branches you would need to update:</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git checkout master
$ git pull origin master
$ git checkout 4.2.x
$ git pull origin 4.2.x</pre> </div> </div> <div class="sect4"> <h5 id="_updating_topic_branches"><a class="anchor" href="#_updating_topic_branches"></a>Updating topic branches</h5> <div class="paragraph"> <p>You should rebase your topic branches at this point so that they are up-to-date and when pulled by upstream, upstream can fast-forward the release branches:</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git checkout &lt;topic&gt;_master
$ git rebase master</pre> </div> </div> <div class="paragraph"> <p>and/or</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git checkout topic_4.2.x
$ git rebase 4.2.x</pre> </div> </div> </div> </div> <div class="sect3"> <h4 id="link_ifyouhaveforkedupstream"><a class="anchor" href="#link_ifyouhaveforkedupstream"></a>1.4.2. If you have forked upstream</h4> <div class="paragraph"> <p>If you have a fork of upstream, you should probably define upstream as one of your remotes:</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git remote add upstream git://github.com/infinispan/infinispan.git</pre> </div> </div> <div class="paragraph"> <p>You should now be able to fetch and pull changes from upstream into your local repository, though you should make sure you have no uncommitted changes. (You <em>do</em> use topic branches, right?)</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git fetch upstream
$ git fetch upstream --tags
$ git checkout master
$ git pull upstream master
$ git push origin master
$ git checkout 4.2.x
$ git pull upstream 4.2.x
$ git push origin 4.2.x</pre> </div> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> A script can do this for you - have a look at <a href="https://github.com/maniksurtani/githelpers/blob/master/contributors/sync_with_upstream"><code>sync_with_upstream</code></a> . </td> </tr> </table> </div> <div class="sect4"> <h5 id="_updating_topic_branches_2"><a class="anchor" href="#_updating_topic_branches_2"></a>Updating topic branches</h5> <div class="paragraph"> <p>Again, you should rebase your topic branches at this point so that they are up-to-date and when pulled by upstream, upstream can fast-forward the release branches:</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git checkout topic_master
$ git rebase master</pre> </div> </div> <div class="paragraph"> <p>and/or</p> </div> <div class="literalblock"> <div class="content"> <pre>$ git checkout topic_4.2.x
$ git rebase 4.2.x</pre> </div> </div> <div class="paragraph"> <p>The <code>sync_with_upstream</code> script can do this for you if your topic branch naming conventions match the script.</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="_tips_on_enhancing_git"><a class="anchor" href="#_tips_on_enhancing_git"></a>1.5. Tips on enhancing git</h3> <div class="sect3"> <h4 id="_completions"><a class="anchor" href="#_completions"></a>1.5.1. Completions</h4> <div class="paragraph"> <p>Save <a href="http://git.kernel.org/?p=git/git.git;a=blob_plain;f=contrib/completion/git-completion.bash;h=168669bbf79cb33c527a688fb906e276beadaf79;hb=HEAD">this script</a> as <code>~/.git-completion.bash</code> and in <code>~/.bash_profile</code>, add the following on one line:</p> </div> <div class="literalblock"> <div class="content"> <pre>source ~/.git-completion.bash</pre> </div> </div> <div class="paragraph"> <p>After logging out and back in again, typing <code>git</code> followed by <kbd>TAB</kbd> will give you a list of git commands, as would <code>git c</code> followed by <kbd>TAB</kbd>, etc. This even works for options, e.g. <code>git commit --</code> followed by <kbd>TAB</kbd>. The completions are even aware of your refs, so even <code>git checkout my_br</code> followed by <kbd>TAB</kbd> will complete to <code>git checkout my_branch</code>!</p> </div> <div class="admonitionblock tip"> <table> <tr> <td class="icon"> <i class="icon-tip" title="Tip"></i> </td> <td class="content"> You get git autocompletion for free if you use <a href="http://zsh.sourceforge.net/">zsh</a> instead of bash. </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="sid-68355157_ContributingtoInfinispan-Terminalcolours"><a class="anchor" href="#sid-68355157_ContributingtoInfinispan-Terminalcolours"></a>1.5.2. Terminal colors</h4> <div class="paragraph"> <p>Add the following to your <code>~/.gitconfig</code></p> </div> <div class="listingblock"> <div class="title">~/.gitconfig</div> <div class="content"> <pre>  [color]
    ui = yes
  [color "branch"]
   current = yellow reverse
   local = yellow
   remote = green
  [color "diff"]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold
  [color "status"]
    added = yellow
    changed = green
    untracked = cyan</pre> </div> </div> </div> <div class="sect3"> <h4 id="_aliases"><a class="anchor" href="#_aliases"></a>1.5.3. Aliases</h4> <div class="paragraph"> <p>Some git commands are pretty long to type, especially with various switches. Aliases help you to map shortcuts to more complex commands. Again, For example, add the following to <code>~/.gitconfig</code>:</p> </div> <div class="listingblock"> <div class="title">~/.gitconfig</div> <div class="content"> <pre>[alias]
     co = checkout
     undo = reset --hard
     cb = checkout -b
     br = branch
     cp = cherry-pick
     st = status
     l = log --pretty=oneline --decorate --abbrev-commit
     lg = log --decorate --abbrev-commit
     last = log --decorate -1 -p --abbrev-commit
     ci = commit -a
     pom = push origin master
     graph = log --pretty=oneline --graph --abbrev-commit
     dt = difftool</pre> </div> </div> </div> <div class="sect3"> <h4 id="_visual_history"><a class="anchor" href="#_visual_history"></a>1.5.4. Visual History</h4> <div class="paragraph"> <p>Git ships with gitk, a GUI that visually represents a log. If you use Mac OS X, <a href="http://gitx.frim.nl/">GitX</a> is a good alternative. Try typing gitk or gitx in a git project directory. For Linux users, there are lots of alternatives: <em>gitk</em> , <em>gitg</em> , <em>giggle</em>, &#8230; up to <em>egit</em> for Eclipse.</p> </div> </div> <div class="sect3"> <h4 id="_visual_diff_and_merge_tools"><a class="anchor" href="#_visual_diff_and_merge_tools"></a>1.5.5. Visual diff and merge tools</h4> <div class="paragraph"> <p>There are several options available, including <a href="http://kdiff3.sourceforge.net/">KDiff3</a>, <a href="http://meld.sourceforge.net/">meld</a> and Perforce&#8217;s <a href="http://www.perforce.com/perforce/products/merge.html">P4Merge</a> which are all either open source or available for free. See <a href="http://progit.org/book/ch7-1.html">this link</a> on setting these up (section under <em>External Merge and Diff Tools</em>)</p> </div> </div> <div class="sect3"> <h4 id="_choosing_an_editor"><a class="anchor" href="#_choosing_an_editor"></a>1.5.6. Choosing an Editor</h4> <div class="paragraph"> <p>You can customise the editor used by git editing <code>~/.gitconfig</code>. The following fires up <a href="http://code.google.com/p/macvim/">MacVIM</a> instead of the default vi editor:</p> </div> <div class="listingblock"> <div class="title">~/.gitconfig</div> <div class="content"> <pre>[core]
     editor = mvim -f</pre> </div> </div> <div class="paragraph"> <p>Alternatively, you could fire up TextMate or another editors of your choice.</p> </div> </div> <div class="sect3"> <h4 id="_shell_prompt"><a class="anchor" href="#_shell_prompt"></a>1.5.7. Shell prompt</h4> <div class="paragraph"> <p>You can change your bash shell prompt to print the current repository&#8217;s branch name. Add the following to your <code>~/.bashrc</code></p> </div> <div class="listingblock"> <div class="title">~/.bashrc</div> <div class="content"> <pre>function git_current_branch {
  git branch --no-color 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/[\1]/'
}

if [ "$PS1" ]; then
  PS1='[\u@\h:\W]$(git_current_branch)\$ '
fi</pre> </div> </div> <div class="paragraph"> <p>The resulting shell prompt will look like:</p> </div> <div class="literalblock"> <div class="content"> <pre>trustin@matrix:infinispan-4.2][4.2.x]$</pre> </div> </div> <div class="paragraph"> <p>If you&#8217;re a zsh user, you can get even more interesting branch information thanks to <a href="http://sebastiancelis.com/2009/nov/16/zsh-prompt-git-users/">this blog post</a> , such as:</p> </div> <div class="ulist"> <ul> <li> <p>whether your branch is dirty (<em>X</em>)</p> </li> <li> <p>whether it&#8217;s ahead of the remote(↑)</p> </li> <li> <p>whether it diverges with the remote (↕)</p> </li> <li> <p>whether it&#8217;s behind (↓)</p> </li> </ul> </div> <div class="paragraph"> <p>For example, the following prompt indicates that the current branch is <em>t_ispn775_master</em> and that it is behind remote:</p> </div> <div class="literalblock"> <div class="content"> <pre>[~/Go/code/infinispan.git]% (t_ispn775_master ↓)</pre> </div> </div> </div> </div> </div> </div> </div> <div id="footer"> <div id="footer-text"> Last updated 2013-11-19 15:05:51 UTC </div> </div> </body> </html>