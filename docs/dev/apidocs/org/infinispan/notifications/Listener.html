<!DOCTYPE HTML>
<html lang>
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GPD7V946LB');
</script>
<!-- Generated by javadoc (24) -->
<title>Listener (Infinispan 16.0 JavaDoc)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.infinispan.notifications, annotation type: Listener">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Listener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../search.html">Search</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Infinispan 16.0.0.Dev02</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.infinispan.notifications</a></li>
<li><a href="Listener.html" class="current-selection">Listener</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;
<input type="text" class="filter-input" disabled placeholder="Filter" aria-label="Filter table of contents" autocomplete="off">
<input type="reset" class="reset-filter" disabled value="Reset">
</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#delivery-semantics-heading" tabindex="0">Delivery Semantics</a></li>
<li><a href="#transactional-semantics-heading" tabindex="0">Transactional Semantics</a></li>
<li><a href="#listener-modes-heading" tabindex="0">Listener Modes</a></li>
<li><a href="#locking-semantics-heading" tabindex="0">Locking semantics</a></li>
<li><a href="#threading-semantics-heading" tabindex="0">Threading Semantics</a></li>
<li><a href="#notification-pool-heading" tabindex="0">Notification Pool</a></li>
<li><a href="#clustered-listeners-heading" tabindex="0">Clustered Listeners</a></li>
<li><a href="#summary-of-notification-annotations-heading" tabindex="0">Summary of Notification Annotations</a></li>
<li><a href="#example-1---method-receiving-a-single-event-sync-heading" tabindex="0">Example 1 - Method receiving a single event, sync</a></li>
<li><a href="#example-2---method-receiving-multiple-events---sync-heading" tabindex="0">Example 2 - Method receiving multiple events - sync</a></li>
<li><a href="#example-3---multiple-methods-receiving-the-same-event---async-heading" tabindex="0">Example 3 - Multiple methods receiving the same event - async</a></li>
<li><a href="#example-4---processing-only-events-with-a-committed-transaction---sync-non-blocking-heading" tabindex="0">Example 4 - Processing only events with a committed transaction - sync/non-blocking</a></li>
</ol>
</li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#sync()" tabindex="0">sync</a></li>
<li><a href="#primaryOnly()" tabindex="0">primaryOnly</a></li>
<li><a href="#clustered()" tabindex="0">clustered</a></li>
<li><a href="#includeCurrentState()" tabindex="0">includeCurrentState</a></li>
<li><a href="#observation()" tabindex="0">observation</a></li>
</ol>
</li>
</ol>
</nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface Listener" class="title">Annotation Interface Listener</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">Listener</span></div>
<div class="block">Class-level annotation used to annotate an object as being a valid cache listener.  Used with the <a href="Listenable.html#addListener(java.lang.Object)"><code>Listenable.addListener(Object)</code></a> and related APIs.

  Note that even if a class is annotated with this
 annotation, it still needs method-level annotation (such as <a href="cachemanagerlistener/annotation/CacheStarted.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>CacheStarted</code></a>)
 to actually receive notifications.
  Objects annotated with this annotation - listeners - can be attached to a
 running <a href="../Cache.html" title="interface in org.infinispan"><code>Cache</code></a> so users can be notified of <a href="../Cache.html" title="interface in org.infinispan"><code>Cache</code></a> events.
   There can be multiple methods that are annotated to receive the same event, and a method may receive
 multiple events by using a super type.

 <h2 id="delivery-semantics-heading">Delivery Semantics</h2>
 An event is delivered immediately after the respective
 operation, sometimes before as well, but must complete before the underlying cache call returns. For this reason it
 is important to keep listener processing
 logic short-lived. If a long-running task needs to be performed, it's recommended to invoke this in a non blocking
 way or to use an async listener.

 <h2 id="transactional-semantics-heading">Transactional Semantics</h2>
 Since the event is delivered during the actual cache call, the transactional
 outcome is not yet known. For this reason, <i>events are always delivered, even if the changes they represent are
 discarded by their containing transaction</i>. For applications that must only process events that represent changes
 in a completed transaction, <a href="cachelistener/event/TransactionalEvent.html#getGlobalTransaction()"><code>TransactionalEvent.getGlobalTransaction()</code></a>
 can be used, along with <a href="cachelistener/event/TransactionCompletedEvent.html#isTransactionSuccessful()"><code>TransactionCompletedEvent.isTransactionSuccessful()</code></a>
 to record events and later process them once the transaction has been successfully committed. Example 4 demonstrates
 this.

 <h2 id="listener-modes-heading">Listener Modes</h2>
 A listener can be configured to run in two different modes: sync or async.
 <p>The first, non-blocking, is a mode where the listener is notified in the invoking thread. Operations in this mode
 should be used when either the listener operation is expected to complete extremely fast or when the operation can be
 performed in a non-blocking manner by returning a CompletionStage to delay
 the operation until the stage is complete. This mode is the default mode, overrided by the <a href="#sync()"><code>sync()</code></a>
 property. A method is non-blocking if it declares that it returns a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link"><code>CompletionStage</code></a> or
 one of its subtypes. Note that the stage may return a value, but it will be ignored. The user <b>must</b> be very
 careful that no blocking or long-running operation is done while in a sync listener as it can cause thread
 starvation. You should instead use your own thread pool to execute the blocking or long-running operation and
 return a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html" title="class or interface in java.util.concurrent" class="external-link"><code>CompletionStage</code></a> signifying when it is complete.
 <p>The second, async, is pretty much identical to sync except that the original operation can continue and complete
 while the listener is notified in a different thread. Listeners that throw exceptions are always logged and are not
 propagated to the user. This mode is enabled when the listener has specified <code>sync</code> as <b>false</b> and
 the return value is always ignored.

 <h2 id="locking-semantics-heading">Locking semantics</h2>
 The sync mode will guarantee that listeners are notified for mutations on the same key sequentially, since
 the lock for the key will be held when notifying the listener. Async however can have events notified in any order
 so they should not be used when this ordering is required. If however the notification thread pool size is limited
 to one, this will provide ordering for async events, but the throughput of async events may be reduced.
 <p>Because the key lock is held for the entire execution of sync listeners (until the completion stage is done),
 sync listeners should be as short as possible.
 Acquiring additional locks is not recommended, as it could lead to deadlocks.

 <h2 id="threading-semantics-heading">Threading Semantics</h2>
 A listener implementation must be capable of handling concurrent
 invocations. Local sync notifications reuse the calling thread; remote sync notifications reuse the
 network thread. If a listener is async, it will be invoked in the notification thread pool.
 <h2 id="notification-pool-heading">Notification Pool</h2>
 Async events are made in a <i>separate</i> notification thread, which will not cause any blocking on the
 caller or network thread.  The separate thread for async listeners is taken from a pool, which can be
 configured using <a href="../configuration/global/GlobalConfiguration.html#listenerThreadPool()"><code>GlobalConfiguration.listenerThreadPool()</code></a>. The
 default values can be found in the <a href="../factories/KnownComponentNames.html" title="class in org.infinispan.factories"><code>KnownComponentNames</code></a> class.

 <h2 id="clustered-listeners-heading">Clustered Listeners</h2>
 Listeners by default are classified as a local listener. That is that they only receive events that are generated
 on the node to which they were registered. They also receive pre- and post-notification events. A clustered listener,
 configured with <code>clustered=true</code>, receives a subset of events but from any node that
 generated the given event, not just the one they were registered on. The events that a clustered listener can receive are:
 <a href="cachelistener/event/CacheEntryCreatedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryCreatedEvent</code></a>,
 <a href="cachelistener/event/CacheEntryModifiedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryModifiedEvent</code></a>,
 <a href="cachelistener/event/CacheEntryRemovedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryRemovedEvent</code></a> and
 <a href="cachelistener/event/CacheEntryExpiredEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryExpiredEvent</code></a>.
 For performance reasons, a clustered listener only receives post events.

 <h2 id="summary-of-notification-annotations-heading">Summary of Notification Annotations</h2>
 <table border="1">
    <caption>Summary of notification annotations</caption>
    <tr>
       <th>Annotation</th>
       <th>Event</th>
       <th>Description</th>
    </tr>
    <tr>
       <td><a href="cachemanagerlistener/annotation/CacheStarted.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>CacheStarted</code></a></td>
       <td><a href="cachemanagerlistener/event/CacheStartedEvent.html" title="interface in org.infinispan.notifications.cachemanagerlistener.event"><code>CacheStartedEvent</code></a></td>
       <td>A cache was started</td>
    </tr>
    <tr>
       <td><a href="cachemanagerlistener/annotation/CacheStopped.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>CacheStopped</code></a></td>
       <td><a href="cachemanagerlistener/event/CacheStoppedEvent.html" title="interface in org.infinispan.notifications.cachemanagerlistener.event"><code>CacheStoppedEvent</code></a></td>
       <td>A cache was stopped</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryModified.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryModified</code></a></td>
       <td><a href="cachelistener/event/CacheEntryModifiedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryModifiedEvent</code></a></td>
       <td>A cache entry was modified</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryCreated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryCreated</code></a></td>
       <td><a href="cachelistener/event/CacheEntryCreatedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryCreatedEvent</code></a></td>
       <td>A cache entry was created</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryRemoved.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryRemoved</code></a></td>
       <td><a href="cachelistener/event/CacheEntryRemovedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryRemovedEvent</code></a></td>
       <td>A cache entry was removed</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryExpired.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryExpired</code></a></td>
       <td><a href="cachelistener/event/CacheEntryExpiredEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryExpiredEvent</code></a></td>
       <td>A cache entry was expired</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryVisited.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryVisited</code></a></td>
       <td><a href="cachelistener/event/CacheEntryVisitedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryVisitedEvent</code></a></td>
       <td>A cache entry was visited</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryLoaded.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryLoaded</code></a></td>
       <td><a href="cachelistener/event/CacheEntryLoadedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryLoadedEvent</code></a></td>
       <td>A cache entry was loaded</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntriesEvicted.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntriesEvicted</code></a></td>
       <td><a href="cachelistener/event/CacheEntriesEvictedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntriesEvictedEvent</code></a></td>
       <td>A cache entries were evicted</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryActivated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryActivated</code></a></td>
       <td><a href="cachelistener/event/CacheEntryActivatedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryActivatedEvent</code></a></td>
       <td>A cache entry was activated</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryPassivated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryPassivated</code></a></td>
       <td><a href="cachelistener/event/CacheEntryPassivatedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryPassivatedEvent</code></a></td>
       <td>One or more cache entries were passivated</td>
    </tr>
    <tr>
       <td><a href="cachemanagerlistener/annotation/ViewChanged.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>ViewChanged</code></a></td>
       <td><a href="cachemanagerlistener/event/ViewChangedEvent.html" title="interface in org.infinispan.notifications.cachemanagerlistener.event"><code>ViewChangedEvent</code></a></td>
       <td>A view change event was detected</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/TransactionRegistered.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>TransactionRegistered</code></a></td>
       <td><a href="cachelistener/event/TransactionRegisteredEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>TransactionRegisteredEvent</code></a></td>
       <td>The cache has started to participate in a transaction</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/TransactionCompleted.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>TransactionCompleted</code></a></td>
       <td><a href="cachelistener/event/TransactionCompletedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>TransactionCompletedEvent</code></a></td>
       <td>The cache has completed its participation in a transaction</td>
    </tr>
    <tr>
       <td><a href="cachelistener/annotation/CacheEntryInvalidated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryInvalidated</code></a></td>
       <td><a href="cachelistener/event/CacheEntryInvalidatedEvent.html" title="interface in org.infinispan.notifications.cachelistener.event"><code>CacheEntryInvalidatedEvent</code></a></td>
       <td>A cache entry was invalidated by a remote cache.  Only if cache mode is INVALIDATION_SYNC or INVALIDATION_ASYNC.</td>
    </tr>
 </table>

 <h2 id="example-1---method-receiving-a-single-event-sync-heading">Example 1 - Method receiving a single event, sync</h2>
 <pre>
    &#064;Listener
    public class SingleEventListener
    {
       &#064;CacheStarted
       public CompletionStage&lt;Void&gt; doSomething(Event event)
       {
          System.out.println(&quot;Cache started.  Details = &quot; + event);
          return null;
       }
    }
 </pre>

 <h2 id="example-2---method-receiving-multiple-events---sync-heading">Example 2 - Method receiving multiple events - sync</h2>
 <pre>
    &#064;Listener
    public class MultipleEventListener
    {
       &#064;CacheStarted
       &#064;CacheStopped
       public void doSomething(Event event)
       {
          if (event.getType() == Event.Type.CACHE_STARTED)
             System.out.println(&quot;Cache started.  Details = &quot; + event);
          else if (event.getType() == Event.Type.CACHE_STOPPED)
             System.out.println(&quot;Cache stopped.  Details = &quot; + event);
       }
    }
 </pre>

 <h2 id="example-3---multiple-methods-receiving-the-same-event---async-heading">Example 3 - Multiple methods receiving the same event - async</h2>
 <pre>
    &#064;Listener(sync=false)
    public class SingleEventListener
    {
       &#064;CacheStarted
       public void handleStart(Event event)
       {
          System.out.println(&quot;Cache started&quot;);
       }
       &#064;CacheStarted
       &#064;CacheStopped
       &#064;CacheBlocked
       &#064;CacheUnblocked
       &#064;ViewChanged
       public void logEvent(Event event)
       {
          logSystem.logEvent(event.getType());
       }
    }
 </pre>

 <h2 id="example-4---processing-only-events-with-a-committed-transaction---sync-non-blocking-heading">Example 4 - Processing only events with a committed transaction - sync/non-blocking</h2>
 <pre>
    &#064;Listener
    public class EventHandler
    {
       private ConcurrentMap&lt;GlobalTransaction, Queue&lt;Event&gt;&gt; map = new ConcurrentHashMap&lt;GlobalTransaction, Queue&lt;Event&gt;&gt;();

       &#064;TransactionRegistered
       public CompletionStage&lt;Void&gt; startTransaction(TransactionRegisteredEvent event)
       {
          map.put(event.getGlobalTransaction(), new ConcurrentLinkedQueue&lt;Event&gt;());
          return null;
       }

       &#064;CacheEntryCreated
       &#064;CacheEntryModified
       &#064;CacheEntryRemoved
       public CompletionStage&lt;Void&gt; addEvent(TransactionalEvent event)
       {
          map.get(event.getGlobalTransaction()).add(event);'
          return null;
       }

       &#064;TransactionCompleted
       public CompletionStage&lt;Void&gt; endTransaction(TransactionCompletedEvent event)
       {
          Queue&lt;Event&gt; events = map.get(event.getGlobalTransaction());
          map.remove(event.getGlobalTransaction());

          System.out.println("Ended transaction " + event.getGlobalTransaction().getId());

          if(event.isTransactionSuccessful())
          {
             // Lets say we want to remotely log the events for the transaction - if this has an async or non blocking
             // API you can use that and not block the thread and wait until it returns to complete the Stage.
             CompletionStage&lt;Void&gt; stage = performRemoteEventUpdateNonBlocking(events);
             return stage;
          } else {
             return null;
          }
       }
    }
 </pre></div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.0</dd>
<dt>Author:</dt>
<dd><a href="mailto:manik@jboss.org">Manik Surtani</a>, Jason T. Greene, William Burns</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="cachemanagerlistener/annotation/CacheStarted.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>CacheStarted</code></a></li>
<li><a href="cachemanagerlistener/annotation/CacheStopped.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>CacheStopped</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryModified.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryModified</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryCreated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryCreated</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryRemoved.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryRemoved</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryExpired.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryExpired</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryVisited.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryVisited</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryLoaded.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryLoaded</code></a></li>
<li><a href="cachelistener/annotation/CacheEntriesEvicted.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntriesEvicted</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryActivated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryActivated</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryPassivated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryPassivated</code></a></li>
<li><a href="cachemanagerlistener/annotation/ViewChanged.html" title="annotation interface in org.infinispan.notifications.cachemanagerlistener.annotation"><code>ViewChanged</code></a></li>
<li><a href="cachelistener/annotation/TransactionCompleted.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>TransactionCompleted</code></a></li>
<li><a href="cachelistener/annotation/TransactionRegistered.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>TransactionRegistered</code></a></li>
<li><a href="cachelistener/annotation/CacheEntryInvalidated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryInvalidated</code></a></li>
<li><a href="cachelistener/annotation/DataRehashed.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>DataRehashed</code></a></li>
<li><a href="cachelistener/annotation/TopologyChanged.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>TopologyChanged</code></a></li>
<li><a href="cachelistener/annotation/PartitionStatusChanged.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>PartitionStatusChanged</code></a></li>
<li><a href="cachelistener/annotation/PersistenceAvailabilityChanged.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>PersistenceAvailabilityChanged</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Listener.Observation.html" class="type-name-link" title="enum class in org.infinispan.notifications">Listener.Observation</a></code></div>
<div class="col-last even-row-color">
<div class="block">Enumeration that defines when a listener event can be observed.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#clustered()" class="member-name-link">clustered</a></code></div>
<div class="col-last even-row-color">
<div class="block">Defines whether the annotated listener is clustered or not.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#includeCurrentState()" class="member-name-link">includeCurrentState</a></code></div>
<div class="col-last odd-row-color">
<div class="block">If set to true then the entire existing state within the cluster is
 evaluated.</div>
</div>
<div class="col-first even-row-color"><code><a href="Listener.Observation.html" title="enum class in org.infinispan.notifications">Listener.Observation</a></code></div>
<div class="col-second even-row-color"><code><a href="#observation()" class="member-name-link">observation</a></code></div>
<div class="col-last even-row-color">
<div class="block">Returns the type of observation level this listener defines.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#primaryOnly()" class="member-name-link">primaryOnly</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specifies whether the event should be fired on the primary data owner of the affected key, or all nodes that see
 the update.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#sync()" class="member-name-link">sync</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies whether callbacks on any class annotated with this annotation happens synchronously or asynchronously.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="sync()">
<h3>sync</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">sync</span></div>
<div class="block">Specifies whether callbacks on any class annotated with this annotation happens synchronously or asynchronously.
 Please see the appropriate section on the <a href="Listener.html" title="annotation interface in org.infinispan.notifications"><code>Listener</code></a> class for more details.
 Defaults to <code>true</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the expectation is that the operation waits until the callbacks complete before continuing;
 false if the operation can continue immediately.</dd>
<dt>Since:</dt>
<dd>4.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>true</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="primaryOnly()">
<h3>primaryOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">primaryOnly</span></div>
<div class="block">Specifies whether the event should be fired on the primary data owner of the affected key, or all nodes that see
 the update.
 <p>
 Note that is value is ignored when <a href="#clustered()"><code>clustered()</code></a> is true.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the expectation is that only the primary data owner will fire the event, false if all nodes that
         see the update fire the event.</dd>
<dt>Since:</dt>
<dd>5.3</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="clustered()">
<h3>clustered</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">clustered</span></div>
<div class="block">Defines whether the annotated listener is clustered or not.
 Important: Clustered listener can only be notified for
 <a href="cachelistener/annotation/CacheEntryRemoved.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryRemoved</code></a>,
 <a href="cachelistener/annotation/CacheEntryCreated.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryCreated</code></a>,
 <a href="cachelistener/annotation/CacheEntryRemoved.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryRemoved</code></a>
 and <a href="cachelistener/annotation/CacheEntryExpired.html" title="annotation interface in org.infinispan.notifications.cachelistener.annotation"><code>CacheEntryExpired</code></a> events.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the expectation is that this listener is to be a cluster listener, as in it will receive
         all notifications for data modifications</dd>
<dt>Since:</dt>
<dd>7.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="includeCurrentState()">
<h3>includeCurrentState</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">includeCurrentState</span></div>
<div class="block">If set to true then the entire existing state within the cluster is
 evaluated. For existing matches of the value, an @CacheEntryCreated event is triggered against the listener
 during registration.  This is only supported if the listener is also
 <a href="#clustered()"><code>clustered()</code></a>.
 <p>
 If using a distributed clustered cache it is possible to retrieve new events before the initial transfer is
 completed.  This is handled since only new events are queued until the segment it belongs to is completed
 for iteration.  This also will help reduce memory strain since a distributed clustered listener will need
 to eventually retrieve all values from the cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the expectation is that when the listener is installed that all of the current data is sent
         as new events to the listener before receiving new events</dd>
<dt>Since:</dt>
<dd>7.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="observation()">
<h3>observation</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="Listener.Observation.html" title="enum class in org.infinispan.notifications">Listener.Observation</a></span>&nbsp;<span class="element-name">observation</span></div>
<div class="block">Returns the type of observation level this listener defines.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the observation level of this listener</dd>
<dt>Since:</dt>
<dd>7.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Listener.Observation.html" title="enum class in org.infinispan.notifications"><code>Listener.Observation</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>BOTH</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright © 2009–2025 <a href="https://infinispan.org">infinispan.org</a>. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
