<!DOCTYPE HTML>
<html lang="en">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPD7V946LB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GPD7V946LB');
</script>
<!-- Generated by javadoc (17) on Tue Feb 18 11:42:39 CET 2025 -->
<title>ScatteredVersionManager (Infinispan 14.0 JavaDoc)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-02-18">
<meta name="description" content="declaration: package: org.infinispan.scattered, interface: ScatteredVersionManager">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language">Infinispan 14.0.33.Final</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ScatteredVersionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.infinispan.scattered</a></div>
<h1 title="Interface ScatteredVersionManager" class="title">Interface ScatteredVersionManager&lt;K&gt;</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="impl/ScatteredVersionManagerImpl.html" title="class in org.infinispan.scattered.impl">ScatteredVersionManagerImpl</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">ScatteredVersionManager&lt;K&gt;</span></div>
<div class="block">Manages versions of entries and states of segments.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Radim Vansa &lt;rvansa@redhat.com&gt;</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ScatteredVersionManager.SegmentState.html" class="type-name-link" title="enum in org.infinispan.scattered">ScatteredVersionManager.SegmentState</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#clearInvalidations()" class="member-name-link">clearInvalidations</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Forget all non-processed invalidations scheduled through <a href="#scheduleKeyInvalidation(K,org.infinispan.container.versioning.EntryVersion,boolean)"><code>scheduleKeyInvalidation(Object, EntryVersion, boolean)</code></a></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getBlockingFuture(int)" class="member-name-link">getBlockingFuture</a><wbr>(int&nbsp;segment)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getPreloadedTopologyId()" class="member-name-link">getPreloadedTopologyId</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ScatteredVersionManager.SegmentState.html" title="enum in org.infinispan.scattered">ScatteredVersionManager.SegmentState</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getSegmentState(int)" class="member-name-link">getSegmentState</a><wbr>(int&nbsp;segment)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#incrementVersion(int)" class="member-name-link">incrementVersion</a><wbr>(int&nbsp;segment)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Generates a new version for an entry in given segment.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isVersionActual(int,org.infinispan.container.versioning.EntryVersion)" class="member-name-link">isVersionActual</a><wbr>(int&nbsp;segment,
 <a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#notifyKeyTransferFinished(int,boolean,boolean)" class="member-name-link">notifyKeyTransferFinished</a><wbr>(int&nbsp;segment,
 boolean&nbsp;expectValues,
 boolean&nbsp;cancelled)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">All key + version data from given segment have been received, or the key transfer failed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#notifyValueTransferFinished()" class="member-name-link">notifyValueTransferFinished</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">All entries have been received and we can put segments owned according to consistent hash
 to <a href="ScatteredVersionManager.SegmentState.html#OWNED"><code>ScatteredVersionManager.SegmentState.OWNED</code></a> state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#registerSegment(int)" class="member-name-link">registerSegment</a><wbr>(int&nbsp;segment)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Move the segment to <a href="ScatteredVersionManager.SegmentState.html#BLOCKED"><code>ScatteredVersionManager.SegmentState.BLOCKED</code></a> state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#scheduleKeyInvalidation(K,org.infinispan.container.versioning.EntryVersion,boolean)" class="member-name-link">scheduleKeyInvalidation</a><wbr>(<a href="ScatteredVersionManager.html" title="type parameter in ScatteredVersionManager">K</a>&nbsp;key,
 <a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version,
 boolean&nbsp;removal)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Notifies the manager that an operation on given key with version previously retrieved from
 <a href="#incrementVersion(int)"><code>incrementVersion(int)</code></a> has finished.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setOwnedSegments(org.infinispan.commons.util.IntSet)" class="member-name-link">setOwnedSegments</a><wbr>(<a href="../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Move the segment from <a href="ScatteredVersionManager.SegmentState.html#NOT_OWNED"><code>ScatteredVersionManager.SegmentState.NOT_OWNED</code></a> to <a href="ScatteredVersionManager.SegmentState.html#OWNED"><code>ScatteredVersionManager.SegmentState.OWNED</code></a> without transferring data.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setTopologyId(int)" class="member-name-link">setTopologyId</a><wbr>(int&nbsp;topologyId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Set current topology id.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setValuesTransferTopology(int)" class="member-name-link">setValuesTransferTopology</a><wbr>(int&nbsp;topologyId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#startKeyTransfer(org.infinispan.commons.util.IntSet)" class="member-name-link">startKeyTransfer</a><wbr>(<a href="../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Move the segments from <a href="ScatteredVersionManager.SegmentState.html#BLOCKED"><code>ScatteredVersionManager.SegmentState.BLOCKED</code></a> to <a href="ScatteredVersionManager.SegmentState.html#KEY_TRANSFER"><code>ScatteredVersionManager.SegmentState.KEY_TRANSFER</code></a> state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#unregisterSegment(int)" class="member-name-link">unregisterSegment</a><wbr>(int&nbsp;segment)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Move the segment to <a href="ScatteredVersionManager.SegmentState.html#NOT_OWNED"><code>ScatteredVersionManager.SegmentState.NOT_OWNED</code></a> state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updatePreloadedEntryVersion(org.infinispan.container.versioning.EntryVersion)" class="member-name-link">updatePreloadedEntryVersion</a><wbr>(<a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">This is called only during preload.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#valuesFuture(int)" class="member-name-link">valuesFuture</a><wbr>(int&nbsp;topologyId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="incrementVersion(int)">
<h3>incrementVersion</h3>
<div class="member-signature"><span class="return-type"><a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a></span>&nbsp;<span class="element-name">incrementVersion</span><wbr><span class="parameters">(int&nbsp;segment)</span></div>
<div class="block">Generates a new version for an entry in given segment.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isVersionActual(int,org.infinispan.container.versioning.EntryVersion)">
<h3>isVersionActual</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isVersionActual</span><wbr><span class="parameters">(int&nbsp;segment,
 <a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
<dd><code>version</code> - </dd>
<dt>Returns:</dt>
<dd>True if the version was generated by this node after most recently becoming owner of the given segment.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="scheduleKeyInvalidation(K,org.infinispan.container.versioning.EntryVersion,boolean)">
<h3 id="scheduleKeyInvalidation(java.lang.Object,org.infinispan.container.versioning.EntryVersion,boolean)">scheduleKeyInvalidation</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">scheduleKeyInvalidation</span><wbr><span class="parameters">(<a href="ScatteredVersionManager.html" title="type parameter in ScatteredVersionManager">K</a>&nbsp;key,
 <a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version,
 boolean&nbsp;removal)</span></div>
<div class="block">Notifies the manager that an operation on given key with version previously retrieved from
 <a href="#incrementVersion(int)"><code>incrementVersion(int)</code></a> has finished. This operation has to be executed on originator of the operation
 once the entry was stored on both nodes.

 Eventually order versions of entries will be removed on other nodes. When the entry was completely removed
 by the operation, the nodes have stored a tombstone of that entry. The older versions will be dropped regularly
 and after this is confirmed the tombstones will be invalidated, too.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>key</code> - </dd>
<dd><code>version</code> - </dd>
<dd><code>removal</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clearInvalidations()">
<h3>clearInvalidations</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">clearInvalidations</span>()</div>
<div class="block">Forget all non-processed invalidations scheduled through <a href="#scheduleKeyInvalidation(K,org.infinispan.container.versioning.EntryVersion,boolean)"><code>scheduleKeyInvalidation(Object, EntryVersion, boolean)</code></a></div>
</section>
</li>
<li>
<section class="detail" id="registerSegment(int)">
<h3>registerSegment</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">registerSegment</span><wbr><span class="parameters">(int&nbsp;segment)</span></div>
<div class="block">Move the segment to <a href="ScatteredVersionManager.SegmentState.html#BLOCKED"><code>ScatteredVersionManager.SegmentState.BLOCKED</code></a> state.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unregisterSegment(int)">
<h3>unregisterSegment</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">unregisterSegment</span><wbr><span class="parameters">(int&nbsp;segment)</span></div>
<div class="block">Move the segment to <a href="ScatteredVersionManager.SegmentState.html#NOT_OWNED"><code>ScatteredVersionManager.SegmentState.NOT_OWNED</code></a> state.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOwnedSegments(org.infinispan.commons.util.IntSet)">
<h3>setOwnedSegments</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setOwnedSegments</span><wbr><span class="parameters">(<a href="../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block">Move the segment from <a href="ScatteredVersionManager.SegmentState.html#NOT_OWNED"><code>ScatteredVersionManager.SegmentState.NOT_OWNED</code></a> to <a href="ScatteredVersionManager.SegmentState.html#OWNED"><code>ScatteredVersionManager.SegmentState.OWNED</code></a> without transferring data.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segments</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startKeyTransfer(org.infinispan.commons.util.IntSet)">
<h3>startKeyTransfer</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">startKeyTransfer</span><wbr><span class="parameters">(<a href="../commons/util/IntSet.html" title="interface in org.infinispan.commons.util">IntSet</a>&nbsp;segments)</span></div>
<div class="block">Move the segments from <a href="ScatteredVersionManager.SegmentState.html#BLOCKED"><code>ScatteredVersionManager.SegmentState.BLOCKED</code></a> to <a href="ScatteredVersionManager.SegmentState.html#KEY_TRANSFER"><code>ScatteredVersionManager.SegmentState.KEY_TRANSFER</code></a> state.</div>
</section>
</li>
<li>
<section class="detail" id="notifyKeyTransferFinished(int,boolean,boolean)">
<h3>notifyKeyTransferFinished</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">notifyKeyTransferFinished</span><wbr><span class="parameters">(int&nbsp;segment,
 boolean&nbsp;expectValues,
 boolean&nbsp;cancelled)</span></div>
<div class="block">All key + version data from given segment have been received, or the key transfer failed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
<dd><code>expectValues</code> - True when the transfer failed and the segment will be moved
                     to the <a href="ScatteredVersionManager.SegmentState.html#OWNED"><code>ScatteredVersionManager.SegmentState.OWNED</code></a> state without waiting for values.</dd>
<dd><code>cancelled</code> - True is the transfer was cancelled due to a new topology - in that case
                  the segment will end up in <a href="ScatteredVersionManager.SegmentState.html#NOT_OWNED"><code>ScatteredVersionManager.SegmentState.NOT_OWNED</code></a>. This takes
                  precedence over <code>expectValues</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="notifyValueTransferFinished()">
<h3>notifyValueTransferFinished</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">notifyValueTransferFinished</span>()</div>
<div class="block">All entries have been received and we can put segments owned according to consistent hash
 to <a href="ScatteredVersionManager.SegmentState.html#OWNED"><code>ScatteredVersionManager.SegmentState.OWNED</code></a> state.</div>
</section>
</li>
<li>
<section class="detail" id="getSegmentState(int)">
<h3>getSegmentState</h3>
<div class="member-signature"><span class="return-type"><a href="ScatteredVersionManager.SegmentState.html" title="enum in org.infinispan.scattered">ScatteredVersionManager.SegmentState</a></span>&nbsp;<span class="element-name">getSegmentState</span><wbr><span class="parameters">(int&nbsp;segment)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
<dt>Returns:</dt>
<dd>Current <a href="ScatteredVersionManager.SegmentState.html" title="enum in org.infinispan.scattered"><code>status</code></a> of the segment.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBlockingFuture(int)">
<h3>getBlockingFuture</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">getBlockingFuture</span><wbr><span class="parameters">(int&nbsp;segment)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>segment</code> - </dd>
<dt>Returns:</dt>
<dd>A completable future that can be used to schedule an operation once that the segment has moved from
 <a href="ScatteredVersionManager.SegmentState.html#BLOCKED"><code>ScatteredVersionManager.SegmentState.BLOCKED</code></a> state.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setValuesTransferTopology(int)">
<h3>setValuesTransferTopology</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setValuesTransferTopology</span><wbr><span class="parameters">(int&nbsp;topologyId)</span></div>
</section>
</li>
<li>
<section class="detail" id="valuesFuture(int)">
<h3>valuesFuture</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">valuesFuture</span><wbr><span class="parameters">(int&nbsp;topologyId)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A <code>CompletableFuture</code> that completes when value transfer has finished for the given topology id.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTopologyId(int)">
<h3>setTopologyId</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setTopologyId</span><wbr><span class="parameters">(int&nbsp;topologyId)</span></div>
<div class="block">Set current topology id.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>topologyId</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updatePreloadedEntryVersion(org.infinispan.container.versioning.EntryVersion)">
<h3>updatePreloadedEntryVersion</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">updatePreloadedEntryVersion</span><wbr><span class="parameters">(<a href="../container/versioning/EntryVersion.html" title="interface in org.infinispan.container.versioning">EntryVersion</a>&nbsp;version)</span></div>
<div class="block">This is called only during preload. Makes sure that the cache will start with topology higher than
 the one stored in a cache store.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>version</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPreloadedTopologyId()">
<h3>getPreloadedTopologyId</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getPreloadedTopologyId</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025 <a href="http://www.jboss.org">JBoss, a division of Red Hat</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
